import{_ as Xt}from"./preload-helper-41c905a7.js";import{w as ri}from"./singletons-04e5f1a0.js";import{D as Yt}from"./index-bfadf7ea.js";const Kt=!0,es=Kt;/*!
 *  decimal.js v10.4.3
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var Ve=9e15,De=1e9,yr="0123456789abcdef",Ti="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Ni="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",br={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Ve,maxE:Ve,crypto:!1},pt,qe,L=!0,xi="[DecimalError] ",Oe=xi+"Invalid argument: ",mt=xi+"Precision limit exceeded",gt=xi+"crypto unavailable",vt="[object Decimal]",re=Math.floor,W=Math.pow,is=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,rs=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,ts=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,wt=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,pe=1e7,E=7,ss=9007199254740991,ns=Ti.length-1,Tr=Ni.length-1,p={toStringTag:vt};p.absoluteValue=p.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),N(e)};p.ceil=function(){return N(new this.constructor(this),this.e+1,2)};p.clampedTo=p.clamp=function(e,i){var r,t=this,s=t.constructor;if(e=new s(e),i=new s(i),!e.s||!i.s)return new s(NaN);if(e.gt(i))throw Error(Oe+i);return r=t.cmp(e),r<0?e:t.cmp(i)>0?i:new s(t)};p.comparedTo=p.cmp=function(e){var i,r,t,s,n=this,o=n.d,l=(e=new n.constructor(e)).d,u=n.s,a=e.s;if(!o||!l)return!u||!a?NaN:u!==a?u:o===l?0:!o^u<0?1:-1;if(!o[0]||!l[0])return o[0]?u:l[0]?-a:0;if(u!==a)return u;if(n.e!==e.e)return n.e>e.e^u<0?1:-1;for(t=o.length,s=l.length,i=0,r=t<s?t:s;i<r;++i)if(o[i]!==l[i])return o[i]>l[i]^u<0?1:-1;return t===s?0:t>s^u<0?1:-1};p.cosine=p.cos=function(){var e,i,r=this,t=r.constructor;return r.d?r.d[0]?(e=t.precision,i=t.rounding,t.precision=e+Math.max(r.e,r.sd())+E,t.rounding=1,r=os(t,qt(t,r)),t.precision=e,t.rounding=i,N(qe==2||qe==3?r.neg():r,e,i,!0)):new t(1):new t(NaN)};p.cubeRoot=p.cbrt=function(){var e,i,r,t,s,n,o,l,u,a,f=this,c=f.constructor;if(!f.isFinite()||f.isZero())return new c(f);for(L=!1,n=f.s*W(f.s*f,1/3),!n||Math.abs(n)==1/0?(r=ee(f.d),e=f.e,(n=(e-r.length+1)%3)&&(r+=n==1||n==-2?"0":"00"),n=W(r,1/3),e=re((e+1)/3)-(e%3==(e<0?-1:2)),n==1/0?r="5e"+e:(r=n.toExponential(),r=r.slice(0,r.indexOf("e")+1)+e),t=new c(r),t.s=f.s):t=new c(n.toString()),o=(e=c.precision)+3;;)if(l=t,u=l.times(l).times(l),a=u.plus(f),t=U(a.plus(f).times(l),a.plus(u),o+2,1),ee(l.d).slice(0,o)===(r=ee(t.d)).slice(0,o))if(r=r.slice(o-3,o+1),r=="9999"||!s&&r=="4999"){if(!s&&(N(l,e+1,0),l.times(l).times(l).eq(f))){t=l;break}o+=4,s=1}else{(!+r||!+r.slice(1)&&r.charAt(0)=="5")&&(N(t,e+1,1),i=!t.times(t).times(t).eq(f));break}return L=!0,N(t,e,c.rounding,i)};p.decimalPlaces=p.dp=function(){var e,i=this.d,r=NaN;if(i){if(e=i.length-1,r=(e-re(this.e/E))*E,e=i[e],e)for(;e%10==0;e/=10)r--;r<0&&(r=0)}return r};p.dividedBy=p.div=function(e){return U(this,new this.constructor(e))};p.dividedToIntegerBy=p.divToInt=function(e){var i=this,r=i.constructor;return N(U(i,new r(e),0,1,1),r.precision,r.rounding)};p.equals=p.eq=function(e){return this.cmp(e)===0};p.floor=function(){return N(new this.constructor(this),this.e+1,3)};p.greaterThan=p.gt=function(e){return this.cmp(e)>0};p.greaterThanOrEqualTo=p.gte=function(e){var i=this.cmp(e);return i==1||i===0};p.hyperbolicCosine=p.cosh=function(){var e,i,r,t,s,n=this,o=n.constructor,l=new o(1);if(!n.isFinite())return new o(n.s?1/0:NaN);if(n.isZero())return l;r=o.precision,t=o.rounding,o.precision=r+Math.max(n.e,n.sd())+4,o.rounding=1,s=n.d.length,s<32?(e=Math.ceil(s/3),i=(1/Mi(4,e)).toString()):(e=16,i="2.3283064365386962890625e-10"),n=Ye(o,1,n.times(i),new o(1),!0);for(var u,a=e,f=new o(8);a--;)u=n.times(n),n=l.minus(u.times(f.minus(u.times(f))));return N(n,o.precision=r,o.rounding=t,!0)};p.hyperbolicSine=p.sinh=function(){var e,i,r,t,s=this,n=s.constructor;if(!s.isFinite()||s.isZero())return new n(s);if(i=n.precision,r=n.rounding,n.precision=i+Math.max(s.e,s.sd())+4,n.rounding=1,t=s.d.length,t<3)s=Ye(n,2,s,s,!0);else{e=1.4*Math.sqrt(t),e=e>16?16:e|0,s=s.times(1/Mi(5,e)),s=Ye(n,2,s,s,!0);for(var o,l=new n(5),u=new n(16),a=new n(20);e--;)o=s.times(s),s=s.times(l.plus(o.times(u.times(o).plus(a))))}return n.precision=i,n.rounding=r,N(s,i,r,!0)};p.hyperbolicTangent=p.tanh=function(){var e,i,r=this,t=r.constructor;return r.isFinite()?r.isZero()?new t(r):(e=t.precision,i=t.rounding,t.precision=e+7,t.rounding=1,U(r.sinh(),r.cosh(),t.precision=e,t.rounding=i)):new t(r.s)};p.inverseCosine=p.acos=function(){var e,i=this,r=i.constructor,t=i.abs().cmp(1),s=r.precision,n=r.rounding;return t!==-1?t===0?i.isNeg()?de(r,s,n):new r(0):new r(NaN):i.isZero()?de(r,s+4,n).times(.5):(r.precision=s+6,r.rounding=1,i=i.asin(),e=de(r,s+4,n).times(.5),r.precision=s,r.rounding=n,e.minus(i))};p.inverseHyperbolicCosine=p.acosh=function(){var e,i,r=this,t=r.constructor;return r.lte(1)?new t(r.eq(1)?0:NaN):r.isFinite()?(e=t.precision,i=t.rounding,t.precision=e+Math.max(Math.abs(r.e),r.sd())+4,t.rounding=1,L=!1,r=r.times(r).minus(1).sqrt().plus(r),L=!0,t.precision=e,t.rounding=i,r.ln()):new t(r)};p.inverseHyperbolicSine=p.asinh=function(){var e,i,r=this,t=r.constructor;return!r.isFinite()||r.isZero()?new t(r):(e=t.precision,i=t.rounding,t.precision=e+2*Math.max(Math.abs(r.e),r.sd())+6,t.rounding=1,L=!1,r=r.times(r).plus(1).sqrt().plus(r),L=!0,t.precision=e,t.rounding=i,r.ln())};p.inverseHyperbolicTangent=p.atanh=function(){var e,i,r,t,s=this,n=s.constructor;return s.isFinite()?s.e>=0?new n(s.abs().eq(1)?s.s/0:s.isZero()?s:NaN):(e=n.precision,i=n.rounding,t=s.sd(),Math.max(t,e)<2*-s.e-1?N(new n(s),e,i,!0):(n.precision=r=t-s.e,s=U(s.plus(1),new n(1).minus(s),r+e,1),n.precision=e+4,n.rounding=1,s=s.ln(),n.precision=e,n.rounding=i,s.times(.5))):new n(NaN)};p.inverseSine=p.asin=function(){var e,i,r,t,s=this,n=s.constructor;return s.isZero()?new n(s):(i=s.abs().cmp(1),r=n.precision,t=n.rounding,i!==-1?i===0?(e=de(n,r+4,t).times(.5),e.s=s.s,e):new n(NaN):(n.precision=r+6,n.rounding=1,s=s.div(new n(1).minus(s.times(s)).sqrt().plus(1)).atan(),n.precision=r,n.rounding=t,s.times(2)))};p.inverseTangent=p.atan=function(){var e,i,r,t,s,n,o,l,u,a=this,f=a.constructor,c=f.precision,h=f.rounding;if(a.isFinite()){if(a.isZero())return new f(a);if(a.abs().eq(1)&&c+4<=Tr)return o=de(f,c+4,h).times(.25),o.s=a.s,o}else{if(!a.s)return new f(NaN);if(c+4<=Tr)return o=de(f,c+4,h).times(.5),o.s=a.s,o}for(f.precision=l=c+10,f.rounding=1,r=Math.min(28,l/E+2|0),e=r;e;--e)a=a.div(a.times(a).plus(1).sqrt().plus(1));for(L=!1,i=Math.ceil(l/E),t=1,u=a.times(a),o=new f(a),s=a;e!==-1;)if(s=s.times(u),n=o.minus(s.div(t+=2)),s=s.times(u),o=n.plus(s.div(t+=2)),o.d[i]!==void 0)for(e=i;o.d[e]===n.d[e]&&e--;);return r&&(o=o.times(2<<r-1)),L=!0,N(o,f.precision=c,f.rounding=h,!0)};p.isFinite=function(){return!!this.d};p.isInteger=p.isInt=function(){return!!this.d&&re(this.e/E)>this.d.length-2};p.isNaN=function(){return!this.s};p.isNegative=p.isNeg=function(){return this.s<0};p.isPositive=p.isPos=function(){return this.s>0};p.isZero=function(){return!!this.d&&this.d[0]===0};p.lessThan=p.lt=function(e){return this.cmp(e)<0};p.lessThanOrEqualTo=p.lte=function(e){return this.cmp(e)<1};p.logarithm=p.log=function(e){var i,r,t,s,n,o,l,u,a=this,f=a.constructor,c=f.precision,h=f.rounding,g=5;if(e==null)e=new f(10),i=!0;else{if(e=new f(e),r=e.d,e.s<0||!r||!r[0]||e.eq(1))return new f(NaN);i=e.eq(10)}if(r=a.d,a.s<0||!r||!r[0]||a.eq(1))return new f(r&&!r[0]?-1/0:a.s!=1?NaN:r?0:1/0);if(i)if(r.length>1)n=!0;else{for(s=r[0];s%10===0;)s/=10;n=s!==1}if(L=!1,l=c+g,o=Le(a,l),t=i?qi(f,l+10):Le(e,l),u=U(o,t,l,1),ui(u.d,s=c,h))do if(l+=10,o=Le(a,l),t=i?qi(f,l+10):Le(e,l),u=U(o,t,l,1),!n){+ee(u.d).slice(s+1,s+15)+1==1e14&&(u=N(u,c+1,0));break}while(ui(u.d,s+=10,h));return L=!0,N(u,c,h)};p.minus=p.sub=function(e){var i,r,t,s,n,o,l,u,a,f,c,h,g=this,M=g.constructor;if(e=new M(e),!g.d||!e.d)return!g.s||!e.s?e=new M(NaN):g.d?e.s=-e.s:e=new M(e.d||g.s!==e.s?g:NaN),e;if(g.s!=e.s)return e.s=-e.s,g.plus(e);if(a=g.d,h=e.d,l=M.precision,u=M.rounding,!a[0]||!h[0]){if(h[0])e.s=-e.s;else if(a[0])e=new M(g);else return new M(u===3?-0:0);return L?N(e,l,u):e}if(r=re(e.e/E),f=re(g.e/E),a=a.slice(),n=f-r,n){for(c=n<0,c?(i=a,n=-n,o=h.length):(i=h,r=f,o=a.length),t=Math.max(Math.ceil(l/E),o)+2,n>t&&(n=t,i.length=1),i.reverse(),t=n;t--;)i.push(0);i.reverse()}else{for(t=a.length,o=h.length,c=t<o,c&&(o=t),t=0;t<o;t++)if(a[t]!=h[t]){c=a[t]<h[t];break}n=0}for(c&&(i=a,a=h,h=i,e.s=-e.s),o=a.length,t=h.length-o;t>0;--t)a[o++]=0;for(t=h.length;t>n;){if(a[--t]<h[t]){for(s=t;s&&a[--s]===0;)a[s]=pe-1;--a[s],a[t]+=pe}a[t]-=h[t]}for(;a[--o]===0;)a.pop();for(;a[0]===0;a.shift())--r;return a[0]?(e.d=a,e.e=Ei(a,r),L?N(e,l,u):e):new M(u===3?-0:0)};p.modulo=p.mod=function(e){var i,r=this,t=r.constructor;return e=new t(e),!r.d||!e.s||e.d&&!e.d[0]?new t(NaN):!e.d||r.d&&!r.d[0]?N(new t(r),t.precision,t.rounding):(L=!1,t.modulo==9?(i=U(r,e.abs(),0,3,1),i.s*=e.s):i=U(r,e,0,t.modulo,1),i=i.times(e),L=!0,r.minus(i))};p.naturalExponential=p.exp=function(){return Nr(this)};p.naturalLogarithm=p.ln=function(){return Le(this)};p.negated=p.neg=function(){var e=new this.constructor(this);return e.s=-e.s,N(e)};p.plus=p.add=function(e){var i,r,t,s,n,o,l,u,a,f,c=this,h=c.constructor;if(e=new h(e),!c.d||!e.d)return!c.s||!e.s?e=new h(NaN):c.d||(e=new h(e.d||c.s===e.s?c:NaN)),e;if(c.s!=e.s)return e.s=-e.s,c.minus(e);if(a=c.d,f=e.d,l=h.precision,u=h.rounding,!a[0]||!f[0])return f[0]||(e=new h(c)),L?N(e,l,u):e;if(n=re(c.e/E),t=re(e.e/E),a=a.slice(),s=n-t,s){for(s<0?(r=a,s=-s,o=f.length):(r=f,t=n,o=a.length),n=Math.ceil(l/E),o=n>o?n+1:o+1,s>o&&(s=o,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(o=a.length,s=f.length,o-s<0&&(s=o,r=f,f=a,a=r),i=0;s;)i=(a[--s]=a[s]+f[s]+i)/pe|0,a[s]%=pe;for(i&&(a.unshift(i),++t),o=a.length;a[--o]==0;)a.pop();return e.d=a,e.e=Ei(a,t),L?N(e,l,u):e};p.precision=p.sd=function(e){var i,r=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Oe+e);return r.d?(i=yt(r.d),e&&r.e+1>i&&(i=r.e+1)):i=NaN,i};p.round=function(){var e=this,i=e.constructor;return N(new i(e),e.e+1,i.rounding)};p.sine=p.sin=function(){var e,i,r=this,t=r.constructor;return r.isFinite()?r.isZero()?new t(r):(e=t.precision,i=t.rounding,t.precision=e+Math.max(r.e,r.sd())+E,t.rounding=1,r=us(t,qt(t,r)),t.precision=e,t.rounding=i,N(qe>2?r.neg():r,e,i,!0)):new t(NaN)};p.squareRoot=p.sqrt=function(){var e,i,r,t,s,n,o=this,l=o.d,u=o.e,a=o.s,f=o.constructor;if(a!==1||!l||!l[0])return new f(!a||a<0&&(!l||l[0])?NaN:l?o:1/0);for(L=!1,a=Math.sqrt(+o),a==0||a==1/0?(i=ee(l),(i.length+u)%2==0&&(i+="0"),a=Math.sqrt(i),u=re((u+1)/2)-(u<0||u%2),a==1/0?i="5e"+u:(i=a.toExponential(),i=i.slice(0,i.indexOf("e")+1)+u),t=new f(i)):t=new f(a.toString()),r=(u=f.precision)+3;;)if(n=t,t=n.plus(U(o,n,r+2,1)).times(.5),ee(n.d).slice(0,r)===(i=ee(t.d)).slice(0,r))if(i=i.slice(r-3,r+1),i=="9999"||!s&&i=="4999"){if(!s&&(N(n,u+1,0),n.times(n).eq(o))){t=n;break}r+=4,s=1}else{(!+i||!+i.slice(1)&&i.charAt(0)=="5")&&(N(t,u+1,1),e=!t.times(t).eq(o));break}return L=!0,N(t,u,f.rounding,e)};p.tangent=p.tan=function(){var e,i,r=this,t=r.constructor;return r.isFinite()?r.isZero()?new t(r):(e=t.precision,i=t.rounding,t.precision=e+10,t.rounding=1,r=r.sin(),r.s=1,r=U(r,new t(1).minus(r.times(r)).sqrt(),e+10,0),t.precision=e,t.rounding=i,N(qe==2||qe==4?r.neg():r,e,i,!0)):new t(NaN)};p.times=p.mul=function(e){var i,r,t,s,n,o,l,u,a,f=this,c=f.constructor,h=f.d,g=(e=new c(e)).d;if(e.s*=f.s,!h||!h[0]||!g||!g[0])return new c(!e.s||h&&!h[0]&&!g||g&&!g[0]&&!h?NaN:!h||!g?e.s/0:e.s*0);for(r=re(f.e/E)+re(e.e/E),u=h.length,a=g.length,u<a&&(n=h,h=g,g=n,o=u,u=a,a=o),n=[],o=u+a,t=o;t--;)n.push(0);for(t=a;--t>=0;){for(i=0,s=u+t;s>t;)l=n[s]+g[t]*h[s-t-1]+i,n[s--]=l%pe|0,i=l/pe|0;n[s]=(n[s]+i)%pe|0}for(;!n[--o];)n.pop();return i?++r:n.shift(),e.d=n,e.e=Ei(n,r),L?N(e,c.precision,c.rounding):e};p.toBinary=function(e,i){return Lr(this,2,e,i)};p.toDecimalPlaces=p.toDP=function(e,i){var r=this,t=r.constructor;return r=new t(r),e===void 0?r:(oe(e,0,De),i===void 0?i=t.rounding:oe(i,0,8),N(r,e+r.e+1,i))};p.toExponential=function(e,i){var r,t=this,s=t.constructor;return e===void 0?r=Te(t,!0):(oe(e,0,De),i===void 0?i=s.rounding:oe(i,0,8),t=N(new s(t),e+1,i),r=Te(t,!0,e+1)),t.isNeg()&&!t.isZero()?"-"+r:r};p.toFixed=function(e,i){var r,t,s=this,n=s.constructor;return e===void 0?r=Te(s):(oe(e,0,De),i===void 0?i=n.rounding:oe(i,0,8),t=N(new n(s),e+s.e+1,i),r=Te(t,!1,e+t.e+1)),s.isNeg()&&!s.isZero()?"-"+r:r};p.toFraction=function(e){var i,r,t,s,n,o,l,u,a,f,c,h,g=this,M=g.d,q=g.constructor;if(!M)return new q(g);if(a=r=new q(1),t=u=new q(0),i=new q(t),n=i.e=yt(M)-g.e-1,o=n%E,i.d[0]=W(10,o<0?E+o:o),e==null)e=n>0?i:a;else{if(l=new q(e),!l.isInt()||l.lt(a))throw Error(Oe+l);e=l.gt(i)?n>0?i:a:l}for(L=!1,l=new q(ee(M)),f=q.precision,q.precision=n=M.length*E*2;c=U(l,i,0,1,1),s=r.plus(c.times(t)),s.cmp(e)!=1;)r=t,t=s,s=a,a=u.plus(c.times(s)),u=s,s=i,i=l.minus(c.times(s)),l=s;return s=U(e.minus(r),t,0,1,1),u=u.plus(s.times(a)),r=r.plus(s.times(t)),u.s=a.s=g.s,h=U(a,t,n,1).minus(g).abs().cmp(U(u,r,n,1).minus(g).abs())<1?[a,t]:[u,r],q.precision=f,L=!0,h};p.toHexadecimal=p.toHex=function(e,i){return Lr(this,16,e,i)};p.toNearest=function(e,i){var r=this,t=r.constructor;if(r=new t(r),e==null){if(!r.d)return r;e=new t(1),i=t.rounding}else{if(e=new t(e),i===void 0?i=t.rounding:oe(i,0,8),!r.d)return e.s?r:e;if(!e.d)return e.s&&(e.s=r.s),e}return e.d[0]?(L=!1,r=U(r,e,0,i,1).times(e),L=!0,N(r)):(e.s=r.s,r=e),r};p.toNumber=function(){return+this};p.toOctal=function(e,i){return Lr(this,8,e,i)};p.toPower=p.pow=function(e){var i,r,t,s,n,o,l=this,u=l.constructor,a=+(e=new u(e));if(!l.d||!e.d||!l.d[0]||!e.d[0])return new u(W(+l,a));if(l=new u(l),l.eq(1))return l;if(t=u.precision,n=u.rounding,e.eq(1))return N(l,t,n);if(i=re(e.e/E),i>=e.d.length-1&&(r=a<0?-a:a)<=ss)return s=bt(u,l,r,t),e.s<0?new u(1).div(s):N(s,t,n);if(o=l.s,o<0){if(i<e.d.length-1)return new u(NaN);if(e.d[i]&1||(o=1),l.e==0&&l.d[0]==1&&l.d.length==1)return l.s=o,l}return r=W(+l,a),i=r==0||!isFinite(r)?re(a*(Math.log("0."+ee(l.d))/Math.LN10+l.e+1)):new u(r+"").e,i>u.maxE+1||i<u.minE-1?new u(i>0?o/0:0):(L=!1,u.rounding=l.s=1,r=Math.min(12,(i+"").length),s=Nr(e.times(Le(l,t+r)),t),s.d&&(s=N(s,t+5,1),ui(s.d,t,n)&&(i=t+10,s=N(Nr(e.times(Le(l,i+r)),i),i+5,1),+ee(s.d).slice(t+1,t+15)+1==1e14&&(s=N(s,t+1,0)))),s.s=o,L=!0,u.rounding=n,N(s,t,n))};p.toPrecision=function(e,i){var r,t=this,s=t.constructor;return e===void 0?r=Te(t,t.e<=s.toExpNeg||t.e>=s.toExpPos):(oe(e,1,De),i===void 0?i=s.rounding:oe(i,0,8),t=N(new s(t),e,i),r=Te(t,e<=t.e||t.e<=s.toExpNeg,e)),t.isNeg()&&!t.isZero()?"-"+r:r};p.toSignificantDigits=p.toSD=function(e,i){var r=this,t=r.constructor;return e===void 0?(e=t.precision,i=t.rounding):(oe(e,1,De),i===void 0?i=t.rounding:oe(i,0,8)),N(new t(r),e,i)};p.toString=function(){var e=this,i=e.constructor,r=Te(e,e.e<=i.toExpNeg||e.e>=i.toExpPos);return e.isNeg()&&!e.isZero()?"-"+r:r};p.truncated=p.trunc=function(){return N(new this.constructor(this),this.e+1,1)};p.valueOf=p.toJSON=function(){var e=this,i=e.constructor,r=Te(e,e.e<=i.toExpNeg||e.e>=i.toExpPos);return e.isNeg()?"-"+r:r};function ee(e){var i,r,t,s=e.length-1,n="",o=e[0];if(s>0){for(n+=o,i=1;i<s;i++)t=e[i]+"",r=E-t.length,r&&(n+=Me(r)),n+=t;o=e[i],t=o+"",r=E-t.length,r&&(n+=Me(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return n+o}function oe(e,i,r){if(e!==~~e||e<i||e>r)throw Error(Oe+e)}function ui(e,i,r,t){var s,n,o,l;for(n=e[0];n>=10;n/=10)--i;return--i<0?(i+=E,s=0):(s=Math.ceil((i+1)/E),i%=E),n=W(10,E-i),l=e[s]%n|0,t==null?i<3?(i==0?l=l/100|0:i==1&&(l=l/10|0),o=r<4&&l==99999||r>3&&l==49999||l==5e4||l==0):o=(r<4&&l+1==n||r>3&&l+1==n/2)&&(e[s+1]/n/100|0)==W(10,i-2)-1||(l==n/2||l==0)&&(e[s+1]/n/100|0)==0:i<4?(i==0?l=l/1e3|0:i==1?l=l/100|0:i==2&&(l=l/10|0),o=(t||r<4)&&l==9999||!t&&r>3&&l==4999):o=((t||r<4)&&l+1==n||!t&&r>3&&l+1==n/2)&&(e[s+1]/n/1e3|0)==W(10,i-3)-1,o}function yi(e,i,r){for(var t,s=[0],n,o=0,l=e.length;o<l;){for(n=s.length;n--;)s[n]*=i;for(s[0]+=yr.indexOf(e.charAt(o++)),t=0;t<s.length;t++)s[t]>r-1&&(s[t+1]===void 0&&(s[t+1]=0),s[t+1]+=s[t]/r|0,s[t]%=r)}return s.reverse()}function os(e,i){var r,t,s;if(i.isZero())return i;t=i.d.length,t<32?(r=Math.ceil(t/3),s=(1/Mi(4,r)).toString()):(r=16,s="2.3283064365386962890625e-10"),e.precision+=r,i=Ye(e,1,i.times(s),new e(1));for(var n=r;n--;){var o=i.times(i);i=o.times(o).minus(o).times(8).plus(1)}return e.precision-=r,i}var U=function(){function e(t,s,n){var o,l=0,u=t.length;for(t=t.slice();u--;)o=t[u]*s+l,t[u]=o%n|0,l=o/n|0;return l&&t.unshift(l),t}function i(t,s,n,o){var l,u;if(n!=o)u=n>o?1:-1;else for(l=u=0;l<n;l++)if(t[l]!=s[l]){u=t[l]>s[l]?1:-1;break}return u}function r(t,s,n,o){for(var l=0;n--;)t[n]-=l,l=t[n]<s[n]?1:0,t[n]=l*o+t[n]-s[n];for(;!t[0]&&t.length>1;)t.shift()}return function(t,s,n,o,l,u){var a,f,c,h,g,M,q,d,m,S,O,F,x,D,H,J,B,te,V,se,ke=t.constructor,He=t.s==s.s?1:-1,j=t.d,_=s.d;if(!j||!j[0]||!_||!_[0])return new ke(!t.s||!s.s||(j?_&&j[0]==_[0]:!_)?NaN:j&&j[0]==0||!_?He*0:He/0);for(u?(g=1,f=t.e-s.e):(u=pe,g=E,f=re(t.e/g)-re(s.e/g)),V=_.length,B=j.length,m=new ke(He),S=m.d=[],c=0;_[c]==(j[c]||0);c++);if(_[c]>(j[c]||0)&&f--,n==null?(D=n=ke.precision,o=ke.rounding):l?D=n+(t.e-s.e)+1:D=n,D<0)S.push(1),M=!0;else{if(D=D/g+2|0,c=0,V==1){for(h=0,_=_[0],D++;(c<B||h)&&D--;c++)H=h*u+(j[c]||0),S[c]=H/_|0,h=H%_|0;M=h||c<B}else{for(h=u/(_[0]+1)|0,h>1&&(_=e(_,h,u),j=e(j,h,u),V=_.length,B=j.length),J=V,O=j.slice(0,V),F=O.length;F<V;)O[F++]=0;se=_.slice(),se.unshift(0),te=_[0],_[1]>=u/2&&++te;do h=0,a=i(_,O,V,F),a<0?(x=O[0],V!=F&&(x=x*u+(O[1]||0)),h=x/te|0,h>1?(h>=u&&(h=u-1),q=e(_,h,u),d=q.length,F=O.length,a=i(q,O,d,F),a==1&&(h--,r(q,V<d?se:_,d,u))):(h==0&&(a=h=1),q=_.slice()),d=q.length,d<F&&q.unshift(0),r(O,q,F,u),a==-1&&(F=O.length,a=i(_,O,V,F),a<1&&(h++,r(O,V<F?se:_,F,u))),F=O.length):a===0&&(h++,O=[0]),S[c++]=h,a&&O[0]?O[F++]=j[J]||0:(O=[j[J]],F=1);while((J++<B||O[0]!==void 0)&&D--);M=O[0]!==void 0}S[0]||S.shift()}if(g==1)m.e=f,pt=M;else{for(c=1,h=S[0];h>=10;h/=10)c++;m.e=c+f*g-1,N(m,l?n+m.e+1:n,o,M)}return m}}();function N(e,i,r,t){var s,n,o,l,u,a,f,c,h,g=e.constructor;e:if(i!=null){if(c=e.d,!c)return e;for(s=1,l=c[0];l>=10;l/=10)s++;if(n=i-s,n<0)n+=E,o=i,f=c[h=0],u=f/W(10,s-o-1)%10|0;else if(h=Math.ceil((n+1)/E),l=c.length,h>=l)if(t){for(;l++<=h;)c.push(0);f=u=0,s=1,n%=E,o=n-E+1}else break e;else{for(f=l=c[h],s=1;l>=10;l/=10)s++;n%=E,o=n-E+s,u=o<0?0:f/W(10,s-o-1)%10|0}if(t=t||i<0||c[h+1]!==void 0||(o<0?f:f%W(10,s-o-1)),a=r<4?(u||t)&&(r==0||r==(e.s<0?3:2)):u>5||u==5&&(r==4||t||r==6&&(n>0?o>0?f/W(10,s-o):0:c[h-1])%10&1||r==(e.s<0?8:7)),i<1||!c[0])return c.length=0,a?(i-=e.e+1,c[0]=W(10,(E-i%E)%E),e.e=-i||0):c[0]=e.e=0,e;if(n==0?(c.length=h,l=1,h--):(c.length=h+1,l=W(10,E-n),c[h]=o>0?(f/W(10,s-o)%W(10,o)|0)*l:0),a)for(;;)if(h==0){for(n=1,o=c[0];o>=10;o/=10)n++;for(o=c[0]+=l,l=1;o>=10;o/=10)l++;n!=l&&(e.e++,c[0]==pe&&(c[0]=1));break}else{if(c[h]+=l,c[h]!=pe)break;c[h--]=0,l=1}for(n=c.length;c[--n]===0;)c.pop()}return L&&(e.e>g.maxE?(e.d=null,e.e=NaN):e.e<g.minE&&(e.e=0,e.d=[0])),e}function Te(e,i,r){if(!e.isFinite())return Nt(e);var t,s=e.e,n=ee(e.d),o=n.length;return i?(r&&(t=r-o)>0?n=n.charAt(0)+"."+n.slice(1)+Me(t):o>1&&(n=n.charAt(0)+"."+n.slice(1)),n=n+(e.e<0?"e":"e+")+e.e):s<0?(n="0."+Me(-s-1)+n,r&&(t=r-o)>0&&(n+=Me(t))):s>=o?(n+=Me(s+1-o),r&&(t=r-s-1)>0&&(n=n+"."+Me(t))):((t=s+1)<o&&(n=n.slice(0,t)+"."+n.slice(t)),r&&(t=r-o)>0&&(s+1===o&&(n+="."),n+=Me(t))),n}function Ei(e,i){var r=e[0];for(i*=E;r>=10;r/=10)i++;return i}function qi(e,i,r){if(i>ns)throw L=!0,r&&(e.precision=r),Error(mt);return N(new e(Ti),i,1,!0)}function de(e,i,r){if(i>Tr)throw Error(mt);return N(new e(Ni),i,r,!0)}function yt(e){var i=e.length-1,r=i*E+1;if(i=e[i],i){for(;i%10==0;i/=10)r--;for(i=e[0];i>=10;i/=10)r++}return r}function Me(e){for(var i="";e--;)i+="0";return i}function bt(e,i,r,t){var s,n=new e(1),o=Math.ceil(t/E+4);for(L=!1;;){if(r%2&&(n=n.times(i),Wr(n.d,o)&&(s=!0)),r=re(r/2),r===0){r=n.d.length-1,s&&n.d[r]===0&&++n.d[r];break}i=i.times(i),Wr(i.d,o)}return L=!0,n}function Vr(e){return e.d[e.d.length-1]&1}function Tt(e,i,r){for(var t,s=new e(i[0]),n=0;++n<i.length;)if(t=new e(i[n]),t.s)s[r](t)&&(s=t);else{s=t;break}return s}function Nr(e,i){var r,t,s,n,o,l,u,a=0,f=0,c=0,h=e.constructor,g=h.rounding,M=h.precision;if(!e.d||!e.d[0]||e.e>17)return new h(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:0/0);for(i==null?(L=!1,u=M):u=i,l=new h(.03125);e.e>-2;)e=e.times(l),c+=5;for(t=Math.log(W(2,c))/Math.LN10*2+5|0,u+=t,r=n=o=new h(1),h.precision=u;;){if(n=N(n.times(e),u,1),r=r.times(++f),l=o.plus(U(n,r,u,1)),ee(l.d).slice(0,u)===ee(o.d).slice(0,u)){for(s=c;s--;)o=N(o.times(o),u,1);if(i==null)if(a<3&&ui(o.d,u-t,g,a))h.precision=u+=10,r=n=l=new h(1),f=0,a++;else return N(o,h.precision=M,g,L=!0);else return h.precision=M,o}o=l}}function Le(e,i){var r,t,s,n,o,l,u,a,f,c,h,g=1,M=10,q=e,d=q.d,m=q.constructor,S=m.rounding,O=m.precision;if(q.s<0||!d||!d[0]||!q.e&&d[0]==1&&d.length==1)return new m(d&&!d[0]?-1/0:q.s!=1?NaN:d?0:q);if(i==null?(L=!1,f=O):f=i,m.precision=f+=M,r=ee(d),t=r.charAt(0),Math.abs(n=q.e)<15e14){for(;t<7&&t!=1||t==1&&r.charAt(1)>3;)q=q.times(e),r=ee(q.d),t=r.charAt(0),g++;n=q.e,t>1?(q=new m("0."+r),n++):q=new m(t+"."+r.slice(1))}else return a=qi(m,f+2,O).times(n+""),q=Le(new m(t+"."+r.slice(1)),f-M).plus(a),m.precision=O,i==null?N(q,O,S,L=!0):q;for(c=q,u=o=q=U(q.minus(1),q.plus(1),f,1),h=N(q.times(q),f,1),s=3;;){if(o=N(o.times(h),f,1),a=u.plus(U(o,new m(s),f,1)),ee(a.d).slice(0,f)===ee(u.d).slice(0,f))if(u=u.times(2),n!==0&&(u=u.plus(qi(m,f+2,O).times(n+""))),u=U(u,new m(g),f,1),i==null)if(ui(u.d,f-M,S,l))m.precision=f+=M,a=o=q=U(c.minus(1),c.plus(1),f,1),h=N(q.times(q),f,1),s=l=1;else return N(u,m.precision=O,S,L=!0);else return m.precision=O,u;u=a,s+=2}}function Nt(e){return String(e.s*e.s/0)}function qr(e,i){var r,t,s;for((r=i.indexOf("."))>-1&&(i=i.replace(".","")),(t=i.search(/e/i))>0?(r<0&&(r=t),r+=+i.slice(t+1),i=i.substring(0,t)):r<0&&(r=i.length),t=0;i.charCodeAt(t)===48;t++);for(s=i.length;i.charCodeAt(s-1)===48;--s);if(i=i.slice(t,s),i){if(s-=t,e.e=r=r-t-1,e.d=[],t=(r+1)%E,r<0&&(t+=E),t<s){for(t&&e.d.push(+i.slice(0,t)),s-=E;t<s;)e.d.push(+i.slice(t,t+=E));i=i.slice(t),t=E-i.length}else t-=s;for(;t--;)i+="0";e.d.push(+i),L&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function ls(e,i){var r,t,s,n,o,l,u,a,f;if(i.indexOf("_")>-1){if(i=i.replace(/(\d)_(?=\d)/g,"$1"),wt.test(i))return qr(e,i)}else if(i==="Infinity"||i==="NaN")return+i||(e.s=NaN),e.e=NaN,e.d=null,e;if(rs.test(i))r=16,i=i.toLowerCase();else if(is.test(i))r=2;else if(ts.test(i))r=8;else throw Error(Oe+i);for(n=i.search(/p/i),n>0?(u=+i.slice(n+1),i=i.substring(2,n)):i=i.slice(2),n=i.indexOf("."),o=n>=0,t=e.constructor,o&&(i=i.replace(".",""),l=i.length,n=l-n,s=bt(t,new t(r),n,n*2)),a=yi(i,r,pe),f=a.length-1,n=f;a[n]===0;--n)a.pop();return n<0?new t(e.s*0):(e.e=Ei(a,f),e.d=a,L=!1,o&&(e=U(e,s,l*4)),u&&(e=e.times(Math.abs(u)<54?W(2,u):Q.pow(2,u))),L=!0,e)}function us(e,i){var r,t=i.d.length;if(t<3)return i.isZero()?i:Ye(e,2,i,i);r=1.4*Math.sqrt(t),r=r>16?16:r|0,i=i.times(1/Mi(5,r)),i=Ye(e,2,i,i);for(var s,n=new e(5),o=new e(16),l=new e(20);r--;)s=i.times(i),i=i.times(n.plus(s.times(o.times(s).minus(l))));return i}function Ye(e,i,r,t,s){var n,o,l,u,a=e.precision,f=Math.ceil(a/E);for(L=!1,u=r.times(r),l=new e(t);;){if(o=U(l.times(u),new e(i++*i++),a,1),l=s?t.plus(o):t.minus(o),t=U(o.times(u),new e(i++*i++),a,1),o=l.plus(t),o.d[f]!==void 0){for(n=f;o.d[n]===l.d[n]&&n--;);if(n==-1)break}n=l,l=t,t=o,o=n}return L=!0,o.d.length=f+1,o}function Mi(e,i){for(var r=e;--i;)r*=e;return r}function qt(e,i){var r,t=i.s<0,s=de(e,e.precision,1),n=s.times(.5);if(i=i.abs(),i.lte(n))return qe=t?4:1,i;if(r=i.divToInt(s),r.isZero())qe=t?3:2;else{if(i=i.minus(r.times(s)),i.lte(n))return qe=Vr(r)?t?2:3:t?4:1,i;qe=Vr(r)?t?1:4:t?3:2}return i.minus(s).abs()}function Lr(e,i,r,t){var s,n,o,l,u,a,f,c,h,g=e.constructor,M=r!==void 0;if(M?(oe(r,1,De),t===void 0?t=g.rounding:oe(t,0,8)):(r=g.precision,t=g.rounding),!e.isFinite())f=Nt(e);else{for(f=Te(e),o=f.indexOf("."),M?(s=2,i==16?r=r*4-3:i==8&&(r=r*3-2)):s=i,o>=0&&(f=f.replace(".",""),h=new g(1),h.e=f.length-o,h.d=yi(Te(h),10,s),h.e=h.d.length),c=yi(f,10,s),n=u=c.length;c[--u]==0;)c.pop();if(!c[0])f=M?"0p+0":"0";else{if(o<0?n--:(e=new g(e),e.d=c,e.e=n,e=U(e,h,r,t,0,s),c=e.d,n=e.e,a=pt),o=c[r],l=s/2,a=a||c[r+1]!==void 0,a=t<4?(o!==void 0||a)&&(t===0||t===(e.s<0?3:2)):o>l||o===l&&(t===4||a||t===6&&c[r-1]&1||t===(e.s<0?8:7)),c.length=r,a)for(;++c[--r]>s-1;)c[r]=0,r||(++n,c.unshift(1));for(u=c.length;!c[u-1];--u);for(o=0,f="";o<u;o++)f+=yr.charAt(c[o]);if(M){if(u>1)if(i==16||i==8){for(o=i==16?4:3,--u;u%o;u++)f+="0";for(c=yi(f,s,i),u=c.length;!c[u-1];--u);for(o=1,f="1.";o<u;o++)f+=yr.charAt(c[o])}else f=f.charAt(0)+"."+f.slice(1);f=f+(n<0?"p":"p+")+n}else if(n<0){for(;++n;)f="0"+f;f="0."+f}else if(++n>u)for(n-=u;n--;)f+="0";else n<u&&(f=f.slice(0,n)+"."+f.slice(n))}f=(i==16?"0x":i==2?"0b":i==8?"0o":"")+f}return e.s<0?"-"+f:f}function Wr(e,i){if(e.length>i)return e.length=i,!0}function as(e){return new this(e).abs()}function fs(e){return new this(e).acos()}function cs(e){return new this(e).acosh()}function hs(e,i){return new this(e).plus(i)}function ds(e){return new this(e).asin()}function ps(e){return new this(e).asinh()}function ms(e){return new this(e).atan()}function gs(e){return new this(e).atanh()}function vs(e,i){e=new this(e),i=new this(i);var r,t=this.precision,s=this.rounding,n=t+4;return!e.s||!i.s?r=new this(NaN):!e.d&&!i.d?(r=de(this,n,1).times(i.s>0?.25:.75),r.s=e.s):!i.d||e.isZero()?(r=i.s<0?de(this,t,s):new this(0),r.s=e.s):!e.d||i.isZero()?(r=de(this,n,1).times(.5),r.s=e.s):i.s<0?(this.precision=n,this.rounding=1,r=this.atan(U(e,i,n,1)),i=de(this,n,1),this.precision=t,this.rounding=s,r=e.s<0?r.minus(i):r.plus(i)):r=this.atan(U(e,i,n,1)),r}function ws(e){return new this(e).cbrt()}function ys(e){return N(e=new this(e),e.e+1,2)}function bs(e,i,r){return new this(e).clamp(i,r)}function Ts(e){if(!e||typeof e!="object")throw Error(xi+"Object expected");var i,r,t,s=e.defaults===!0,n=["precision",1,De,"rounding",0,8,"toExpNeg",-Ve,0,"toExpPos",0,Ve,"maxE",0,Ve,"minE",-Ve,0,"modulo",0,9];for(i=0;i<n.length;i+=3)if(r=n[i],s&&(this[r]=br[r]),(t=e[r])!==void 0)if(re(t)===t&&t>=n[i+1]&&t<=n[i+2])this[r]=t;else throw Error(Oe+r+": "+t);if(r="crypto",s&&(this[r]=br[r]),(t=e[r])!==void 0)if(t===!0||t===!1||t===0||t===1)if(t)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[r]=!0;else throw Error(gt);else this[r]=!1;else throw Error(Oe+r+": "+t);return this}function Ns(e){return new this(e).cos()}function qs(e){return new this(e).cosh()}function St(e){var i,r,t;function s(n){var o,l,u,a=this;if(!(a instanceof s))return new s(n);if(a.constructor=s,Jr(n)){a.s=n.s,L?!n.d||n.e>s.maxE?(a.e=NaN,a.d=null):n.e<s.minE?(a.e=0,a.d=[0]):(a.e=n.e,a.d=n.d.slice()):(a.e=n.e,a.d=n.d?n.d.slice():n.d);return}if(u=typeof n,u==="number"){if(n===0){a.s=1/n<0?-1:1,a.e=0,a.d=[0];return}if(n<0?(n=-n,a.s=-1):a.s=1,n===~~n&&n<1e7){for(o=0,l=n;l>=10;l/=10)o++;L?o>s.maxE?(a.e=NaN,a.d=null):o<s.minE?(a.e=0,a.d=[0]):(a.e=o,a.d=[n]):(a.e=o,a.d=[n]);return}else if(n*0!==0){n||(a.s=NaN),a.e=NaN,a.d=null;return}return qr(a,n.toString())}else if(u!=="string")throw Error(Oe+n);return(l=n.charCodeAt(0))===45?(n=n.slice(1),a.s=-1):(l===43&&(n=n.slice(1)),a.s=1),wt.test(n)?qr(a,n):ls(a,n)}if(s.prototype=p,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.EUCLID=9,s.config=s.set=Ts,s.clone=St,s.isDecimal=Jr,s.abs=as,s.acos=fs,s.acosh=cs,s.add=hs,s.asin=ds,s.asinh=ps,s.atan=ms,s.atanh=gs,s.atan2=vs,s.cbrt=ws,s.ceil=ys,s.clamp=bs,s.cos=Ns,s.cosh=qs,s.div=Ss,s.exp=xs,s.floor=Es,s.hypot=Ms,s.ln=Ls,s.log=Os,s.log10=ks,s.log2=Ds,s.max=Zs,s.min=Ps,s.mod=$s,s.mul=Fs,s.pow=Is,s.random=Cs,s.round=As,s.sign=Us,s.sin=_s,s.sinh=Bs,s.sqrt=Qs,s.sub=js,s.sum=Rs,s.tan=Hs,s.tanh=Gs,s.trunc=zs,e===void 0&&(e={}),e&&e.defaults!==!0)for(t=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],i=0;i<t.length;)e.hasOwnProperty(r=t[i++])||(e[r]=this[r]);return s.config(e),s}function Ss(e,i){return new this(e).div(i)}function xs(e){return new this(e).exp()}function Es(e){return N(e=new this(e),e.e+1,3)}function Ms(){var e,i,r=new this(0);for(L=!1,e=0;e<arguments.length;)if(i=new this(arguments[e++]),i.d)r.d&&(r=r.plus(i.times(i)));else{if(i.s)return L=!0,new this(1/0);r=i}return L=!0,r.sqrt()}function Jr(e){return e instanceof Q||e&&e.toStringTag===vt||!1}function Ls(e){return new this(e).ln()}function Os(e,i){return new this(e).log(i)}function Ds(e){return new this(e).log(2)}function ks(e){return new this(e).log(10)}function Zs(){return Tt(this,arguments,"lt")}function Ps(){return Tt(this,arguments,"gt")}function $s(e,i){return new this(e).mod(i)}function Fs(e,i){return new this(e).mul(i)}function Is(e,i){return new this(e).pow(i)}function Cs(e){var i,r,t,s,n=0,o=new this(1),l=[];if(e===void 0?e=this.precision:oe(e,1,De),t=Math.ceil(e/E),this.crypto)if(crypto.getRandomValues)for(i=crypto.getRandomValues(new Uint32Array(t));n<t;)s=i[n],s>=429e7?i[n]=crypto.getRandomValues(new Uint32Array(1))[0]:l[n++]=s%1e7;else if(crypto.randomBytes){for(i=crypto.randomBytes(t*=4);n<t;)s=i[n]+(i[n+1]<<8)+(i[n+2]<<16)+((i[n+3]&127)<<24),s>=214e7?crypto.randomBytes(4).copy(i,n):(l.push(s%1e7),n+=4);n=t/4}else throw Error(gt);else for(;n<t;)l[n++]=Math.random()*1e7|0;for(t=l[--n],e%=E,t&&e&&(s=W(10,E-e),l[n]=(t/s|0)*s);l[n]===0;n--)l.pop();if(n<0)r=0,l=[0];else{for(r=-1;l[0]===0;r-=E)l.shift();for(t=1,s=l[0];s>=10;s/=10)t++;t<E&&(r-=E-t)}return o.e=r,o.d=l,o}function As(e){return N(e=new this(e),e.e+1,this.rounding)}function Us(e){return e=new this(e),e.d?e.d[0]?e.s:0*e.s:e.s||NaN}function _s(e){return new this(e).sin()}function Bs(e){return new this(e).sinh()}function Qs(e){return new this(e).sqrt()}function js(e,i){return new this(e).sub(i)}function Rs(){var e=0,i=arguments,r=new this(i[e]);for(L=!1;r.s&&++e<i.length;)r=r.plus(i[e]);return L=!0,N(r,this.precision,this.rounding)}function Hs(e){return new this(e).tan()}function Gs(e){return new this(e).tanh()}function zs(e){return N(e=new this(e),e.e+1,1)}p[Symbol.for("nodejs.util.inspect.custom")]=p.toString;p[Symbol.toStringTag]="Decimal";var Q=p.constructor=St(br);Ti=new Q(Ti);Ni=new Q(Ni);function Vs(e){let i=e;return{get pattern(){return i},get lexem(){return i},match(r){return r.startsWith(i)}}}function Ws(e){let i=e,r,t;return{get pattern(){return i},get lexem(){return r},get parts(){return t},match(s){let n=new RegExp(i).exec(s);return n&&(r=n[0],n.length>1&&(t=n)),n!==null}}}function k(e){let i;return e.startsWith("@")?i=Ws("^("+e.slice(1,e.length)+")"):i=Vs(e),i}function Js(e){let i=k("@\\s+"),r=0,t,s,n=e.trim(),o;function l(){r<n.length&&i.match(n.slice(r))&&(r+=i.lexem.length)}return{get lexem(){return s},get pos(){return r},get parts(){return o},match(u){if(r>=n.length)return!1;let a=n.slice(r);return u.match(a)?(s=u.lexem,"parts"in u&&(o=u.parts),r+=s.length,l(),!0):!1},prematch(u){if(r>=n.length)return!1;let a=n.slice(r);return u.match(a)},saveTrack(){t=r},backTrack(){r=t}}}function Sr(e){return e.type===jr}function ae(e){return e.type===ci||e.type===hi}function Ge(e){return!ae(e)&&!Sr(e)}function We(e){return e.type===rr}function A(e){return e.type===Qi}function he(e){return A(e)&&e.value.isInt()}function we(e){return e.type===Hi}function ti(e){return e.type===Ki}function v(e){return e.type===Be}function Qe(e){return e.type===cr}function ie(e){return e.type===Bi}function fe(e){return e.type===_i}function T(e){return!(We(e)||A(e)||we(e)||ti(e)||v(e)||Qe(e)||ie(e)||fe(e))}function P(e){return T(e)&&e.type===ji}function K(e){return T(e)&&e.type===Ri}function C(e){return T(e)&&e.type===Gi}function je(e){return T(e)&&e.type===fr}function ge(e){return T(e)&&e.type===Fi}function ve(e){return T(e)&&e.type===Ii}function le(e){return T(e)&&e.type===Je}function si(e){return T(e)&&e.type===vi}function ni(e){return T(e)&&e.type===fi}function be(e){return T(e)&&e.type===Ai}function Re(e){return T(e)&&e.type===Ci}function me(e){return T(e)&&e.type===Ui}function Ke(e){return T(e)&&e.type===hr}function Li(e){return T(e)&&e.type===Ir}function ei(e){return T(e)&&e.type===zi}function Ie(e){return T(e)&&e.type===Wi}function Ce(e){return T(e)&&e.type===Ji}function Ae(e){return T(e)&&e.type===Xi}function Ue(e){return T(e)&&e.type===Yi}function ai(e){return T(e)&&e.type===_r}function Or(e){return T(e)&&e.type===Ur}function Oi(e){return T(e)&&e.type===Ar}function Dr(e){return T(e)&&e.type===Cr}function Di(e){return T(e)&&e.type===Fr}function pi(e){return T(e)&&e.type===tr}function mi(e){return T(e)&&e.type===sr}function ki(e){return T(e)&&e.type===nr}function Ne(e){return T(e)&&e.type===or}function Zi(e){return T(e)&&e.type===lr}function ii(e){return T(e)&&e.type===ur}function Pi(e){return T(e)&&e.type===Qr}function gi(e){return T(e)&&e.type===Br}function kr(e){return T(e)&&e.type===ar}function Zr(e){return T(e)&&e.type===er}function Pr(e){return T(e)&&e.type===ir}function $i(e){return T(e)&&e.type===Vi}function $r(e){return je(e)||Zr(e)||Or(e)||ai(e)||Dr(e)||Oi(e)||Pr(e)||pi(e)||mi(e)||ki(e)||Zi(e)||Ne(e)||ii(e)||kr(e)||gi(e)}var Fi="+",Ii="-",Je="*",fi="",vi=".",Ci=":",Ai="/",Ui="^",Be="!! Error !!",_i="?",Bi="symbol",Qi="number",Fr="percentage",ji="opposite",Ri="positive",Hi="template",xt="unit",Gi="bracket",zi="=",Vi="!=",Wi="<",Ji="<=",Xi=">",Yi=">=",Ir="relations",Ki="segment length",er="gcd",Cr="maxi",Ar="maxip",Ur="mini",_r="minip",ir="mod",rr="boolean",tr="cos",sr="sin",nr="tan",or="ln",lr="log",ur="exp",ar="floor",Br="abs",fr="sqrt",Qr="time",cr="identifiant",hr="limit",jr="normal",ci="nsum",hi="nproduct",Xs="not initialized";function X(e,i){if(A(e))return e.value;if(ie(e))throw new Error(`Le symbole ${e.symbol} doit être substitué.`);if(fe(e))throw new Error("Impossible d'évaluer une expression contenant un trou.");if(K(e)||C(e))return X(e.first);if(P(e))return X(e.first).mul(-1);if(je(e))return X(e.first).sqrt();if(ve(e))return X(e.first).sub(X(e.last));if(me(e))return X(e.first).pow(X(e.last));if(be(e)||Re(e))return X(e.first).div(X(e.last));if(ge(e))return e.children.reduce((r,t)=>r.add(X(t)),new Q(0));if(le(e)||si(e)||ni(e))return e.children.reduce((r,t)=>r.mul(X(t)),new Q(1));if(pi(e))return X(e.first).cos();if(mi(e))return X(e.first).sin();if(ki(e))return X(e.first).tan();if(Ne(e))return X(e.first).ln();if(ii(e))return X(e.first).exp();if(Zi(e))return X(e.first).log();throw new Error("Exp non recognized for decimal evaluation : "+e.string)}function Ys(e,i,r){let t=e.length-1,s=0,n,o=t+1;for(;s<o;)n=s+(o-s>>1),r(e[n],i)<0?s=n+1:o=n;return s<=t&&r(e[s],i)===0?s:~s}var Et=function(e,i){return i?Mt(i,e%i):e},Mt=function(e,i){return i?Mt(i,e%i):e};function di(e){switch(e.length){case 1:return e[0];case 2:{let i=e[0],r=e[1];if(r.isZero())return i;if(i.isZero())return r;for(r.greaterThan(i)&&([i,r]=[r,i]);!i.mod(r).isZero();)[i,r]=[r,i.mod(r)];return r}default:{let i=e.shift(),r=e.shift();return e.unshift(di([i,r])),di(e)}}}var dr=function(e){let i=e.length,r,t;for(;i!==0;)t=Math.floor(Math.random()*i),i-=1,r=e[i],e[i]=e[t],e[t]=r;return e};function Ks(e){if(e===0)return 0;if(e===1)return 1;let i=1,r=1,t=Math.floor(Math.sqrt(e));for(;r<=t;)e%(r*r)===0?(e=e/(r*r),i=i*r,t=Math.floor(Math.sqrt(e)),r=2):r++;return i}function en(e){if(e<1)throw new RangeError("Argument error");if(e==1)return[1];let i=[];for(;e>1;){let r=rn(e);i.push(r),e/=r}return i}function rn(e){if(e<2)throw new RangeError("Argument error");if(e%2===0)return 2;let i=Math.floor(Math.sqrt(e));for(let r=3;r<=i;r+=2)if(e%r===0)return r;return e}function tn(e){let i=[],r=e[0],t=1;for(let s=1;s<e.length;s++)e[s]===r?t++:(i.push([r,t]),r=e[s],t=1);return i.push([r,t]),i}function Xr(e){return tn(en(e))}function sn(e,i){return di([e,i])}var nn={s:1,d:new Q(1),n:new Q(1),add(e){let i=this.n.mul(e.d).mul(this.s).add(this.d.mul(e.s).mul(e.n)),r=this.d.mul(e.d),t=i.s;return i=i.abs(),$e({n:i,d:r,s:t}).reduce()},sub(e){let i=this.n.mul(e.d).mul(this.s),r=this.d.mul(e.s).mul(e.n),t=i.sub(r),s=this.d.mul(e.d),n=t.s;return n!==-1&&n!==1&&console.log("sub",n,this,e,i,r,t),t=t.abs(),$e({n:t,d:s,s:n}).reduce()},mult(e){let i=this.n.mul(e.n),r=this.d.mul(e.d),t=e.s*this.s;return $e({n:i,d:r,s:t}).reduce()},div(e){let i=this.n.mul(e.d),r=this.d.mul(e.n),t=e.s*this.s;return $e({n:i,d:r,s:t})},reduce(){let e=sn(this.n,this.d);return $e({n:this.n.div(e),d:this.d.div(e),s:this.s})},isLowerThan(e){let i=this.sub(e);return i.n.equals(0)?!1:(i.s!==-1&&i.s!==1&&console.log("!!!! erreur s!!!",this,e,i),i.s===-1)},isGreaterThan(e){return this.sub(e).n.equals(0)?!1:(this.sub(e).s!==-1&&this.sub(e).s!==1&&console.log("!!!! erreur s!!!",this.sub(e).s),this.sub(e).s===1)},toString(){let e=this.s<0?"-":"";return e+=this.d.equals(1)?this.n.toString():this.n.toString()+"/"+this.d.toString(),e}};function $e({n:e,d:i,s:r}){return e.isNegative()&&console.log("!!!negative !!!"),Object.assign(Object.create(nn),{n:e,d:i,s:r})}function on(e,i){let r=new Q(e),t=new Q(i),s=r.s*t.s;for(r=r.abs(),t=t.abs();!r.isInteger();)r=r.mul(10),t=t.mul(10);for(;!t.isInteger();)r=r.mul(10),t=t.mul(10);return{n:r,d:t,s}}function Lt(e){if(typeof e=="number"||Q.isDecimal(e)){let i=new Q(e).toFraction(),r=i[0],t=i[1],s=r.s;return r=r.abs(),$e({n:r,d:t,s}).reduce()}else if(typeof e=="string"){e=e.replace(/ /g,"");let i=new RegExp("^([\\(\\{]?(-?\\d+)(\\.\\d+)?[\\)\\}]?)(\\/[\\(\\{]?(-?\\d+)[\\]\\}]?)?$").exec(e);if(i){let{n:r,d:t,s}=on(parseFloat(i[1]),i[5]?parseFloat(i[5]):1);return $e({n:r,d:t,s})}else throw new Error("fraction not recognized")}else return Lt(e.toString({displayUnit:!1}))}var Xe=Lt;function ln(e){return C(e)||$r(e)||ie(e)||me(e)&&e.first.isSymbol()}function un(e,i){let r="";if(Ke(e))e.first.isSymbol(),r=e.first.string+(e.sign==="+"?"plus":"moins");else if(Li(e))r=e.first.toString(i),e.ops.forEach((t,s)=>{r+=t,r+=e.children[s+1].toString(i)});else if(Pi(e))r="",e.children[0]&&!e.children[0].isZero()&&(r+=e.children[0],r+=" "),e.children[1]&&!e.children[1].isZero()&&(r+=e.children[1],r+=" "),e.children[2]&&!e.children[2].isZero()&&(r+=e.children[2],r+=" "),e.children[3]&&!e.children[3].isZero()&&(r+=e.children[3],r+=" "),e.children[4]&&!e.children[4].isZero()&&(r+=e.children[4],r+=" "),e.children[5]&&!e.children[5].isZero()&&(r+=e.children[5],r+=" "),e.children[6]&&!e.children[6].isZero()&&(r+=e.children[6],r+=" "),e.children[7]&&!e.children[7].isZero()&&(r+=e.children[7],r+=" "),r=r.trim();else if(ti(e))r=e.begin+e.end;else if(ei(e)||$i(e)||Ie(e)||Ce(e)||Ae(e)||Ue(e))r=e.first.toString(i)+e.type+e.last.toString(i);else if(Di(e))r=e.first.toString(i)+"%";else if(K(e))r="+"+e.first.toString(i);else if(P(e)){let t=i.addBrackets&&(e.first.isOpposite()||e.first.isPositive());r="-",t&&(r+="("),r+=e.first.toString(i),t&&(r+=")")}else if(je(e)||pi(e)||mi(e)||ki(e)||Ne(e)||Zi(e)||ii(e)||kr(e)||gi(e))r=e.type+"("+e.first.toString(i)+")";else if(C(e))r="("+e.first.toString(i)+")";else if(ve(e))r=e.first.toString(i)+"-"+e.last.toString(i);else if(me(e))r=e.last.toString(i),e.last.isSymbol()||e.last.isNumber()||e.last.isHole()||e.last.isBracket()||(r="{"+r+"}"),r=e.first.toString(i)+"^"+r;else if(Re(e))r=e.first.toString(i)+":"+e.last.toString(i);else if(be(e)){let t=e.first.toString(i),s=e.last.toString(i);(e.first.isOpposite()||e.first.isSum()||e.first.isDifference())&&(t="{"+t+"}"),(e.last.isOpposite()||e.last.isSum()||e.last.isDifference()||e.last.isProduct()||e.last.isDivision()||e.last.isQuotient())&&(s="{"+s+"}"),r=t+"/"+s}else if(ge(e))r=e.children.map(t=>t.toString(i)).join(e.type);else if(le(e))r=e.first.toString(i)+(i.isUnit?".":i.implicit&&ln(e.last)?"":e.type)+e.last.toString(i);else if(ni(e))r=e.children.map(t=>t.isQuotient()?"{"+t.toString(i)+"}":t.toString(i)).join("");else if(si(e))r=e.children.map(t=>t.toString(i)).join(e.type);else if(Qe(e))r=e.name;else if(ie(e))r=e.symbol;else if(A(e))r=e.input,i.comma&&(r=r.replace(".",","));else if(fe(e))r="?";else if(v(e))r=e.input||"";else if(Zr(e))r="pgcd("+e.first.toString(i)+";"+e.last.toString(i)+")";else if(Pr(e))r="mod("+e.first.toString(i)+";"+e.last.toString(i)+")";else if(We(e))r=e.boolvalue.toString();else if(we(e))switch(r=e.nature,e.relative&&(r+="r"),e.signed&&(r+="s"),e.nature){case"$e":case"$ep":case"$ei":e.children[0].isHole()&&e.children[1].isHole()?r+=`[${e.children[2].toString(i)};${e.children[3].toString(i)}]`:r+=`{${e.children[0].isHole()?"":e.children[0].toString(i)+";"}${e.children[1].toString(i)}}`,e.exclude&&(r+="\\{"+e.exclude.map(t=>t.toString(i)).join(";")+"}"),e.excludeMin&&(r+="\\["+e.excludeMin+";"+e.excludeMax+"]");break;case"$d":case"$dr":case"$dn":break;case"$l":r+="{"+e.children.map(t=>t.toString(i)).join(";")+"}",e.exclude&&(r+="\\{"+e.exclude.map(t=>t.toString(i)).join(";")+"}"),e.excludeMin&&(r+="\\["+e.excludeMin+";"+e.excludeMax+"]");break;case"$":r+="{"+e.first.toString(i)+"}"}else(Or(e)||ai(e)||Dr(e)||Oi(e))&&(r=e.type+"("+e.first.string+";"+e.last.string+")");return e.unit&&i.displayUnit&&(e.isSymbol()||e.isNumber()||e.isBracket()||e.isHole()||e.isTemplate()||(r="{"+r+"}"),r+=" "+e.unit.string),r}function an(e,i){let r;if(Ke(e)&&(e.first.isSymbol()?r=e.sign+"\\infin":r=e.first.string+"^"+e.sign),gi(e))r="\\left\\lvert "+e.first.toLatex(i)+" \\right\\rvert";else if(Pi(e))r="",e.children[0]&&!e.children[0].isZero()&&(r+=e.children[0].toLatex(i),r+="\\,"),e.children[1]&&!e.children[1].isZero()&&(r+=e.children[1].toLatex(i),r+="\\,"),e.children[2]&&!e.children[2].isZero()&&(r+=e.children[2].toLatex(i),r+="\\,"),e.children[3]&&!e.children[3].isZero()&&(r+=e.children[3].toLatex(i),r+="\\,"),e.children[4]&&!e.children[4].isZero()&&(r+=e.children[4].toLatex(i),r+="\\,"),e.children[5]&&!e.children[5].isZero()&&(e.children[5].value.lessThan(10)?r+="0"+e.children[5].toLatex(i):r+=e.children[5].toLatex(i),r+="\\,"),e.children[6]&&!e.children[6].isZero()&&(r+=e.children[6].toLatex(i),r+="\\,"),e.children[7]&&!e.children[7].isZero()&&(r+=e.children[7].toLatex(i),r+="\\,");else if(ti(e))r=e.begin+e.end;else if(Li(e))r=e.first.toLatex(i),e.ops.forEach((t,s)=>{r+=t,r+=e.children[s+1].toLatex(i)});else if(ei(e)||$i(e)||Ie(e)||Ce(e)||Ae(e)||Ue(e))r=e.first.toLatex(i)+e.type+e.last.toLatex(i);else if(Di(e))r=e.first.toLatex(i)+"\\%";else if(je(e))r="\\sqrt{"+e.first.toLatex(i)+"}";else if(C(e))r="\\left(",r+=e.first.toLatex(i),r+="\\right)";else if(K(e)){let t=i.addBrackets&&(e.first.isOpposite()||e.first.isPositive());r="+",t&&(r+="\\left("),r+=e.first.toLatex(i),t&&(r+="\\right)")}else if(P(e)){let t=i.addBrackets&&(e.first.isSum()||e.first.isDifference()||e.first.isOpposite()||e.first.isPositive());r="-",t&&(r+="\\left("),r+=e.first.toLatex(i),t&&(r+="\\right)")}else if(ve(e)){let t=i.addBrackets&&(e.last.isSum()||e.last.isDifference()||e.last.isOpposite()||e.last.isPositive());r=e.first.toLatex(i)+"-",t&&(r+="\\left("),r+=e.last.toLatex(i),t&&(r+="\\right)")}else if(ge(e)){let t=i.addBrackets&&(e.last.isOpposite()||e.last.isPositive());r=e.first.toLatex(i)+"+",t&&(r+="\\left("),r+=e.last.toLatex(i),t&&(r+="\\right)")}else if(me(e))r=e.first.toLatex(i)+"^{"+e.last.toLatex(i)+"}";else if(Re(e))r=e.first.toLatex(i)+"\\div"+e.last.toLatex(i);else if(be(e))r="\\dfrac{"+(C(e.first)?e.first.first.toLatex(i):e.first.toLatex(i))+"}{"+(C(e.last)?e.last.first.toLatex(i):e.last.toLatex(i))+"}";else if(le(e)){let t=e.first,s=e.last;C(t)&&t.first.isQuotient()&&(t=t.first),C(s)&&s.first.isQuotient()&&(s=s.first),r=t.toLatex(i)+(i.implicit?"":"\\times ")+s.toLatex(i)}else if(ni(e))r=e.children.map(t=>t.toLatex(i)).join("");else if(si(e))r=e.children.map(t=>t.toLatex(i)).join(" \\cdot ");else if(Qe(e))r=e.name;else if(ie(e))e.symbol==="pi"?r="\\pi":r=e.symbol;else if(A(e))r=e.toString({displayUnit:!1}),i.addSpaces&&(r=Ot(r)),r=r.replace(/ /g,"\\,").replace(".","{,}");else if(fe(e))r="\\ldots";else if(v(e))switch(e.input){case"<":r="\\lt";break;case">":r="\\gt";break;default:r=e.input||""}else r=e.string;return e.unit&&(r+="\\,"+e.unit.string),r}function fn(e,i){let r="";return gi(e)?r="<around*|\\||"+e.first.toLatex(i)+"|\\|>":Pi(e)?(r="",e.children[0]&&!e.children[0].isZero()&&(r+=e.children[0].toTexmacs(i),r+="<space|0.17em>"),e.children[1]&&!e.children[1].isZero()&&(r+=e.children[1].toTexmacs(i),r+="<space|0.17em>"),e.children[2]&&!e.children[2].isZero()&&(r+=e.children[2].toTexmacs(i),r+="<space|0.17em>"),e.children[3]&&!e.children[3].isZero()&&(r+=e.children[3].toTexmacs(i),r+="<space|0.17em>"),e.children[4]&&!e.children[4].isZero()&&(r+=e.children[4].toTexmacs(i),r+="<space|0.17em>"),e.children[5]&&!e.children[5].isZero()&&(e.children[5].value.lessThan(10)?r+="0"+e.children[5].toTexmacs(i):r+=e.children[5].toTexmacs(i),r+="<space|0.17em>"),e.children[6]&&!e.children[6].isZero()&&(r+=e.children[6].toTexmacs(i),r+="<space|0.17em>"),e.children[7]&&!e.children[7].isZero()&&(r+=e.children[7].toTexmacs(i),r+="<space|0.17em>")):ti(e)?r=e.begin+e.end:ei(e)?r=e.first.toTexmacs(i)+"="+e.last.toTexmacs(i):$i(e)?r=e.first.toTexmacs(i)+"\\<neq\\>"+e.last.toTexmacs(i):Ie(e)?r=e.first.toTexmacs(i)+"\\<less\\>"+e.last.toTexmacs(i):Ce(e)?r=e.first.toTexmacs(i)+"\\<leqslant\\>"+e.last.toTexmacs(i):Ae(e)?r=e.first.toTexmacs(i)+"\\<gtr\\>"+e.last.toTexmacs(i):Ue(e)?r=e.first.toTexmacs(i)+"\\<geqslant\\>"+e.last.toTexmacs(i):Di(e)?r=e.first.toTexmacs(i)+"%":je(e)?r="<sqrt|"+e.first.toTexmacs(i)+">":C(e)?r="<around*|(|"+e.first.toTexmacs(i)+"|)>":K(e)?r+="+"+e.first.toTexmacs(i):P(e)?r="-"+e.first.toTexmacs(i):ve(e)?r=e.first.toTexmacs(i)+"-"+e.last.toTexmacs(i):ge(e)?r=e.first.toTexmacs(i)+"+"+e.last.toTexmacs(i):me(e)?r=e.first.toTexmacs(i)+"<rsup|"+e.last.toTexmacs(i)+">":Re(e)?r=e.first.toTexmacs(i)+"\\<div\\>"+e.last.toTexmacs(i):be(e)?r="<dfrac|"+e.first.toTexmacs(i)+"|"+e.last.toTexmacs(i)+">":le(e)?r=e.first.toTexmacs(i)+"\\<times\\>"+e.last.toTexmacs(i):ni(e)?r=e.first.toTexmacs(i)+"*"+e.last.toTexmacs(i):si(e)?r=e.first.toTexmacs(i)+"\\<cdot\\>"+e.last.toTexmacs(i):Qe(e)?r=e.name:ie(e)?e.symbol==="pi"?r="\\<pi\\>":r=e.symbol:A(e)?(r=e.toString({displayUnit:!1}),i.addSpaces&&(r=Ot(r)),r=r.replace(/ /g,"<space|0.17em>").replace(".",",")):fe(e)?r="......":v(e)?r="error":r=e.string,e.unit&&(r+="<space|0.17em>"+e.unit.string),r}function Ot(e){let[i,r]=e.replace(/ /g,"").split(".");return i=i.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1 "),r&&(r=r.replace(/\d{3}(?=\d)/g,"$& ")),r?i+"."+r:i}function Rr(e,i){let r,t=[Qi,Bi,cr,_i,rr,Hi,Ri,ji,Fr,Ki,Gi,tr,sr,nr,or,lr,ur,fr,ar,er,ir,Fi,Ii,Je,fi,vi,Ci,Ai,Ui,xt,zi,Vi,Wi,Ji,Xi,Yi,Be,ci,hi,hr];if(!(t.includes(e.type)&&t.includes(i.type)))throw new Error(`type ${e.type} forgotten`);if(ae(e)&&ae(i)){let s=e[Symbol.iterator](),n=i[Symbol.iterator](),o=s.next(),l=n.next();for(;!o.done&&!l.done;){let u=o.value,a=l.value,f=u[1],c=a[1];if(ae(f)&&ae(c))r=f.compareTo(c);else if(Ge(f)&&Ge(c))r=f.compareTo(c);else throw new Error("impossible to compare bases.");if(r!==0)return r;let h=u[0],g=a[0];if(ae(h)&&ae(g)){if(r=h.compareTo(g),r!==0)return r}else if(Ge(h)&&Ge(g)){if(h.isLowerThan(g))return-1;if(h.isGreaterThan(g))return 1}else throw new Error("unable to compare coefs.");o=s.next(),l=n.next()}return o.done&&l.done?0:o.done?-1:1}else{if(Sr(e)&&Sr(i))return r=e.n.mult(i.d).compareTo(i.n.mult(e.d)),r===0&&(e.unit&&i.unit?r=e.unit.compareTo(i.unit):e.unit?r=1:i.unit&&(r=-1)),r;if(Ge(e)&&Ge(i))if(e.type===i.type){if(A(e))return e.value.lt(i.value)?-1:e.value.gt(i.value)?1:0;if(ie(e)||Qe(e))return e.string<i.string?-1:e.string>i.string?1:0;if(fe(e)||we(e))return 0;if(T(e)&&!Ke(e)){for(let s=0;s<e.children.length;s++){let n=e.children[s].compareTo(i.children[s]);if(n)return n}return 0}else{if(v(e))return e.message<i.message?-1:e.message>i.message?1:0;if(Ke(e))return e.first.isSymbol()&&i.first.isSymbol()?e.sign<i.sign?-1:e.sign>i.sign?1:0:e.first.isSymbol()?1:i.first.isSymbol()?-1:e.first.equals(i.first)?e.sign<i.sign?-1:e.sign>i.sign?1:0:e.first.compareTo(i.first);throw new Error(`type ${e.type} forgotten in the compare list`)}}else return t.indexOf(e.type)<t.indexOf(i.type)?-1:1;else throw new Error(`incompatible types to compare ${e} ${i}`)}}var pr={pi:"3.14",e:"2.7"};function cn(e,i,r="x"){let t=()=>"("+i.string+")";return y(e.string.replace(new RegExp(`(${r})(?!p)(?<!e)`,"g"),t)).removeUnecessaryBrackets()}function hn(e,i="x"){let r=e;if($r(e)&&e.first.string!==i){let t=e.first,s=e.copy([_e(i)]).derivate(i);r=t.derivate(i).mult(s.compose(t,i))}else if(A(e))r=w(0);else if(ge(e))r=e.first.derivate(i).bracket().add(e.last.derivate(i).bracket());else if(ve(e))r=e.first.derivate(i).bracket().sub(e.last.derivate(i).bracket());else if(P(e))r=e.first.derivate(i).oppose();else if(le(e)||ni(e)||si(e))r=e.first.derivate(i).mult(e.last).add(e.first.mult(e.last.derivate(i)));else if(Re(e)||be(e))r=e.first.derivate(i).mult(e.last).sub(e.first.mult(e.last.derivate(i))).frac(e.last.pow(w(2)));else if(ie(e))r=e.string===i?w(1):w(0);else if(ii(e))r=e.first.derivate(i).mult(e);else if(Ne(e))r=e.first.derivate(i).mult(e.first.inverse());else if(pi(e))r=e.first.derivate(i).mult(e.first.sin().oppose());else if(mi(e))r=e.first.derivate(i).mult(e.first.cos());else if(me(e)){let t=e.first,s=e.last,n=t.derivate(i);r=s.derivate(i).mult(t.ln()).add(s.mult(n.frac(t))).mult(t.pow(s))}else je(e)&&(r=e.first.derivate(i).frac(w(2).mult(e.first.radical())));return r.normal.node}function dn(e){let i=T(e)?e.copy(e.children.map(r=>r.reduceFractions())):e;return i.isNumeric()&&be(i)&&(A(i.first)||P(i.first)&&A(i.first.first)||C(i.first)&&(A(i.first.first)||P(i.first.first)&&A(i.first.first.first)))&&(A(i.last)||P(i.last)&&A(i.last.first)||C(i.last)&&(A(i.last.first)||P(i.last.first)&&A(i.last.first.first)))&&(i=i.reduce()),i=y(i.string),i.unit=e.unit,i}function pn(e){let i=T(e)?e.copy(e.children.map(r=>r.removeZerosAndSpaces())):y(e.string);return A(e)&&(i=i.eval({decimal:!0})),i.unit=e.unit,i}function mn(e){let i=T(e)?e.copy(e.children.map(r=>r.removeMultOperator())):y(e.string);return le(e)&&($r(e.last)||C(e.last)||ie(e.last)||me(e.last)&&ie(e.last.first))&&(i=Gr([e.first,e.last])),i.unit=e.unit,i}function gn(e){let i;if(ge(e)){let r=e.first.removeNullTerms(),t=e.last.removeNullTerms();r.equalsZero()&&t.equalsZero()?i=w(0):r.equalsZero()?i=y(t.string):t.equalsZero()?i=y(r.string):i=r.add(t)}else if(ve(e)){let r=e.first.removeNullTerms(),t=e.last.removeNullTerms();r.equalsZero()&&t.equalsZero()?i=w(0):r.equalsZero()?i=y(t.string).oppose():t.equalsZero()?i=y(r.string):i=r.sub(t)}else T(e)?i=e.copy(e.children.map(r=>r.removeNullTerms())):i=y(e.string);return i.unit=e.unit,i}function vn(e){let i;if(le(e)){let r=e.first.removeFactorsOne(),t=e.last.removeFactorsOne();r.isOne()&&t.isOne()?i=w(1):r.isOne()?(i=t,C(i)&&(i=i.first)):t.isOne()?(i=r,C(i)&&(i=i.first)):i=e.copy([r,t])}else T(e)?i=e.copy(e.children.map(r=>r.removeFactorsOne())):i=y(e.string);return e.unit&&!i.unit&&(i.unit=e.unit),i}function wn(e){let i=T(e)?e.copy(e.children.map(r=>r.simplifyNullProducts())):y(e.string);return le(e)&&i.factors.some(r=>r.isZero())&&(i=w(0)),i.unit=e.unit,i}function yn(e,i=!1){let r;return C(e)&&(!e.parent||e.parent.isFunction()||e.parent.isBracket()||e.first.isFunction()||e.first.isHole()||e.first.isNumber()||e.first.isSymbol()||e.parent.isSum()&&e.first.isSum()||e.parent.isSum()&&e.first.isDifference()||e.parent.isSum()&&e.first.isProduct()||e.parent.isSum()&&e.first.isQuotient()||e.parent.isSum()&&e.first.isDivision()||e.parent.isSum()&&e.first.isPower()||e.parent.isOpposite()&&e.first.isProduct()||e.parent.isOpposite()&&e.first.isQuotient()||e.parent.isOpposite()&&e.first.isDivision()||e.parent.isDifference()&&e.first.isSum()&&e.isFirst()||e.parent.isDifference()&&e.first.isDifference()&&e.isFirst()||e.parent.isDifference()&&e.first.isProduct()||e.parent.isDifference()&&e.first.isQuotient()||e.parent.isDifference()&&e.first.isDivision()||e.parent.isDifference()&&e.first.isPower()||e.parent.isProduct()&&e.first.isProduct()||e.parent.isProduct()&&e.first.isQuotient()&&e.isFirst()||e.parent.isProduct()&&e.first.isDivision()||e.parent.isProduct()&&e.first.isPower()||e.parent.isQuotient()&&e.first.isProduct()&&e.isFirst()||e.parent.isQuotient()&&e.first.isQuotient()&&e.isFirst()||e.parent.isQuotient()&&e.first.isDivision()&&e.isFirst()||e.parent.isQuotient()&&e.first.isPower()||e.parent.isDivision()&&e.first.isProduct()&&e.isFirst()||e.parent.isDivision()&&e.first.isQuotient()&&e.isFirst()||e.parent.isDivision()&&e.first.isDivision()&&e.isFirst()||e.parent.isDivision()&&e.first.isPower()||e.parent.isPower()&&e.first.isPower()&&e.isFirst()||e.parent.isPower()&&e.isLast()||!i&&e.parent.isSum()&&e.first.isOpposite()&&e.isFirst()||!i&&e.parent.isSum()&&e.first.isPositive()&&e.isFirst()||!i&&e.parent.isDifference()&&e.first.isOpposite()&&e.isFirst()||!i&&e.parent.isDifference()&&e.first.isPositive()&&e.isFirst()||e.parent.isEquality()||e.parent.isUnequality()||e.parent.isInequality()||e.parent.isProduct()&&e.first.isQuotient()&&e.isLast()||e.parent.isQuotient()&&e.first.isProduct()&&e.isLast()||e.parent.isQuotient()&&e.first.isQuotient()&&e.isLast()||e.parent.isQuotient()&&e.first.isDivision()&&e.isLast()||e.parent.isQuotient()&&e.first.isOpposite()||e.parent.isQuotient()&&e.first.isSum()||e.parent.isQuotient()&&e.first.isDifference())?r=e.first.removeUnecessaryBrackets(i):T(e)?r=e.copy(e.children.map(t=>t.removeUnecessaryBrackets(i))):r=y(e.string),r.unit=e.unit,r}function bn(e){let i=e.terms;dr(i);let r=i.pop(),t=r.op==="+"?r.term:r.term.oppose();return i.forEach(s=>{t=s.op==="+"?t.add(s.term):t.sub(s.term)}),t.unit=e.unit,t}function Tn(e){let i=T(e)?e.copy(e.children.map(s=>s.shuffleTerms())):y(e.string),r=i.terms;dr(r);let t=r.pop();return i=t.op==="+"?t.term:t.term.oppose(),r.forEach(s=>{i=s.op==="+"?i.add(s.term):i.sub(s.term)}),i.unit=e.unit,i}function Nn(e){let i=e.factors;dr(i);let r=i.pop();return i.forEach(t=>r=r.mult(t)),r.unit=e.unit,r}function qn(e){let i=T(e)?e.copy(e.children.map(t=>t.shuffleFactors())):y(e.string),r=e.factors;return dr(r),i=r.pop(),r.forEach(t=>i=i.mult(t)),i.unit=e.unit,i}function Sn(e){let i=T(e)?e.copy(e.children.map(r=>r.shuffleTermsAndFactors())):y(e.string);return i.isProduct()?i=i.shallowShuffleFactors():(i.isSum()||i.isDifference())&&(i=i.shallowShuffleTerms()),i.unit=e.unit,i}function xn(e){let i=e;if(e.isSum()||e.isDifference()){let r=e.terms,t=r.filter(o=>o.op==="+").map(o=>o.term).sort((o,l)=>o.compareTo(l)),s=t.length,n=r.filter(o=>o.op==="-").map(o=>o.term).sort((o,l)=>o.compareTo(l));t.length&&(i=t.shift(),t.forEach(o=>i=i.add(o))),n.length&&(s||(i=n.shift().oppose()),n.forEach(o=>i=i.sub(o))),i.unit=e.unit}return i}function En(e){let i=T(e)?e.copy(e.children.map(r=>r.sortTerms())):y(e.string);return(e.isSum()||e.isDifference())&&(i=i.shallowSortTerms()),i.unit=e.unit,i}function Mn(e){let i;if(e.isProduct()){let r=e.factors;r.sort((t,s)=>t.compareTo(s)),i=r.shift(),r.forEach(t=>i=i.mult(t)),i.unit=e.unit}else i=e;return i}function Ln(e){let i=T(e)?e.copy(e.children.map(r=>r.sortFactors())):y(e.string);return e.isProduct()&&(i=i.shallowSortFactors()),i.unit=e.unit,i}function On(e){let i=T(e)?e.copy(e.children.map(r=>r.sortTermsAndFactors())):y(e.string);return e.isSum()||e.isDifference()?i=i.shallowSortTerms():e.isProduct()&&(i=i.shallowSortFactors()),i.unit=e.unit,i}function Dn(e){let i=e.parent,r=T(e)?e.copy(e.children.map(t=>t.removeSigns())):y(e.string);if(le(r)||Re(r)||be(r)){let t,s,n=!1;C(r.first)&&P(r.first.first)?(t=r.first.first.first,n=!n):C(r.first)&&K(r.first.first)?t=r.first.first.first:be(r)&&P(r.first)?(t=r.first.first,n=!n):t=r.first,C(r.last)&&P(r.last.first)?(s=r.last.first.first,n=!n,s.isNumber()||s.isSymbol()||(s=s.bracket())):C(r.last)&&K(r.last.first)?s=r.last.first.first:be(r)&&P(r.last)?(s=r.last.first,n=!n):s=r.last,r.isProduct()?r=r.copy([t,s]):r.isDivision()?r=t.div(s):r=t.frac(s),n&&(r=r.oppose()),n&&i&&!(i.isBracket()||i.isQuotient()||i.isPower()&&r.isLast())&&(r=r.bracket())}else ge(r)&&C(r.last)&&P(r.last.first)?r=r.first.sub(r.last.first.first):ge(r)&&C(r.last)&&K(r.last.first)||ve(r)&&C(r.last)&&P(r.last.first)?r=r.first.add(r.last.first.first):ve(r)&&C(r.last)&&K(r.last.first)?r=r.first.sub(r.last.first.first):K(r)&&C(r.first)&&P(r.first.first)?r=r.first.first:K(r)&&C(r.first)&&K(r.first.first)?r=r.first.first.first:P(r)&&C(r.first)&&P(r.first.first)?r=r.first.first.first.positive():P(r)&&C(r.first)&&K(r.first.first)?r=r.first.first.first.oppose():C(r)&&K(r.first)&&(i&&(i.isQuotient()||i.isDivision())&&e.isLast()&&(r.first.first.isQuotient()||r.first.first.isDivision())?r=r.first.first.bracket():r=r.first.first);return(!i||!i.isBracket())&&K(r)&&(r=r.first),r=y(r.string),r.unit=e.unit,r.parent=i,r}function xr(e,i){let r=e;if(!i)return r;if(ie(e)){if(!pr[e.symbol]&&!i[e.symbol])return r;pr[e.symbol]?r=y(pr[e.symbol]):(r=y(i[e.symbol]),r=xr(r,i))}else T(e)?r=e.copy(e.children.map(t=>xr(t,i))):r=y(e.string);return r.unit=e.unit,r}function kn(e,i){return e=Math.ceil(e),i=Math.floor(i),Math.floor(Math.random()*(i-e))+e}function Ze(e,i){return e=Math.ceil(e),i=Math.floor(i),Math.floor(Math.random()*(i-e+1))+e}function mr(e,i,r=!0){function t(){return kn(e===0?0:Math.pow(10,e-1),i===0?0:Math.pow(10,Ze(e,i)))}let s=t();if(!r&&i!==0)for(;s%10===0;)s=t();return s}function Yr(e,i,r){return r.value.gte(e.value)&&i.value.lte(e.value)}function ze(e){let i=e.nature==="$$",r=e.precision,t,s,n,o,l,u;switch(e.nature){case"$e":case"$ep":case"$ei":{let a=!1,f=e.children.map(m=>we(m)?ze(m):Fe(Object.assign(m.substitute(),{parent:e})).eval({decimal:i,precision:r})),c=e.excludeMin,h=e.excludeMax,g=e.excludeDivider,M=e.excludeMultiple,q=e.exclude?e.exclude.map(m=>we(m)?ze(m):Fe(Object.assign(m.substitute(),{parent:e})).eval({decimal:i,precision:r})):null,d=e.excludeCommonDividersWith?e.excludeCommonDividersWith.map(m=>we(m)?ze(m):Fe(Object.assign(m.substitute(),{parent:e})).eval({decimal:i,precision:r})):null;do a=!1,f[1].isHole()?(t=w(Ze(P(f[2])?f[2].first.value.toNumber()*-1:f[2].value.toNumber(),P(f[3])?f[3].first.value.toNumber()*-1:f[3].value.toNumber())),e.relative&&!t.isZero()&&(Ze(0,1)?t=t.oppose():e.signed&&(t=t.positive())),a=!!q&&q.map(m=>m.string).includes(t.string)||!!c&&Yr(t,c,h)):(t=w(mr(fe(f[0])?1:f[0].value.toNumber(),f[1].value.toNumber())),e.relative&&!t.isZero()&&(Ze(0,1)?t=t.oppose():e.signed&&(t=t.positive())),a=!!q&&q.map(m=>m.string).includes(t.string)),M&&(a=a||M.some(m=>t.value.mod(m.eval().value).equals(0))),g&&(a=a||g.some(m=>m.eval().value.mod(t.value).equals(0))),d&&(a=a||d.some(m=>{let S=m.generate().eval(),O=P(S)?S.first.value.toNumber():S.value.toNumber(),F=t.generate().eval(),x=P(F)?F.first.value.toNumber():F.value.toNumber();return Et(O,x)!==1}));while(a);e.root.generated.push(t);break}case"$d":{let a=e.children.map(f=>we(f)?ze(f):Fe(Object.assign(f.substitute(),{parent:e})).eval({decimal:i,precision:r}));if(a[0])o=a[0].generate().value.toNumber(),n=a[1].generate().value.toNumber(),s=new Q(mr(o,o)),s=s.add(new Q(mr(n,n,!1)).div(Math.pow(10,n)));else{let f=a[2].generate().value.toNumber(),c=a[3].generate().value.toNumber(),h=a[4].generate().value.toNumber(),g=a[5].generate().value.toNumber();o=Ze(f,c),n=Ze(h,g),s=new Q(o).div(Math.pow(10,n))}t=w(s),e.relative&&Ze(0,1)&&(t=t.oppose()),e.root.generated.push(t);break}case"$l":{u=e.children;let a=!1;if(e.exclude){let f=e.exclude.map(c=>c.eval().string);u=u.filter(c=>!f.includes(c.string))}do a=!1,t=u[Math.floor(Math.random()*u.length)],a=!!e.excludeMin&&Yr(t,e.excludeMin,e.excludeMax),e.excludeMultiple&&(a=a||e.excludeMultiple&&e.excludeMultiple.some(f=>t.value.mod(f.eval().value).isZero())),e.excludeDivider&&(a=a||e.excludeDivider&&e.excludeDivider.some(f=>f.eval().value.mod(t.value).isZero()));while(a);t=t.generate(),e.root.generated.push(t);break}case"$":case"$$":{t=e.children.map(a=>we(a)?ze(a):Fe(Object.assign(a.substitute(),{parent:e})).eval({decimal:i,precision:r}))[0],e.root.generated.push(t);break}default:l=parseInt(e.nature.slice(1,e.nature.length),10),t=e.root.generated[l-1]}return e.unit&&(t.unit=e.unit),t}function Fe(e){let i=e;return we(e)?i=ze(e):ie(e)||fe(e)||A(e)||v(e)||ti(e)?i=e:T(e)&&(i=e.copy(e.children.map(r=>Fe(r)))),i}var Zn={mult(e){return G(this.u.mult(e.u,vi),this.normal().mult(e.normal()))},div(e){return G(this.u.div(e.u),this.normal().div(e.normal()))},pow(e){return G(this.u.pow(e),this.normal().pow(e.normal))},toString(){return this.u.toString({isUnit:!0})},get string(){return this.toString()},isVolume(){return this.isMetricalVolume()||this.isCapacity()},isMetricalVolume(){return this.isConvertibleTo(G("m").mult(G("m")).mult(G("m")))},isCapacity(){return this.isConvertibleTo(G("L"))},isConvertibleTo(e){return this.normal().isConvertibleTo(e.normal())},getCoefTo(e){return this.normal().getCoefTo(e.normal()).node},equalsTo(e){return this.normal().equalsTo(e.normal())},type:xt,normal(){return this._normal},get u(){return this._u}};function G(e,i){if(typeof e=="string"){let t=w(Kr[e][0]),s=_e(Kr[e][1]);i=t.mult(s).normal}let r=Object.create(Zn);return Object.assign(r,{_u:typeof e=="string"?_e(e):e,_normal:i}),r}var Kr={Qr:[1,"Qr"],"k€":[1e3,"€"],"€":[1,"€"],kL:[1e3,"L"],hL:[100,"L"],daL:[10,"L"],L:[1,"L"],dL:[.1,"L"],cL:[.01,"L"],mL:[.001,"L"],km:[1e3,"m"],hm:[100,"m"],dam:[10,"m"],m:[1,"m"],dm:[.1,"m"],cm:[.01,"m"],mm:[.001,"m"],t:[1e6,"g"],q:[1e5,"g"],kg:[1e3,"g"],hg:[100,"g"],dag:[10,"g"],g:[1,"g"],dg:[.1,"g"],cg:[.01,"g"],mg:[.001,"g"],an:[31536e6,"ms"],ans:[31536e6,"ms"],mois:[2592e6,"ms"],semaine:[6048e5,"ms"],semaines:[6048e5,"ms"],jour:[864e5,"ms"],jours:[864e5,"ms"],h:[36e5,"ms"],min:[6e4,"ms"],mins:[6e4,"ms"],s:[1e3,"ms"],ms:[1,"ms"],"°":[1,"°"],noUnit:[1,"noUnit"]},Pn={isUnit:!1,formatTime:!1},Hr={type:ci,children:[],[Symbol.iterator](){return this.children[Symbol.iterator]()},compareTo(e){return Rr(this,e)},equalsTo(e){return this.string===e.string},merge(e){let i,r=this.children.filter(t=>!t[0].isZero());for(let t of e){let s=t[1],n=t[0];if(n.isZero())continue;let o=r.map(l=>l[1]);if(i=o.length>0?Ys(o,s,(l,u)=>(ae(l),l.compareTo(u))):-1,i<0)r.splice(~i,0,t);else{let l=r[i][0],u;if(ae(l))u=l.merge(n);else{let a=Xe(l.string).add(Xe(n.string)).reduce();u=y(a.toString())}u.isZero()?r.splice(i,1):r[i]=[u,s]}}return this.createList(this.type,r)},createList(e,i){return e===ci?b(i):Si(i)},symmetrize(){let e=function(i){let r=i[0],t=i[1],s;return r.isZero()?i:(ae(r)?s=r.oppose():s=P(r)?r.first:r.oppose(),[s,t])};return this.createList(this.type,this.children.map(e))},get string(){return this.toString()},toString(e){return this.node.toString(e)},isOne(){return this.node.isOne()},isZero(){return this.node.isZero()},isMinusOne(){return this.node.isMinusOne()},isInt(){return this.node.isInt()},isOpposite(){return this.node.isOpposite()},get first(){return this.children[0]},get last(){return this.children[this.children.length-1]},get length(){return this.children.length},get node(){return this.toNode()},toNode(){let e=function([r,t]){let s=t;return r.string==="1/2"?s=zr([t]):!t.isOne()&&!r.isOne()&&(s.isOpposite()&&(s=s.bracket()),s=s.pow(r)),s},i;if(this.type===hi){i=w(1);for(let r=0;r<this.children.length;r++){let t=this.children[r][0],s=this.children[r][1],n=e([t,s]);(n.isOpposite()||n.isSum()||n.isDifference())&&(n=n.bracket()),r===0?i=n:n.isOne()||(i=i.mult(n))}}else{i=w(0);for(let r=0;r<this.children.length;r++){let t=this.children[r],s=ae(t[0])?t[0].node:t[0],n=t[1].node,o,l=!1;n.isOne()?o=s:s.isOne()?o=n:s.isMinusOne()?(l=!0,o=n):P(s)?(l=!0,s.first.isSum()||s.first.isDifference()?o=s.first.bracket().mult(n):o=s.first.mult(n)):((s.isSum()||s.isDifference())&&(s=s.bracket()),o=s.mult(n)),r===0?i=l?o.oppose():o:i=l?i.sub(o):i.add(o)}}return i},mult(e){let i=[];if(this.type===hi)return i=i.concat(this.merge(e).children),i=i.filter(r=>!r[1].isOne()),Si(i);for(let r of this)for(let t of e){let s=[],n=r[0],o=r[1],l=t[0],u=t[1];for(let[f,c]of n)for(let[h,g]of l){let M=parseInt(f.string)*parseInt(h.string),q=M<0,d=w(Math.abs(M)),m=c.mult(g);A(m.node)&&!m.node.isOne()&&(d=w(d.value.mul(m.node.value)),m=R()),q&&(d=d.oppose()),s.push([d,m])}let a=ye(w(0)).merge(b(s));i.push([a,o.mult(u)])}return kt().merge(b(i))},add(e){return this.merge(e)},sub(e){return this.merge(e.oppose())},oppose(){return this.symmetrize()},invert(){return this.symmetrize()},div(e){return this.frac(e)},frac(e){return this.mult(e.invert())}},et=Object.create(Hr),Dt={type:jr,get n(){return this._n},get d(){return this._d},isDefined(){return this.type!==Be},isZero(){return this.isDefined()&&this.n.isZero()},isInt(){return this.isDefined()&&this.node.isInt()},isOne(){return this.isDefined()&&this.node.isOne()},isProduct(){return this.isDefined()&&this.node.isProduct()},isPower(){return this.isDefined()&&this.node.isPower()},isDivision(){return this.isDefined()&&this.node.isDivision()},isQuotient(){return this.isDefined()&&this.node.isQuotient()},isOpposite(){return this.isDefined()&&this.node.isOpposite()},isMinusOne(){return this.isDefined()&&this.node.isMinusOne()},isNumeric(){return this.isDefined()&&this.node.isNumeric()},isDuration(){return this.isDefined()&&!!this.unit&&this.unit.isConvertibleTo(G("s").normal())},isLength(){return this.isDefined()&&!!this.unit&&this.unit.isConvertibleTo(G("m").normal())},isMass(){return this.isDefined()&&!!this.unit&&this.unit.isConvertibleTo(G("g").normal())},isConvertibleTo(e){let i=b([[ye(w(1)),this.n.first[1]]]),r=b([[ye(w(1)),this.d.first[1]]]),t=Y(i,r),s=b([[ye(w(1)),e.n.first[1]]]),n=b([[ye(w(1)),e.d.first[1]]]),o=Y(s,n);return t.equalsTo(o)||t.string==="m^3"&&o.string==="L"||t.string==="L"&&o.string==="m^3"},isSameQuantityType(e){return this.isDefined()&&e.isDefined()&&(!this.unit&&!e.unit||!!this.unit&&!!e.unit&&this.unit.isConvertibleTo(e.unit))},getCoefTo(e){let i=b([[this.n.first[0],R()]]),r=b([[this.d.first[0],R()]]),t=Y(i,r),s=b([[e.n.first[0],R()]]),n=b([[e.d.first[0],R()]]),o=Y(s,n),l=b([[$(),this.n.first[1]]]),u=b([[$(),this.d.first[1]]]),a=Y(l,u),f=b([[$(),e.n.first[1]]]),c=b([[$(),e.d.first[1]]]),h=Y(f,c),g=t.div(o);return a.string==="L"&&h.string==="m^3"?g=g.mult(y(.001).normal):h.string==="L"&&a.string==="m^3"&&(g=g.mult(y(1e3).normal)),g},reduce(){if(!this.isDefined())return this;function e(u){let a=new Q(0);return u.children.forEach(f=>{let c=f[0],h;ae(c)?h=e(c):h=P(c)?c.first.value:c.value,a=a.isZero()?h:di([a,h])}),a}function i(u,a){let f=u.children.map(c=>{let h=c[0],g=c[1],M;return ae(h)?(h=i(h,a),M=[h,g]):M=P(h)?[w(h.first.value.div(a)).oppose(),g]:[w(h.value.div(a)),g],M});return b(f)}let r=e(this.n),t=e(this.d),s=di([r,t]),n=i(this.n,s),o=i(this.d,s),l=!1;return n.node.isOpposite()&&(l=!0,n=n.oppose()),o.node.isOpposite()&&(l=!l,o=o.oppose()),l&&(n=n.oppose()),Y(n,o,this.unit)},add(e){if(!this.isDefined())return this;if(!e.isDefined())return e;if(!this.isSameQuantityType(e))throw new Error("Erreur d'unité");return Y(this.n.mult(e.d).add(e.n.mult(this.d)),this.d.mult(e.d),this.unit).reduce()},sub(e){if(!this.isDefined())return this;if(!e.isDefined())return e;if(e.unit&&this.unit&&!e.unit.equalsTo(this.unit)||this.unit&&!e.unit||!this.unit&&e.unit)throw new Error("Erreur d'unité");return Y(this.n.mult(e.d).sub(e.n.mult(this.d)),this.d.mult(e.d),this.unit).reduce()},mult(e){let i=it(e);if(!this.isDefined())return this;if(!i.isDefined())return i;let r;return this.unit&&i.unit?r=this.unit.mult(i.unit):this.unit?r=this.unit:r=i.unit,r&&r.string==="1"&&(r=void 0),Y(this.n.mult(i.n),i.d.mult(this.d),r).reduce()},div(e){return this.isDefined()?e.isDefined()?e.equalsTo(0)?Er("Division by zero"):this.mult(e.invert()):e:this},pow(e){if(!this.isDefined())return this;if(!e.isDefined())return e;if(e.isZero())return Fn(this.unit);if(e.isOne())return this;if(this.isZero())return this;if(this.isOne())return this;if(e.isMinusOne())return this.invert();let i;if(he(e.node)){let r=e.node.value.toNumber();if(i=this.mult(this),r>=3)for(let t=1;t<r-1;t++)i=i.mult(this)}else if(P(e.node)&&he(e.node.first)){let r=e.node.first.value.toNumber();if(i=this.mult(this),r>=3)for(let t=1;t<r-1;t++)i=i.mult(this);i=i.invert()}else if(le(this.node)){let r=this.node.factors.map(t=>t.normal);i=r.shift().pow(e),r.forEach(t=>{i=i.mult(t.pow(e))})}else if(this.isQuotient()||this.isDivision())i=this.n.node.normal.pow(e).div(this.d.node.normal.pow(e));else if(me(this.node)){let r=this.node.last.mult(e.node).eval();i=this.node.first.normal.pow(r.normal)}else if(e.equalsTo(w(.5).normal)&&he(this.node))if(this.node.value.sqrt().isInt())i=w(this.node.value.sqrt()).normal;else{let r=this.node.value.toNumber(),t=Ks(r);if(t===1){let s=b([[w(1),I(this.node,e.node)]]),n=b([[s,R()]]),o=$();i=Y(n,o)}else i=w(t).mult(w(r/(t*t)).pow(w(.5))).normal}else if(P(e.node)&&e.node.first.equals(w(.5))&&he(this.node)&&this.node.value.sqrt().isInt())i=w(this.node.value.sqrt().toNumber()).normal.invert();else{let r,t;if(this.isNumeric()&&e.isNumeric()){let s=b([[w(1),I(this.node,e.node)]]);r=b([[s,R()]]),t=$()}else r=b([[z(),I(this.node,e.node)]]),t=$();i=Y(r,t)}return i},oppose(){return this.isDefined()?Y(this.n.oppose(),this.d,this.unit):this},invert(){if(!this.isDefined())return this;let e=this.unit?this.unit.invert():void 0,i,r;if(this.n.length===1){let t=this.n.first[0];r=b([[t,R()]]);let s=this.n.first[1].symmetrize();i=b([[z(),s]])}else i=$(),r=this.n;return i=i.mult(this.d),Y(i,r,e).reduce()},compareTo(e){return this.isDefined()?e.isDefined()?Rr(this,e):-1:1},get node(){return this.toNode()},toNode({formatTime:e}=Pn){if(!this.isDefined())return Vt(this.error);let i,r=this.n.node,t=this.d.node;if(t.isOne())i=r;else{let s=!0;P(r)&&(s=!1,r=r.first),i=r.frac(t),s||(i=i.oppose())}if(this.unit)if(e){let s="",n=i.value.toNumber(),o=Math.floor(n/31536e6);o&&(s+=o+" ans "),n=n%31536e6;let l=Math.floor(n/864e5);l&&(s+=l+" jours "),n=n%864e5;let u=Math.floor(n/36e5);u&&(s+=u+" h "),n=n%36e5;let a=Math.floor(n/6e4);a&&(s+=a+" min "),n=n%6e4;let f=Math.floor(n/1e3);f&&(s+=f+" s "),n=n%1e3,n&&(s+=n+" ms "),i=y(s)}else i.unit=y("1"+this.unit.toNode({isUnit:!0}).toString({isUnit:!0})).unit;return i},get string(){return this.node.string},equalsTo(e){if(!this.isDefined())return!1;let i=it(e);return i.isDefined()?this.n.mult(i.d).equalsTo(this.d.mult(i.n)):!1}};function Er(e){return Object.assign(Object.create(Dt),{type:Be,error:e})}function Y(e,i,r){let t=Object.create(Dt);return i||(i=$()),Object.assign(t,{_n:e,_d:i,unit:r,type:jr}),t}function R(){return Si([[w(1),w(1)]])}function ye(e){return b([[e,R()]])}function z(){return ye(w(1))}function $n(){return ye(w(0))}function $(){return b([[z(),R()]])}function kt(){return b([[$n(),R()]])}function Fn(e){return Y($(),$(),e)}function Si(e){let i=Object.create(Hr);return Object.assign(i,{type:hi,children:!e||e.length===0?[[w(1),w(1)]]:e}),i}function b(e){let i=Object.create(Hr);return Object.assign(i,{type:ci,children:!e||e.length===0?kt().children:e}),i}function I(e,i){return Si([[i||w(1),e]])}function Zt(e){let i=et,r=et,t=null;if(v(e))t=Er("Incorrect expression");else if(Ke(e))r=b([[z(),I(e)]]),i=$();else if(Pi(e)){let s=e.children.map(n=>n.normal);for(t=s.pop();s.length;)t=t.add(s.pop())}else if(We(e))r=b([[z(),I(e)]]),i=$();else if(A(e))e.isInt()?(r=b([[ye(w(e.value)),R()]]),i=$()):t=y(Xe(e).toString()).normal;else if(me(e))t=e.first.normal.pow(e.last.normal);else if(je(e))t=e.first.normal.pow(w(.5).normal);else if(pi(e)){let s=e.children[0].normal,n=s.node;if(s.equalsTo(0)||s.equalsTo("2pi"))t=y(1).normal;else if(s.equalsTo("pi")||s.equalsTo("-pi"))t=y(-1).normal;else if(s.equalsTo("pi/2")||s.equalsTo("-pi/2"))t=y(0).normal;else if(s.equalsTo("pi/3")||s.equalsTo("-pi/3"))t=y(.5).normal;else if(s.equalsTo("2pi/3")||s.equalsTo("-2pi/3"))t=y(-.5).normal;else if(s.equalsTo("pi/4")||s.equalsTo("-pi/4"))t=y("sqrt(2)/2").normal;else if(s.equalsTo("3pi/4")||s.equalsTo("-3pi/4"))t=y("-sqrt(2)/2").normal;else if(s.equalsTo("pi/6")||s.equalsTo("-pi/6"))t=y("sqrt(3)/2").normal;else if(s.equalsTo("5pi/6")||s.equalsTo("-5pi/6"))t=y("-sqrt(3)/2").normal;else{let o=e.copy([n]);if(i=$(),n.isNumeric()){let l=b([[w(1),I(o)]]);r=b([[l,R()]])}else r=b([[z(),I(o)]])}}else if(mi(e)){let s=e.children[0].normal,n=s.node;if(s.equalsTo(0)||s.equalsTo("2pi")||s.equalsTo("pi")||s.equalsTo("-pi"))t=y(0).normal;else if(s.equalsTo("pi/2"))t=y(1).normal;else if(s.equalsTo("-pi/2"))t=y(-1).normal;else if(s.equalsTo("pi/6")||s.equalsTo("5pi/6"))t=y(.5).normal;else if(s.equalsTo("-pi/6")||s.equalsTo("-5pi/6"))t=y(-.5).normal;else if(s.equalsTo("pi/4")||s.equalsTo("3pi/4"))t=y("sqrt(2)/2").normal;else if(s.equalsTo("-pi/4")||s.equalsTo("-3pi/4"))t=y("-sqrt(2)/2").normal;else if(s.equalsTo("pi/3")||s.equalsTo("2pi/3"))t=y("sqrt(3)/2").normal;else if(s.equalsTo("-pi/3")||s.equalsTo("-2pi/3"))t=y("-sqrt(3)/2").normal;else{let o=e.copy([n]);if(i=$(),n.isNumeric()){let l=b([[w(1),I(o)]]);r=b([[l,R()]])}else r=b([[z(),I(o)]])}}else if(ki(e)){let s=e.children[0].normal,n=s.node;if(s.equalsTo(0))t=y(0).normal;else if(s.equalsTo("pi/6"))t=y("1/sqrt(3)").normal;else if(s.equalsTo("-pi/6"))t=y("-1/sqrt(3)").normal;else if(s.equalsTo("pi/4"))t=y(1).normal;else if(s.equalsTo("-pi/4"))t=y("-1").normal;else if(s.equalsTo("pi/3"))t=y("sqrt(3)").normal;else if(s.equalsTo("-pi/3"))t=y("-sqrt(3)").normal;else{let o=e.copy([n]);if(i=$(),n.isNumeric()){let l=b([[w(1),I(o)]]);r=b([[l,R()]])}else r=b([[z(),I(o)]])}}else if(Ne(e)){let s=e.children[0].normal,n=s.node;if(ii(n))t=n.first.normal;else if(me(n))t=n.last.mult(n.first.ln()).normal;else if(s.equalsTo(1))t=y(0).normal;else if(s.equalsTo("e"))t=y(1).normal;else if(he(n)){let o=n.value.toNumber(),l=Xr(o);if(l.length===1&&l[0][1]===1){let u=e.copy([n]),a=b([[w(1),I(u)]]);r=b([[a,R()]]),i=$()}else t=y(0).normal,t=t.add(w(0).normal),l.forEach(u=>{let[a,f]=u,c=y(`${f}*ln(${a})`).normal;t=t.add(c)})}else{let o=e.copy([n]);if(i=$(),n.isNumeric()){let l=b([[w(1),I(o)]]);r=b([[l,R()]])}else r=b([[z(),I(o)]])}}else if(ii(e)){let s=e.first,n=s.normal;if(le(s)&&(Ne(s.first)||Ne(s.last)))Ne(s.first)?t=s.first.first.pow(s.last).normal:t=s.last.first.pow(s.first).normal;else if(Ne(s))t=s.first.normal;else if(n.equalsTo(0))t=y(1).normal;else{let o=e.copy([n.node]);if(i=$(),s.isNumeric()){let l=b([[w(1),I(o)]]);r=b([[l,R()]])}else r=b([[z(),I(o)]])}}else if(gi(e)){let s=e.first,n=s.normal;if(s.isNumeric())s.isLowerThan(0)?t=n.mult(-1):t=n;else{let o=e.copy([s]);i=$(),r=b([[z(),I(o)]])}}else if(Zi(e)){let s=e.children[0].normal,n=s.node;if(me(n))t=n.last.mult(n.first.log()).normal;else if(s.equalsTo(1))t=y(0).normal;else if(s.equalsTo(10))t=y(1).normal;else if(he(n)){let o=n.value.toNumber(),l=Xr(o);if(l.length===1&&l[0][1]===1){let u=e.copy([n]),a=b([[w(1),I(u)]]);r=b([[a,R()]]),i=$()}else t=y(0).normal,l.forEach(u=>{let[a,f]=u,c=y(`${f}*log(${a})`).normal;t=t.add(c)})}else{let o=e.copy([n]);if(i=$(),n.isNumeric()){let l=b([[w(1),I(o)]]);r=b([[l,R()]])}else r=b([[z(),I(o)]])}}else if(kr(e)){let s=e.children[0].normal.node;if(s.isNumeric())t=w(s.eval({decimal:!0}).value.floor()).normal;else{let n=e.copy([s]);i=$(),r=b([[z(),I(n)]])}}else if(Zr(e)){let s=e.children.map(l=>l.normal.node),n=s[0],o=s[1];if(e.isNumeric())if(P(n)&&n.first.isInt()&&(n=n.first),P(o)&&o.first.isInt()&&(o=o.first),he(n)&&he(o))t=w(Et(n.value.toNumber(),o.value.toNumber())).normal;else{let l=e.copy(s),u=b([[w(1),I(l)]]);r=b([[u,R()]]),i=$()}else{let l=e.copy(s);r=b([[z(),I(l)]]),i=$()}}else if(Pr(e)){let s=e.children.map(l=>l.normal.node),n=s[0],o=s[1];if(e.isNumeric())if((he(n)||P(n)&&n.first.isInt())&&(he(o)||P(o)&&o.first.isInt()))t=w(new Q(n.string).mod(new Q(o.string))).normal;else{let l=e.copy(s),u=b([[w(1),I(l)]]);r=b([[u,R()]]),i=$()}else{let l=e.copy(s);r=b([[z(),I(l)]]),i=$()}}else if(Or(e)||ai(e)){let s=e.children.map(l=>l.normal.node),n=s[0],o=s[1];if(e.isNumeric())t=n.isLowerThan(o)?n.normal:o.normal;else{let l=e.copy(s);r=b([[z(),I(l)]]),i=$()}}else if(Dr(e)||Oi(e)){let s=e.children.map(l=>l.normal.node),n=s[0],o=s[1];if(e.isNumeric())t=n.isGreaterThan(o)?n.normal:o.normal;else{let l=e.copy(s);r=b([[z(),I(l)]]),i=$()}}else if(Di(e))t=e.first.div(w(100)).normal;else if(fe(e))r=b([[z(),I(e)]]),i=$();else if(Qe(e))r=b([[z(),I(e)]]),i=$();else if(ie(e))r=b([[z(),I(_e(e.toString({displayUnit:!1})))]]),i=$();else if(C(e)||K(e))t=Zt(e.first);else if(P(e))t=e.first.normal,t.node.isZero()||(t=t.oppose());else if(ge(e)){t=e.children[0].normal;for(let s=1;s<e.children.length;s++)t=t.add(e.children[s].normal)}else if(le(e)||ni(e)||si(e)){t=w(1).normal;for(let s=0;s<e.children.length;s++)t=t.mult(e.children[s].normal)}else if(ve(e))t=e.first.normal.sub(e.last.normal);else if(Re(e)||be(e))t=e.first.normal.div(e.last.normal);else if(Li(e)){let s=!0;e.ops.forEach((n,o)=>{let l=y(e.children[o].string+n+e.children[o+1]);s=s&&l.eval().boolvalue}),t=Ee(s).normal}else $i(e)?t=Ee(!e.first.eval().equals(e.last.eval())).normal:ei(e)?t=Ee(e.first.eval().equals(e.last.eval())).normal:Ie(e)?t=Ee(e.first.eval().isLowerThan(e.last.eval())).normal:Ae(e)?t=Ee(e.first.eval().isGreaterThan(e.last.eval())).normal:Ce(e)?t=Ee(e.first.eval().isLowerOrEqual(e.last.eval())).normal:Ue(e)?t=Ee(e.first.eval().isGreaterOrEqual(e.last.eval())).normal:t=Er("Impossible to normalize "+e.string);if(t||(t=Y(r,i)),e.unit){let s=e.unit.normal(),n=b([[s.n.first[0],R()]]),o=b([[s.d.first[0],R()]]),l=Y(n,o),u=b([[ye(w(1)),s.n.first[1]]]),a=b([[ye(w(1)),s.d.first[1]]]);s=Y(u,a),t=t.mult(l),s.string!=="1"&&(t.unit=s)}return t}function it(e){let i;return typeof e=="string"||typeof e=="number"||Q.isDecimal(e)?i=y(e).normal:i=e,i}Q.set({toExpPos:89,toExpNeg:-89});var In={isUnit:!1,displayUnit:!0,comma:!1,addBrackets:!1,implicit:!1},Cn={addBrackets:!1,implicit:!1,addSpaces:!0,keepUnecessaryZeros:!1},An={addBrackets:!1,implicit:!1,addSpaces:!0,keepUnecessaryZeros:!1},Un={precision:20,decimal:!1};function _n(){return{type:Xs,generated:[],derivate(e="x"){return v(this)?this:hn(this,e)},get normal(){return this._normal||(this._normal=Zt(this)),this._normal},compose(e,i="x"){return v(this)?this:cn(this,e,i)},reduce(){if(v(this))return this;let e=this.removeSigns();if(T(e)){let i=e.isOpposite(),r=Xe(i?e.first.string:e.string).reduce(),t;return r.n.equals(0)?t=w(0):r.d.equals(1)?t=r.s===1?w(r.n):li([w(r.n)]):(t=bi([w(r.n),w(r.d)]),r.s===-1&&(t=li([t]))),i&&(P(t)?t=t.first:t=li([t])),t}else return this},isCorrect(){return this.type!==Be},isIncorrect(){return this.type===Be},isRelations(){return this.type===Ir},isEquality(){return this.type===zi},isUnequality(){return this.type===Vi},isInequality(){return this.type===Wi||this.type===Ji||this.type===Xi||this.type===Yi},isBoolean(){return this.type===rr},isSum(){return this.type===Fi},isDifference(){return this.type===Ii},isOpposite(){return this.type===ji},isPositive(){return this.type===Ri},isProduct(){return this.type===Je||this.type===fi||this.type===vi},isDivision(){return this.type===Ci},isQuotient(){return this.type===Ai},isPower(){return this.type===Ui},isRadical(){return this.type===fr},isPGCD(){return this.type===er},isMax(){return this.type===Cr},isMaxP(){return this.type===Ar},isMin(){return this.type===Ur},isMinP(){return this.type===_r},isMod(){return this.type===ir},isCos(){return this.type===tr},isSin(){return this.type===sr},isTan(){return this.type===nr},isLn(){return this.type===or},isLog(){return this.type===lr},isExp(){return this.type===ur},isFloor(){return this.type===ar},isAbs(){return this.type===Br},isNumber(){return this.type===Qi},isBracket(){return this.type===Gi},isSymbol(){return this.type===Bi},isSegmentLength(){return this.type===Ki},isTemplate(){return this.type===Hi},isHole(){return this.type===_i},isTime(){return this.type===Qr},isLimit(){return this.type===hr},isChild(){return!!this.parent},isIdentifier(){return this.type===cr},isFirst(){return!!this.parent&&this.parent.children.indexOf(this)===0},isLast(){return!!this.parent&&this.parent.children.indexOf(this)===1},isFunction(){return this.isRadical()||this.isPGCD()||this.isMin()||this.isMinP()||this.isMax()||this.isMaxP()||this.isMod()||this.isCos()||this.isSin()||this.isTan()||this.isLog()||this.isLn()||this.isExp()||this.isFloor()||this.isAbs()},isDuration(){return v(this)?!1:this.isTime()||!!this.unit&&this.unit.isConvertibleTo(G("s"))},isLength(){return v(this)?!1:!!this.unit&&this.unit.isConvertibleTo(G("m"))},isMass(){return v(this)?!1:!!this.unit&&this.unit.isConvertibleTo(G("g"))},isVolume(){return v(this)?!1:!!this.unit&&(this.unit.isConvertibleTo(G("m").mult(G("m")).mult(G("m")))||this.unit.isConvertibleTo(G("L")))},compareTo(e){return v(this)?-1:v(e)?1:Rr(this,e)},isLowerThan(e){if(v(this))return!1;let i=ce(e);if(v(i))return!1;let r=this.normal.node,t=i.normal.node,s;try{s=Xe(r).isLowerThan(Xe(t))}catch{s=r.eval({decimal:!0}).isLowerThan(t.eval({decimal:!0}))}return s},isLowerOrEqual(e){if(v(this))return!1;let i=ce(e);return v(i)?!1:this.isLowerThan(i)||this.equals(i)},isGreaterThan(e){if(v(this))return!1;let i=ce(e);return v(i)?!1:i.isLowerThan(this)},isGreaterOrEqual(e){if(v(this))return!1;let i=ce(e);return v(i)?!1:this.isGreaterThan(i)||this.equals(i)},isOne(){return this.toString({displayUnit:!1})==="1"},isMinusOne(){return this.string==="-1"},isZero(){return this.toString({displayUnit:!1})==="0"},equalsZero(){return this.eval().isZero()},strictlyEquals(e){return this.string===e.string},equals(e){if(v(this))return!1;let i=ce(e);return v(i)?!1:ei(this)?ei(i)&&(this.first.equals(i.first)&&this.last.equals(i.last)||this.first.equals(i.last)&&this.last.equals(i.first)):Ie(this)?Ie(i)&&this.first.equals(i.first)&&this.last.equals(i.last)||Ae(i)&&this.first.equals(i.last)&&this.last.equals(i.first):Ce(this)?Ce(i)&&this.first.equals(i.first)&&this.last.equals(i.last)||Ue(i)&&this.first.equals(i.last)&&this.last.equals(i.first):Ae(this)?Ae(i)&&this.first.equals(i.first)&&this.last.equals(i.last)||Ie(i)&&this.first.equals(i.last)&&this.last.equals(i.first):Ue(this)?Ue(i)&&this.first.equals(i.first)&&this.last.equals(i.last)||Ce(i)&&this.first.equals(i.last)&&this.last.equals(i.first):this.normal.string===i.normal.string},isSameQuantityType(e){return this.normal.isSameQuantityType(e.normal)},get terms(){let e,i,r;return ge(this)?(K(this.first)?(r={op:"+",term:this.first.first},e=[r]):P(this.first)?(r={op:"-",term:this.first.first},e=[r]):e=this.first.terms,r={op:"+",term:this.last},i=[r],e.concat(i)):ve(this)?(K(this.first)?(r={op:"+",term:this.first.first},e=[r]):P(this.first)?(r={op:"-",term:this.first.first},e=[r]):e=this.first.terms,r={op:"-",term:this.last},i=[r],e.concat(i)):(r={op:"+",term:this},[r])},get factors(){if(le(this)){let e=this.first.factors,i=this.last.factors;return e.concat(i)}else return[this]},get pos(){return this.parent?this.parent.children.indexOf(this):0},toString(e){return v(this)?this.error:un(this,{...In,...e||{}})},get string(){return this.toString()},toLatex(e){return an(this,{...Cn,...e||{}})},get latex(){return this.toLatex()},toTexmacs(e){return fn(this,{...An,...e||{}})},get texmacs(){return this.toTexmacs()},get root(){return this.parent?this.parent.root:this},isInt(){return A(this)&&this.value.isInt()},isEven(){return he(this)&&this.value.mod(2).equals(0)},isOdd(){return he(this)&&this.value.mod(2).equals(1)},isNumeric(){return A(this)||T(this)&&this.children.every(e=>e.isNumeric())},add(e){if(v(this))return this;let i=ce(e);return v(i)?i:Pt([this,i])},sub(e){if(v(this))return this;let i=ce(e);return v(i)?i:$t([this,i])},mult(e,i=Je){if(v(this))return this;let r=ce(e);return v(r)?r:i===Je?It([this,r]):i===fi?Gr([this,r]):Bn([this,r])},div(e){if(v(this))return this;let i=ce(e);return v(i)?i:Ft([this,i])},frac(e){if(v(this))return this;let i=ce(e);return v(i)?i:bi([this,i])},oppose(){return v(this)?this:li([this])},inverse(){return v(this)?this:bi([w(1),this])},radical(){return v(this)?this:zr([this])},positive(){return v(this)?this:At([this])},bracket(){return v(this)?this:Ut([this])},pow(e){if(v(this))return this;let i=ce(e);return v(i)?i:Ct([this,i])},floor(){return v(this)?this:Gt([this])},mod(e){if(v(this))return this;let i=ce(e);return v(i)?i:Ht([this,i])},abs(){return v(this)?this:zt([this])},exp(){return v(this)?this:Rt([this])},ln(){return v(this)?this:Qt([this])},log(){return v(this)?this:jt([this])},sin(){return v(this)?this:Bt([this])},cos(){return v(this)?this:_t([this])},shallowShuffleTerms(){return v(this)?this:ge(this)||ve(this)?bn(this):this},shallowShuffleFactors(){return v(this)?this:le(this)?Nn(this):this},shuffleTerms(){return v(this)?this:Tn(this)},shuffleFactors(){return v(this)?this:qn(this)},shuffleTermsAndFactors(){return v(this)?this:Sn(this)},sortTerms(){return v(this)?this:En(this)},shallowSortTerms(){return v(this)?this:xn(this)},sortFactors(){return v(this)?this:Ln(this)},shallowSortFactors(){return v(this)?this:Mn(this)},sortTermsAndFactors(){return v(this)?this:On(this)},reduceFractions(){return v(this)?this:dn(this)},removeMultOperator(){return v(this)?this:mn(this)},removeUnecessaryBrackets(e=!1){return v(this)?this:yn(this,e)},removeZerosAndSpaces(){return v(this)?this:pn(this)},removeSigns(){return v(this)?this:Dn(this)},removeNullTerms(){return v(this)?this:gn(this)},removeFactorsOne(){return v(this)?this:vn(this)},simplifyNullProducts(){return v(this)?this:wn(this)},searchUnecessaryZeros(){if(v(this))return!1;if(A(this)){let e=[/^0\d+/,/[.,]\d*0$/],i=this.input;return e.some(r=>i.replace(/ /g,"").match(r))}else return T(this)?this.children.some(e=>e.searchUnecessaryZeros()):!1},searchMisplacedSpaces(){if(v(this))return!1;if(A(this)){let[e,i]=this.input.replace(",",".").split("."),r=[/\d{4}/,/\s$/,/\s\d{2}$/,/\s\d{2}\s/,/\s\d$/,/\s\d\s/];return!!(r.some(t=>e.match(t))||i&&(r=[/\d{4}/,/^\s/,/^\d{2}\s/,/\s\d{2}\s/,/^\d\s/,/\s\d\s/],r.some(t=>i.match(t))))}else return T(this)?this.children.some(e=>e.searchMisplacedSpaces()):!1},eval(e){if(v(this))return this;e={...Un,...e};let i=this.substitute(e.values),r=typeof e.unit=="string"&&e.unit!=="HMS"?y("1 "+e.unit).unit:e.unit;if(this.isNumeric()&&(Oi(this)||ai(this)))ai(this)?i=this.first.isLowerThan(this.last)?this.first:this.last:i=this.first.isGreaterThan(this.last)?this.first:this.last;else{let t=i.normal;if(r&&t.unit){if(r==="HMS"&&!t.isDuration()||r!=="HMS"&&!y("1"+r.string).normal.isSameQuantityType(t))throw new Error(`Unités incompatibles ${t.string} ${typeof r=="string"?r:r.string}`);if(r!=="HMS"){let s=t.unit.getCoefTo(r.normal());t=t.mult(s)}}r==="HMS"?i=t.toNode({formatTime:!0}):i=t.node,r&&r!=="HMS"&&(i.unit=r)}if(e.decimal&&r!=="HMS"){let t=i.unit;i=w(X(i).toDecimalPlaces(e.precision).toString()),t&&(i.unit=t)}return i},generate(){return v(this)?this:(this.root.generated=[],Fe(this))},shallow(){return{nature:this.type,children:T(this)?this.children.map(e=>e.type):null,unit:this.unit?this.unit.string:""}},substitute(e={}){return v(this)?this:(this.root.substitutionMap={...this.root.substitutionMap,...e},xr(this,e))},matchTemplate(e){if(v(this)||v(e))return!1;let i,r,t;function s(l,u){for(let a=0;a<u.length;a++)if(!l.children[a].matchTemplate(u.children[a]))return!1;return!0}function n(l,u,a){let f=l===0?0:Math.floor(Math.log10(l))+1;return f<=a&&f>=u}function o(l,u,a){return l>=u&&l<=a}if(A(e))return A(this)&&this.value.equals(e.value);if(fe(e))return this.isHole();if(ie(e))return ie(this)&&this.symbol===e.symbol;if(we(e))switch(e.nature){case"$e":case"$ep":case"$ei":if(e.signed&&(P(this)||K(this))||e.relative&&P(this))return this.first.matchTemplate(Pe({nature:e.nature,children:e.children}));if(!fe(e.children[1])&&!n(this.value.toNumber(),fe(e.children[0])?0:e.children[0].value.toNumber(),e.children[1].value.toNumber())||!fe(e.children[2])&&!o(this.value.toNumber(),e.children[2].value.toNumber(),e.children[3].value.toNumber()))return!1;if(e.nature==="$e")return this.isInt();if(e.nature==="$ep")return this.isEven();if(e.nature==="$ei")return this.isOdd();break;case"$d":if(e.relative&&P(this))return this.first.matchTemplate(e);if(!this.isNumber()||this.isInt())return!1;{let[l,u]=this.value.toString().split(".");if(r=parseInt(l,10),t=parseInt(u,10),e.children[0].isTemplate()){if(!w(Math.floor(Math.log10(r))+1).matchTemplate(e.children[0]))return!1}else if(!n(r,e.children[0].value.toNumber(),e.children[0].value.toNumber()))return!1;if(e.children[1].isTemplate()){if(!w(Math.floor(Math.log10(t))+1).matchTemplate(e.children[1]))return!1}else if(!n(t,e.children[1].value.toNumber(),e.children[1].value.toNumber()))return!1;return!0}case"$l":return!0;default:return i=parseInt(e.nature.slice(1,e.nature.length),10),this.matchTemplate(e.root.generated[i-1])}else if(T(e))return T(this)&&e.type===this.type&&e.length===this.length&&s(this,e);return!0},copyFromString(e=!0){return y(this.toString({displayUnit:e}))},copy(e){let i={};return this.unit&&(i.unit=this.unit),T(this)&&(i.children=e||[...this.children]),A(this)&&(i.value=this.value,i.input=this.input),We(this)&&(i.value=this.value,i.boolvalue=this.boolvalue),ie(this)&&(i.symbol=this.symbol),ti(this)&&(i.begin=this.begin,i.end=this.end),Qe(this)&&(i.name=this.name),v(this)&&(i.error=this.error,i.message=this.message),Ke(this)&&(i.sign=this.sign),Li(this)&&(i.ops=this.ops),Z({type:this.type,...i})},[Symbol.iterator](){return this.children[Symbol.iterator]()},get first(){return this.children[0]},get last(){return this.children[this.children.length-1]},get length(){return this.children.length},isTrue(){return We(this)&&this.boolvalue},isFalse(){return We(this)&&!this.boolvalue}}}function Z({type:e,children:i,...r}){let t=_n();return i&&(i=i.map(s=>{if(s.parent){let n=s.copy();return n.parent=t,n}else return s.parent=t,s}),t.children=i),t.type=e,Object.assign(t,r),t}function Pt(e){return Z({type:Fi,children:e})}function $t(e){return Z({type:Ii,children:e})}function Ft(e){return Z({type:Ci,children:e})}function It(e){return Z({type:Je,children:e})}function Gr(e){return Z({type:fi,children:e})}function Bn(e){return Z({type:vi,children:e})}function bi(e){return Z({type:Ai,children:e})}function Ct(e){return Z({type:Ui,children:e})}function li(e){return Z({type:ji,children:e})}function At(e){return Z({type:Ri,children:e})}function Ut(e){return Z({type:Gi,children:e})}function zr(e){return Z({type:fr,children:e})}function _t(e){return Z({type:tr,children:e})}function Bt(e){return Z({type:sr,children:e})}function Qn(e){return Z({type:nr,children:e})}function Qt(e){return Z({type:or,children:e})}function jt(e){return Z({type:lr,children:e})}function Rt(e){return Z({type:ur,children:e})}function jn(e){return Z({type:er,children:e})}function Ht(e){return Z({type:ir,children:e})}function Gt(e){return Z({type:ar,children:e})}function zt(e){return Z({type:Br,children:e})}function Rn(e){return Z({type:Ur,children:e})}function Hn(e){return Z({type:_r,children:e})}function Gn(e){return Z({type:Cr,children:e})}function zn(e){return Z({type:Ar,children:e})}function Vn(e){return Z({type:Fr,children:e})}function w(e){let i=new Q(typeof e=="string"?e.replace(",",".").replace(/\s/g,""):e);return Z({type:Qi,value:i,input:e.toString().trim().replace(",",".")})}function Ee(e){return Z({type:rr,boolvalue:e,value:e?new Q(1):new Q(0)})}function _e(e){return Z({type:Bi,symbol:e})}function Wn(e,i){return Z({type:Ki,begin:e,end:i})}function Vt(e,i="",r=""){return Z({type:Be,error:e,message:i,input:r})}function ue(){return Z({type:_i})}function Pe(e){return Z({type:Hi,...e})}function Jn(e,i){return Z({type:Ir,ops:e,children:i})}function Xn(e){return Z({type:zi,children:e})}function Yn(e){return Z({type:Vi,children:e})}function Kn(e,i){return Z(i==="<"?{type:Wi,children:e}:i===">"?{type:Xi,children:e}:i==="<="?{type:Ji,children:e}:{type:Yi,children:e})}function eo(e){return Z({type:Qr,children:e})}function io(e){return Z({type:cr,name:e})}function ro(e,i){return Z({type:hr,sign:e,children:i})}function ce(e){let i;return typeof e=="string"||typeof e=="number"||Q.isDecimal(e)?i=y(e):i=e,i}var rt=k("+"),tt=k("-"),to=k("*"),gr=k(":"),so=k("/"),st=k("^"),no=k("?"),oo=k("."),lo=k("="),uo=k("!="),ao=k("%"),nt=k("\\"),ot=k("m"),lt=k("d"),fo=k("cd"),co=k("@[<>]=?"),ut=k("("),at=k(")"),ne=k(";"),vr=k("["),wr=k("]"),Se=k("{"),xe=k("}"),ho=k("$$"),po=k("@\\$(e[pi]?)(rs?)?"),mo=k("@\\$d(r)?"),go=k("@\\$(\\d)+"),vo=k("$l"),wo=k("$"),yo=k("@&[a-z]+(\\d)*|&(\\d)+"),bo=k("@_({.+}|([0-9]+|[ijknmp]))"),To=k("@[A-Z][A-Z]"),No=k("@pi|infinity"),qo=k("@false|true"),ft=k("@cos|sin|sqrt|pgcd|minip|mini|maxip|maxi|cos|sin|tan|exp|ln|log|mod|floor|abs"),So=k("@[\\d]+"),xo=k("@\\d+[\\d\\s]*([,\\.][\\d\\s]*\\d+)?"),Eo=k("@((\\d+[\\d\\s]*([,\\.][\\d\\s]*\\d+)?)\\s*ans?)?\\s*((\\d+[\\d\\s]*([,\\.][\\d\\s]*\\d+)?)\\s*mois)?\\s*((\\d+[\\d\\s]*([,\\.][\\d\\s]*\\d+)?)\\s*semaines?)?\\s*((\\d+[\\d\\s]*([,\\.][\\d\\s]*\\d+)?)\\s*jours?)?\\s*((\\d+[\\d\\s]*([,\\.][\\d\\s]*\\d+)?)\\s*h(?![a-zA-Z]))?\\s*((\\d+[\\d\\s]*([,\\.][\\d\\s]*\\d+)?)\\s*mins?)?\\s*((\\d+[\\d\\s]*([,\\.][\\d\\s]*\\d+)?)\\s*s(?![a-zA-Z]))?\\s*((\\d+[\\d\\s]*([,\\.][\\d\\s]*\\d+)?)\\s*ms)?"),ct=k("@Qr|€|k€|kL|hL|daL|L|dL|cL|mL|km|hm|dam|dm|cm|mm|ans|min|ms|t|q|kg|hg|dag|dg|cg|mg|°|m|g|h|s"),Mo=k("@(inf|\\d+)(plus|moins)"),ht="no valid atom found",Lo="non compatible units",Oo="Unexpected end of expression",Do="unit required",ko="no unit before a factor in implicit product",Zo="Number must be placed at the beginning of an implicit product",Po=k("@[a-z]{1}"),$o={implicit:!0};function Mr({implicit:e}=$o){let i,r,t,s;function n(d){return i.match(d)?(r=i.lexem,s=i.parts,r):""}function o(d){return i.prematch(d)}function l(d){if(!n(d))throw new Error(`${d.pattern} required`)}function u(){return a()}function a(){let d=[],m=[];d.push(f());let S;for(;n(lo)||n(uo)||n(co);)m.push(r),d.push(f());return m.length===0?S=d[0]:m.length===1?m[0]==="!="?S=Yn([d[0],d[1]]):m[0]==="="?S=Xn([d[0],d[1]]):S=Kn([d[0],d[1]],m[0]):S=Jn(m,d),S}function f(){let d,m,S="";for((n(tt)||n(rt))&&(S=r),m=c(),S?d=S==="-"?li([m]):At([m]):d=m;n(rt)||n(tt);){if(S=r,m=c(),!m.isSameQuantityType(d))throw new Error(Lo);d=S==="+"?Pt([d,m]):$t([d,m])}return d}function c(){let d=h();for(;n(to)||n(gr)||n(so);)r==="*"?d=It([d,h()]):r===":"?d=Ft([d,h({localImplicit:!1})]):d=bi([d,h({localImplicit:!1})]);return d}function h({localImplicit:d=!0}={}){let m=g(),S;if(e&&d)do{try{S=g()}catch(O){if(O.message===ht)S=null;else throw O}if(S&&S.isNumber())throw new Error(Zo);if(S&&m.unit)throw new Error(ko);S&&(m=Gr([m,S]))}while(S);return m}function g(){let d=M();for(;n(st);)d=Ct([d,M()]);return d}function M(){let d,m,S,O=null,F=null;if(n(Mo)){let x=r,D,H;x[0]==="i"?(D=x.substring(3)==="plus"?"+":"-",H=[_e("inf")]):(D=x[x.length-2]==="u"?"+":"-",H=x[x.length-2]==="u"?[w(x.substring(0,x.length-4))]:[w(x.substring(0,x.length-5))]),d=ro(D,H)}else if(n(yo))d=io(r);else if(n(qo))d=Ee(r==="true");else if(n(Eo)){let x=["ans","mois","semaines","jours","h","min","s","ms"],D=[s[3],s[6],s[9],s[12],s[15],s[18],s[21],s[24]],H=D.filter(B=>!!B),J=H.length===1?x[D.findIndex(B=>!!B)]:null;if(J)d=Mr().parse(H[0]),d.unit=G(J);else if(H.length===0)d=w(0),d.unit=G("s");else{let B=D.map((te,V)=>{let se=te?Mr().parse(te.trim()):w(0);return se.unit=G(x[V]),se});d=eo(B)}}else if(n(To))d=Wn(r.charAt(0),r.charAt(1));else if(n(xo))d=w(r);else if(n(no))d=ue();else if(m=n(ft)){switch(l(ut),m){case"sqrt":d=zr([u()]);break;case"pgcd":{let x=u();l(ne);let D=u();d=jn([x,D]);break}case"minip":{let x=u();l(ne);let D=u();d=Hn([x,D]);break}case"mini":{let x=u();l(ne);let D=u();d=Rn([x,D]);break}case"maxip":{let x=u();l(ne);let D=u();d=zn([x,D]);break}case"maxi":{let x=u();l(ne);let D=u();d=Gn([x,D]);break}case"mod":{let x=u();l(ne);let D=u();d=Ht([x,D]);break}case"cos":d=_t([u()]);break;case"sin":d=Bt([u()]);break;case"tan":d=Qn([u()]);break;case"ln":d=Qt([u()]);break;case"log":d=jt([u()]);break;case"exp":d=Rt([u()]);break;case"floor":d=Gt([u()]);break;case"abs":d=zt([u()]);break;default:throw new Error("function not recognized")}l(at)}else if(n(po)){let x=s[2],D=s[3],H=!!D&&D.includes("s");S=[];let J=[],B=[],te=[],V=ue(),se=ue(),ke=ue(),He=ue();if(n(Se)?(se=u(),n(ne)&&(V=se,se=u()),l(xe)):n(vr)&&(ke=u(),l(ne),He=u(),l(wr)),n(nt))if(n(Se)){S=[];do n(ot)?J.push(u()):n(lt)?B.push(u()):n(fo)?te.push(u()):S.push(u());while(n(ne));l(xe)}else l(vr),O=u(),l(ne),F=u(),l(wr);let j={nature:"$"+x,relative:!!D,signed:H,children:[V,se,ke,He]};S.length&&(j.exclude=S),J.length&&(j.excludeMultiple=J),B.length&&(j.excludeDivider=B),te.length&&(j.excludeCommonDividersWith=te),O&&(j.excludeMin=O),F&&(j.excludeMax=F),d=Pe(j)}else if(n(mo)){let x="d",D=s[2],H=ue(),J=ue(),B=ue(),te=ue(),V=ue(),se=ue();n(Se)&&(H=u(),n(gr)&&(J=H,H=ue(),B=u()),n(ne)&&(te=u(),n(gr)&&(V=te,te=ue(),se=u())),l(xe)),d=Pe({nature:"$"+x,relative:!!D,children:[H,te,J,B,V,se]})}else if(n(go)){let x=s[2];d=Pe({nature:"$"+x,children:[]})}else if(n(vo)){let x=r,D=[],H=[],J=[];for(S=[],O=null,F=null,l(Se),D.push(u());n(ne);)D.push(u());if(l(xe),n(nt))if(n(Se)){S=[];do n(ot)?H.push(u()):n(lt)?J.push(u()):S.push(u());while(n(ne));l(xe)}else l(vr),O=u(),l(ne),F=u(),l(wr);let B={nature:x,children:D};S.length&&(B.exclude=S),H.length&&(B.excludeMultiple=H),J.length&&(B.excludeDivider=J),O&&(B.excludeMin=O),F&&(B.excludeMax=F),d=Pe(B)}else if(n(ho)){let x=null;n(So)&&(x=parseInt(r,10)),l(Se);let D={nature:"$$",children:[u()]};x&&(D.precision=x),d=Pe(D),l(xe)}else if(n(wo))l(Se),d=Pe({nature:"$",children:[u()]}),l(xe);else if(n(No))d=_e(r);else if(n(Po)){let x=r;switch(x){default:n(bo)&&(x+=r),d=_e(x)}}else if(n(ut))d=Ut([u()]),l(at);else if(n(Se))d=u(),l(xe);else throw new Error(ht);if(d&&n(ao)&&(d=Vn([d])),d&&!o(ft)){let x=q();x&&(d.unit=x)}return d}function q(){function d(){let m=G(r);if(n(st)){let S=M();m=m.pow(S)}return m}if(n(ct)){let m=d();for(;n(oo);)if(n(ct))m=m.mult(d());else throw new Error(Do);return m}else return null}return{parse(d){let m;if(typeof d=="number"||Q.isDecimal(d))m=w(d);else{d=d.trim(),t=d,i=Js(d);try{if(m=u(),i.pos<t.length)throw new Error(Oo)}catch(S){let O="-".repeat(i.pos);O+="^";let F=`
${t}
${O}
${S.message}`;m=Vt(S.message,F,d)}}return m}}}var Fo=Mr;function y(e,i){return Fo(i).parse(e)}console.log("toto");var Wt=y("1/0"),Jt=Wt.normal;Jt.node;console.log("e",Wt.string);console.log("n",Jt.string);function oi(){}const wi={};function Io(e,i="info"){if(!Object.prototype.hasOwnProperty.call(wi,e)||wi[e].level!==i){const r=["trace","debug","info","warn","fail"],t=`%c[${e}] `,s=`[${e}] `,n=r.indexOf(i)<=r.indexOf("fail")?console.error.bind(console,t,"color:#ED8784"):oi,o=r.indexOf(i)<=r.indexOf("warn")?console.warn.bind(console,t,"color:#F3D9A2"):oi,l=r.indexOf(i)<=r.indexOf("info")?console.info.bind(console,t,"color:#8CE9FF"):oi,u=r.indexOf(i)<=r.indexOf("debug")?console.log.bind(console,s):oi,a=r.indexOf(i)<=r.indexOf("trace")?console.log.bind(console,s):oi;wi[e]={level:i,fail:n,warn:o,info:l,debug:u,trace:a}}return wi[e]}function Co(e){return Object.entries(e).length===0}function Ao(e){return typeof e=="object"&&!!e.text}function Go(e,i,r){return Object.keys(e).reduce(function(t,s,n){const o=e[s],l=i(o,s,n);return Co(l)||Array.isArray(l)&&l.length===0||!l||(t[s]=l),t},r||{})}let{info:zo,fail:Uo,warn:Vo}=Io("store","info");const Wo=ri(""),Jo=ri(16),dt=ri(!1),_o=ri(null),Bo=ri(e=>""),Qo=ri(e=>e);function Xo(){!Yt(dt)&&es&&Xt(()=>import("./mathlive.min-6070d7bc.js"),[],import.meta.url).then(e=>{dt.set(!0),_o.set(e.MathfieldElement),Qo.set(e.convertLatexToMarkup);const i=/\$\$(.*?)\$\$/g,r=(s,n)=>e.convertLatexToMarkup(n),t=s=>s?Array.isArray(s)?s.map(n=>t(n)):Ao(s)?{...s,html:t(s.text)}:typeof s=="string"?s.replace(i,r):s:"";Bo.set(t)}).catch(e=>{Uo("erreur while importing mathlive",e)})}export{Jo as f,Go as o,Xo as p,Wo as s};
