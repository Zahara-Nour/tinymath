import{D as ji,S as Yi,i as Ki,s as $i,E as Ee,k as G,a as he,l as W,m as j,c as de,h as q,n as T,b as Y,F as J,f as A,g as Ze,t as Q,d as Ae,G as Ne,H as ke,I as Le,J as qs,K as gi,L as vi,M as $e,N as $t,q as et,r as it,O as wn,e as xr,P as Ms,Q as bn,C as qi,R as Ds,T as er,U as yn,o as _n,V as Os,W as Cr,X as Vi,Y as zi,x as fr,y as cr,z as hr,A as dr,Z as Tn,_ as Sn,$ as Fr,a0 as Zr,a1 as En}from"../../chunks/index-bfadf7ea.js";import{w as Ti}from"../../chunks/singletons-04e5f1a0.js";import{_ as Nn}from"../../chunks/preload-helper-41c905a7.js";import{p as kn}from"../../chunks/stores-5577cee3.js";const Vt={};function Ar(e){return e==="local"?localStorage:sessionStorage}function Ps(e,i,t){const r=(t==null?void 0:t.serializer)??JSON,s=(t==null?void 0:t.storage)??"local",n=typeof window<"u"&&typeof document<"u";function l(o,u){n&&Ar(s).setItem(o,r.stringify(u))}if(!Vt[e]){const o=Ti(i,f=>{const c=n?Ar(s).getItem(e):null;if(c&&f(r.parse(c)),n){const d=p=>{p.key===e&&f(p.newValue?r.parse(p.newValue):null)};return window.addEventListener("storage",d),()=>window.removeEventListener("storage",d)}}),{subscribe:u,set:a}=o;Vt[e]={set(f){l(e,f),a(f)},update(f){const c=f(ji(o));l(e,c),a(c)},subscribe:u}}return Vt[e]}const Hr=Ps("storePrefersDarkScheme",!1),Hi=Ps("storeLightSwitch",void 0);function Ln(e,i){let r;const{content:s="(tooltip)",position:n="top",inline:l=!0,regionContainer:o="regionContainer",regionTooltip:u="regionTooltip",regionArrow:a="regionArrow"}=i;(()=>{var b;const m=document.createElement(l?"span":"div");m.classList.add("tooltip-container","relative",o),(b=e.parentNode)==null||b.insertBefore(m,e),m.appendChild(e)})(),(()=>{var m;r=document.createElement("div"),r.classList.add("tooltip",`tooltip-${n}`,"hidden",u),i.background&&r.classList.add(i.background),i.color&&r.classList.add(i.color),i.width&&r.classList.add(i.width),i.padding&&r.classList.add(i.padding),i.shadow&&r.classList.add(i.shadow),i.rounded&&r.classList.add(i.rounded),r.setAttribute("role","tooltip"),r.setAttribute("data-testid","tooltip"),r.innerHTML=s,(m=e.parentNode)==null||m.insertBefore(r,e)})(),(()=>{const m=document.createElement("div");m.classList.add(`tooltip-arrow-${n}`,a),i.background&&m.classList.add(i.background),r.append(m)})();const p=()=>{r.classList.remove("hidden"),setTimeout(()=>{r.classList.add("!opacity-100")},150),g(!0)},w=()=>{r.classList.remove("!opacity-100"),setTimeout(()=>{r.classList.add("hidden")},150),g(!1)},g=m=>{i.state&&i.state({trigger:e,state:m})},h=m=>{m.code==="Escape"&&w()};return e.addEventListener("mouseenter",p),e.addEventListener("mouseleave",w),window.addEventListener("keydown",h),{update(m){i=m},destroy(){e.removeEventListener("mouseenter",p),e.removeEventListener("mouseleave",w),window.removeEventListener("keydown",h)}}}const qn=e=>({}),Rr=e=>({}),Mn=e=>({}),Br=e=>({}),Dn=e=>({}),Ur=e=>({});function Qr(e){let i,t,r;const s=e[22].lead,n=Ee(s,e,e[21],Ur);return{c(){i=G("div"),n&&n.c(),this.h()},l(l){i=W(l,"DIV",{class:!0});var o=j(i);n&&n.l(o),o.forEach(q),this.h()},h(){T(i,"class",t="app-bar-slot-lead "+e[4])},m(l,o){Y(l,i,o),n&&n.m(i,null),r=!0},p(l,o){n&&n.p&&(!r||o&2097152)&&Ne(n,s,l,l[21],r?Le(s,l[21],o,Dn):ke(l[21]),Ur),(!r||o&16&&t!==(t="app-bar-slot-lead "+l[4]))&&T(i,"class",t)},i(l){r||(A(n,l),r=!0)},o(l){Q(n,l),r=!1},d(l){l&&q(i),n&&n.d(l)}}}function jr(e){let i,t,r;const s=e[22].trail,n=Ee(s,e,e[21],Br);return{c(){i=G("div"),n&&n.c(),this.h()},l(l){i=W(l,"DIV",{class:!0});var o=j(i);n&&n.l(o),o.forEach(q),this.h()},h(){T(i,"class",t="app-bar-slot-trail "+e[2])},m(l,o){Y(l,i,o),n&&n.m(i,null),r=!0},p(l,o){n&&n.p&&(!r||o&2097152)&&Ne(n,s,l,l[21],r?Le(s,l[21],o,Mn):ke(l[21]),Br),(!r||o&4&&t!==(t="app-bar-slot-trail "+l[2]))&&T(i,"class",t)},i(l){r||(A(n,l),r=!0)},o(l){Q(n,l),r=!1},d(l){l&&q(i),n&&n.d(l)}}}function Vr(e){let i,t,r;const s=e[22].headline,n=Ee(s,e,e[21],Rr);return{c(){i=G("div"),n&&n.c(),this.h()},l(l){i=W(l,"DIV",{class:!0});var o=j(i);n&&n.l(o),o.forEach(q),this.h()},h(){T(i,"class",t="app-bar-row-headline "+e[5])},m(l,o){Y(l,i,o),n&&n.m(i,null),r=!0},p(l,o){n&&n.p&&(!r||o&2097152)&&Ne(n,s,l,l[21],r?Le(s,l[21],o,qn):ke(l[21]),Rr),(!r||o&32&&t!==(t="app-bar-row-headline "+l[5]))&&T(i,"class",t)},i(l){r||(A(n,l),r=!0)},o(l){Q(n,l),r=!1},d(l){l&&q(i),n&&n.d(l)}}}function On(e){let i,t,r,s,n,l,o,u,a,f,c=e[8].lead&&Qr(e);const d=e[22].default,p=Ee(d,e,e[21],null);let w=e[8].trail&&jr(e),g=e[8].headline&&Vr(e);return{c(){i=G("div"),t=G("div"),c&&c.c(),r=he(),s=G("div"),p&&p.c(),l=he(),w&&w.c(),u=he(),g&&g.c(),this.h()},l(h){i=W(h,"DIV",{class:!0,"data-testid":!0,role:!0,"aria-label":!0,"aria-labelledby":!0});var m=j(i);t=W(m,"DIV",{class:!0});var b=j(t);c&&c.l(b),r=de(b),s=W(b,"DIV",{class:!0});var D=j(s);p&&p.l(D),D.forEach(q),l=de(b),w&&w.l(b),b.forEach(q),u=de(m),g&&g.l(m),m.forEach(q),this.h()},h(){T(s,"class",n="app-bar-slot-default "+e[3]),T(t,"class",o="app-bar-row-main "+e[6]),T(i,"class",a="app-bar "+e[7]),T(i,"data-testid","app-bar"),T(i,"role","toolbar"),T(i,"aria-label",e[0]),T(i,"aria-labelledby",e[1])},m(h,m){Y(h,i,m),J(i,t),c&&c.m(t,null),J(t,r),J(t,s),p&&p.m(s,null),J(t,l),w&&w.m(t,null),J(i,u),g&&g.m(i,null),f=!0},p(h,[m]){h[8].lead?c?(c.p(h,m),m&256&&A(c,1)):(c=Qr(h),c.c(),A(c,1),c.m(t,r)):c&&(Ze(),Q(c,1,1,()=>{c=null}),Ae()),p&&p.p&&(!f||m&2097152)&&Ne(p,d,h,h[21],f?Le(d,h[21],m,null):ke(h[21]),null),(!f||m&8&&n!==(n="app-bar-slot-default "+h[3]))&&T(s,"class",n),h[8].trail?w?(w.p(h,m),m&256&&A(w,1)):(w=jr(h),w.c(),A(w,1),w.m(t,null)):w&&(Ze(),Q(w,1,1,()=>{w=null}),Ae()),(!f||m&64&&o!==(o="app-bar-row-main "+h[6]))&&T(t,"class",o),h[8].headline?g?(g.p(h,m),m&256&&A(g,1)):(g=Vr(h),g.c(),A(g,1),g.m(i,null)):g&&(Ze(),Q(g,1,1,()=>{g=null}),Ae()),(!f||m&128&&a!==(a="app-bar "+h[7]))&&T(i,"class",a),(!f||m&1)&&T(i,"aria-label",h[0]),(!f||m&2)&&T(i,"aria-labelledby",h[1])},i(h){f||(A(c),A(p,h),A(w),A(g),f=!0)},o(h){Q(c),Q(p,h),Q(w),Q(g),f=!1},d(h){h&&q(i),c&&c.d(),p&&p.d(h),w&&w.d(),g&&g.d()}}}const Pn="flex flex-col space-y-4",In="grid items-center",xn="",Cn="flex-none flex justify-between items-center",Fn="flex-auto",Zn="flex-none flex items-center space-x-4";function An(e,i,t){let r,s,n,l,o,u,{$$slots:a={},$$scope:f}=i;const c=qs(a);let{background:d="bg-surface-100-800-token"}=i,{border:p=""}=i,{padding:w="p-4"}=i,{shadow:g=""}=i,{spacing:h="space-y-4"}=i,{gridColumns:m="grid-cols-[auto_1fr_auto]"}=i,{gap:b="gap-4"}=i,{regionRowMain:D=""}=i,{regionRowHeadline:C=""}=i,{slotLead:y=""}=i,{slotDefault:N=""}=i,{slotTrail:k=""}=i,{label:O=""}=i,{labelledby:I=""}=i;return e.$$set=x=>{t(23,i=gi(gi({},i),vi(x))),"background"in x&&t(9,d=x.background),"border"in x&&t(10,p=x.border),"padding"in x&&t(11,w=x.padding),"shadow"in x&&t(12,g=x.shadow),"spacing"in x&&t(13,h=x.spacing),"gridColumns"in x&&t(14,m=x.gridColumns),"gap"in x&&t(15,b=x.gap),"regionRowMain"in x&&t(16,D=x.regionRowMain),"regionRowHeadline"in x&&t(17,C=x.regionRowHeadline),"slotLead"in x&&t(18,y=x.slotLead),"slotDefault"in x&&t(19,N=x.slotDefault),"slotTrail"in x&&t(20,k=x.slotTrail),"label"in x&&t(0,O=x.label),"labelledby"in x&&t(1,I=x.labelledby),"$$scope"in x&&t(21,f=x.$$scope)},e.$$.update=()=>{t(7,r=`${Pn} ${d} ${p} ${h} ${w} ${g} ${i.class??""}`),e.$$.dirty&114688&&t(6,s=`${In} ${m} ${b} ${D}`),e.$$.dirty&131072&&t(5,n=`${xn} ${C}`),e.$$.dirty&262144&&t(4,l=`${Cn} ${y}`),e.$$.dirty&524288&&t(3,o=`${Fn} ${N}`),e.$$.dirty&1048576&&t(2,u=`${Zn} ${k}`)},i=vi(i),[O,I,u,o,l,n,s,r,c,d,p,w,g,h,m,b,D,C,y,N,k,f,a]}class Hn extends Yi{constructor(i){super(),Ki(this,i,An,On,$i,{background:9,border:10,padding:11,shadow:12,spacing:13,gridColumns:14,gap:15,regionRowMain:16,regionRowHeadline:17,slotLead:18,slotDefault:19,slotTrail:20,label:0,labelledby:1})}}const Rn=e=>({}),zr=e=>({}),Bn=e=>({}),Gr=e=>({}),Un=e=>({}),Wr=e=>({}),Qn=e=>({}),Jr=e=>({}),jn=e=>({}),Xr=e=>({}),Vn=e=>({}),Yr=e=>({});function Kr(e){let i,t,r;const s=e[18].header,n=Ee(s,e,e[17],Yr);return{c(){i=G("header"),n&&n.c(),this.h()},l(l){i=W(l,"HEADER",{id:!0,class:!0});var o=j(i);n&&n.l(o),o.forEach(q),this.h()},h(){T(i,"id","shell-header"),T(i,"class",t="flex-none "+e[7])},m(l,o){Y(l,i,o),n&&n.m(i,null),r=!0},p(l,o){n&&n.p&&(!r||o&131072)&&Ne(n,s,l,l[17],r?Le(s,l[17],o,Vn):ke(l[17]),Yr),(!r||o&128&&t!==(t="flex-none "+l[7]))&&T(i,"class",t)},i(l){r||(A(n,l),r=!0)},o(l){Q(n,l),r=!1},d(l){l&&q(i),n&&n.d(l)}}}function $r(e){let i,t;const r=e[18].sidebarLeft,s=Ee(r,e,e[17],Xr);return{c(){i=G("aside"),s&&s.c(),this.h()},l(n){i=W(n,"ASIDE",{id:!0,class:!0});var l=j(i);s&&s.l(l),l.forEach(q),this.h()},h(){T(i,"id","sidebar-left"),T(i,"class",e[6])},m(n,l){Y(n,i,l),s&&s.m(i,null),t=!0},p(n,l){s&&s.p&&(!t||l&131072)&&Ne(s,r,n,n[17],t?Le(r,n[17],l,jn):ke(n[17]),Xr),(!t||l&64)&&T(i,"class",n[6])},i(n){t||(A(s,n),t=!0)},o(n){Q(s,n),t=!1},d(n){n&&q(i),s&&s.d(n)}}}function es(e){let i,t,r;const s=e[18].pageHeader,n=Ee(s,e,e[17],Jr),l=n||zn();return{c(){i=G("header"),l&&l.c(),this.h()},l(o){i=W(o,"HEADER",{id:!0,class:!0});var u=j(i);l&&l.l(u),u.forEach(q),this.h()},h(){T(i,"id","page-header"),T(i,"class",t="flex-none "+e[4])},m(o,u){Y(o,i,u),l&&l.m(i,null),r=!0},p(o,u){n&&n.p&&(!r||u&131072)&&Ne(n,s,o,o[17],r?Le(s,o[17],u,Qn):ke(o[17]),Jr),(!r||u&16&&t!==(t="flex-none "+o[4]))&&T(i,"class",t)},i(o){r||(A(l,o),r=!0)},o(o){Q(l,o),r=!1},d(o){o&&q(i),l&&l.d(o)}}}function zn(e){let i;return{c(){i=et("(slot:header)")},l(t){i=it(t,"(slot:header)")},m(t,r){Y(t,i,r)},d(t){t&&q(i)}}}function is(e){let i,t,r;const s=e[18].pageFooter,n=Ee(s,e,e[17],Wr),l=n||Gn();return{c(){i=G("footer"),l&&l.c(),this.h()},l(o){i=W(o,"FOOTER",{id:!0,class:!0});var u=j(i);l&&l.l(u),u.forEach(q),this.h()},h(){T(i,"id","page-footer"),T(i,"class",t="flex-none "+e[2])},m(o,u){Y(o,i,u),l&&l.m(i,null),r=!0},p(o,u){n&&n.p&&(!r||u&131072)&&Ne(n,s,o,o[17],r?Le(s,o[17],u,Un):ke(o[17]),Wr),(!r||u&4&&t!==(t="flex-none "+o[2]))&&T(i,"class",t)},i(o){r||(A(l,o),r=!0)},o(o){Q(l,o),r=!1},d(o){o&&q(i),l&&l.d(o)}}}function Gn(e){let i;return{c(){i=et("(slot:footer)")},l(t){i=it(t,"(slot:footer)")},m(t,r){Y(t,i,r)},d(t){t&&q(i)}}}function ts(e){let i,t;const r=e[18].sidebarRight,s=Ee(r,e,e[17],Gr);return{c(){i=G("aside"),s&&s.c(),this.h()},l(n){i=W(n,"ASIDE",{id:!0,class:!0});var l=j(i);s&&s.l(l),l.forEach(q),this.h()},h(){T(i,"id","sidebar-right"),T(i,"class",e[5])},m(n,l){Y(n,i,l),s&&s.m(i,null),t=!0},p(n,l){s&&s.p&&(!t||l&131072)&&Ne(s,r,n,n[17],t?Le(r,n[17],l,Bn):ke(n[17]),Gr),(!t||l&32)&&T(i,"class",n[5])},i(n){t||(A(s,n),t=!0)},o(n){Q(s,n),t=!1},d(n){n&&q(i),s&&s.d(n)}}}function rs(e){let i,t,r;const s=e[18].footer,n=Ee(s,e,e[17],zr);return{c(){i=G("footer"),n&&n.c(),this.h()},l(l){i=W(l,"FOOTER",{id:!0,class:!0});var o=j(i);n&&n.l(o),o.forEach(q),this.h()},h(){T(i,"id","shell-footer"),T(i,"class",t="flex-none "+e[1])},m(l,o){Y(l,i,o),n&&n.m(i,null),r=!0},p(l,o){n&&n.p&&(!r||o&131072)&&Ne(n,s,l,l[17],r?Le(s,l[17],o,Rn):ke(l[17]),zr),(!r||o&2&&t!==(t="flex-none "+l[1]))&&T(i,"class",t)},i(l){r||(A(n,l),r=!0)},o(l){Q(n,l),r=!1},d(l){l&&q(i),n&&n.d(l)}}}function Wn(e){let i,t,r,s,n,l,o,u,a,f,c,d,p,w,g,h=e[9].header&&Kr(e),m=e[9].sidebarLeft&&$r(e),b=e[9].pageHeader&&es(e);const D=e[18].default,C=Ee(D,e,e[17],null);let y=e[9].pageFooter&&is(e),N=e[9].sidebarRight&&ts(e),k=e[9].footer&&rs(e);return{c(){i=G("div"),h&&h.c(),t=he(),r=G("div"),m&&m.c(),s=he(),n=G("div"),b&&b.c(),l=he(),o=G("main"),C&&C.c(),a=he(),y&&y.c(),c=he(),N&&N.c(),d=he(),k&&k.c(),this.h()},l(O){i=W(O,"DIV",{id:!0,class:!0,"data-testid":!0});var I=j(i);h&&h.l(I),t=de(I),r=W(I,"DIV",{class:!0});var x=j(r);m&&m.l(x),s=de(x),n=W(x,"DIV",{id:!0,class:!0});var $=j(n);b&&b.l($),l=de($),o=W($,"MAIN",{id:!0,class:!0});var oe=j(o);C&&C.l(oe),oe.forEach(q),a=de($),y&&y.l($),$.forEach(q),c=de(x),N&&N.l(x),x.forEach(q),d=de(I),k&&k.l(I),I.forEach(q),this.h()},h(){T(o,"id","page-content"),T(o,"class",u="flex-auto "+e[3]),T(n,"id","page"),T(n,"class",f=e[0]+" "+ss),T(r,"class","flex-auto "+Xn),T(i,"id","appShell"),T(i,"class",e[8]),T(i,"data-testid","app-shell")},m(O,I){Y(O,i,I),h&&h.m(i,null),J(i,t),J(i,r),m&&m.m(r,null),J(r,s),J(r,n),b&&b.m(n,null),J(n,l),J(n,o),C&&C.m(o,null),J(n,a),y&&y.m(n,null),J(r,c),N&&N.m(r,null),J(i,d),k&&k.m(i,null),p=!0,w||(g=$e(n,"scroll",e[19]),w=!0)},p(O,[I]){O[9].header?h?(h.p(O,I),I&512&&A(h,1)):(h=Kr(O),h.c(),A(h,1),h.m(i,t)):h&&(Ze(),Q(h,1,1,()=>{h=null}),Ae()),O[9].sidebarLeft?m?(m.p(O,I),I&512&&A(m,1)):(m=$r(O),m.c(),A(m,1),m.m(r,s)):m&&(Ze(),Q(m,1,1,()=>{m=null}),Ae()),O[9].pageHeader?b?(b.p(O,I),I&512&&A(b,1)):(b=es(O),b.c(),A(b,1),b.m(n,l)):b&&(Ze(),Q(b,1,1,()=>{b=null}),Ae()),C&&C.p&&(!p||I&131072)&&Ne(C,D,O,O[17],p?Le(D,O[17],I,null):ke(O[17]),null),(!p||I&8&&u!==(u="flex-auto "+O[3]))&&T(o,"class",u),O[9].pageFooter?y?(y.p(O,I),I&512&&A(y,1)):(y=is(O),y.c(),A(y,1),y.m(n,null)):y&&(Ze(),Q(y,1,1,()=>{y=null}),Ae()),(!p||I&1&&f!==(f=O[0]+" "+ss))&&T(n,"class",f),O[9].sidebarRight?N?(N.p(O,I),I&512&&A(N,1)):(N=ts(O),N.c(),A(N,1),N.m(r,null)):N&&(Ze(),Q(N,1,1,()=>{N=null}),Ae()),O[9].footer?k?(k.p(O,I),I&512&&A(k,1)):(k=rs(O),k.c(),A(k,1),k.m(i,null)):k&&(Ze(),Q(k,1,1,()=>{k=null}),Ae()),(!p||I&256)&&T(i,"class",O[8])},i(O){p||(A(h),A(m),A(b),A(C,O),A(y),A(N),A(k),p=!0)},o(O){Q(h),Q(m),Q(b),Q(C,O),Q(y),Q(N),Q(k),p=!1},d(O){O&&q(i),h&&h.d(),m&&m.d(),b&&b.d(),C&&C.d(O),y&&y.d(),N&&N.d(),k&&k.d(),w=!1,g()}}}const Jn="w-full h-full flex flex-col overflow-hidden",Xn="w-full h-full flex overflow-hidden",ss="flex-1 overflow-x-hidden overflow-y-auto flex flex-col",Yn="flex-none overflow-x-hidden overflow-y-auto",Kn="flex-none overflow-x-hidden overflow-y-auto";function $n(e,i,t){let r,s,n,l,o,u,a,f,{$$slots:c={},$$scope:d}=i;const p=qs(c);let{regionPage:w=""}=i,{slotHeader:g="z-10"}=i,{slotSidebarLeft:h="w-auto"}=i,{slotSidebarRight:m="w-auto"}=i,{slotPageHeader:b=""}=i,{slotPageContent:D=""}=i,{slotPageFooter:C=""}=i,{slotFooter:y=""}=i;function N(k){$t.call(this,e,k)}return e.$$set=k=>{t(20,i=gi(gi({},i),vi(k))),"regionPage"in k&&t(0,w=k.regionPage),"slotHeader"in k&&t(10,g=k.slotHeader),"slotSidebarLeft"in k&&t(11,h=k.slotSidebarLeft),"slotSidebarRight"in k&&t(12,m=k.slotSidebarRight),"slotPageHeader"in k&&t(13,b=k.slotPageHeader),"slotPageContent"in k&&t(14,D=k.slotPageContent),"slotPageFooter"in k&&t(15,C=k.slotPageFooter),"slotFooter"in k&&t(16,y=k.slotFooter),"$$scope"in k&&t(17,d=k.$$scope)},e.$$.update=()=>{t(8,r=`${Jn} ${i.class??""}`),e.$$.dirty&1024&&t(7,s=`${g}`),e.$$.dirty&2048&&t(6,n=`${Yn} ${h}`),e.$$.dirty&4096&&t(5,l=`${Kn} ${m}`),e.$$.dirty&8192&&t(4,o=`${b}`),e.$$.dirty&16384&&t(3,u=`${D}`),e.$$.dirty&32768&&t(2,a=`${C}`),e.$$.dirty&65536&&t(1,f=`${y}`)},i=vi(i),[w,f,a,u,o,l,n,s,r,p,g,h,m,b,D,C,y,d,c,N]}class el extends Yi{constructor(i){super(),Ki(this,i,$n,Wn,$i,{regionPage:0,slotHeader:10,slotSidebarLeft:11,slotSidebarRight:12,slotPageHeader:13,slotPageContent:14,slotPageFooter:15,slotFooter:16})}}const{document:zt}=Os;function il(e){let i,t;return{c(){i=Vi("svg"),t=Vi("path"),this.h()},l(r){i=zi(r,"svg",{class:!0,xmlns:!0,viewBox:!0});var s=j(i);t=zi(s,"path",{d:!0}),j(t).forEach(q),s.forEach(q),this.h()},h(){T(t,"d","M223.5 32C100 32 0 132.3 0 256S100 480 223.5 480c60.6 0 115.5-24.2 155.8-63.4c5-4.9 6.3-12.5 3.1-18.7s-10.1-9.7-17-8.5c-9.8 1.7-19.8 2.6-30.1 2.6c-96.9 0-175.5-78.8-175.5-176c0-65.8 36-123.1 89.3-153.3c6.1-3.5 9.2-10.5 7.7-17.3s-7.3-11.9-14.3-12.5c-6.3-.5-12.6-.8-19-.8z"),T(i,"class","lightswitch-icon fill-white "+Is),T(i,"xmlns","http://www.w3.org/2000/svg"),T(i,"viewBox","0 0 384 512")},m(r,s){Y(r,i,s),J(i,t)},p:qi,d(r){r&&q(i)}}}function tl(e){let i,t;return{c(){i=Vi("svg"),t=Vi("path"),this.h()},l(r){i=zi(r,"svg",{class:!0,xmlns:!0,viewBox:!0});var s=j(i);t=zi(s,"path",{d:!0}),j(t).forEach(q),s.forEach(q),this.h()},h(){T(t,"d","M361.5 1.2c5 2.1 8.6 6.6 9.6 11.9L391 121l107.9 19.8c5.3 1 9.8 4.6 11.9 9.6s1.5 10.7-1.6 15.2L446.9 256l62.3 90.3c3.1 4.5 3.7 10.2 1.6 15.2s-6.6 8.6-11.9 9.6L391 391 371.1 498.9c-1 5.3-4.6 9.8-9.6 11.9s-10.7 1.5-15.2-1.6L256 446.9l-90.3 62.3c-4.5 3.1-10.2 3.7-15.2 1.6s-8.6-6.6-9.6-11.9L121 391 13.1 371.1c-5.3-1-9.8-4.6-11.9-9.6s-1.5-10.7 1.6-15.2L65.1 256 2.8 165.7c-3.1-4.5-3.7-10.2-1.6-15.2s6.6-8.6 11.9-9.6L121 121 140.9 13.1c1-5.3 4.6-9.8 9.6-11.9s10.7-1.5 15.2 1.6L256 65.1 346.3 2.8c4.5-3.1 10.2-3.7 15.2-1.6zM352 256c0 53-43 96-96 96s-96-43-96-96s43-96 96-96s96 43 96 96zm32 0c0-70.7-57.3-128-128-128s-128 57.3-128 128s57.3 128 128 128s128-57.3 128-128z"),T(i,"class","lightswitch-icon fill-black "+Is),T(i,"xmlns","http://www.w3.org/2000/svg"),T(i,"viewBox","0 0 512 512")},m(r,s){Y(r,i,s),J(i,t)},p:qi,d(r){r&&q(i)}}}function rl(e){let i,t=`<script>${ll.toString()} setColorScheme();<\/script>`,r,s,n,l,o,u,a,f,c;function d(g,h){return g[0]===!1?tl:il}let p=d(e),w=p(e);return{c(){i=new wn(!1),r=xr(),s=he(),n=G("div"),l=G("div"),w.c(),this.h()},l(g){const h=Ms("svelte-1b2q2h6",zt.head);i=bn(h,!1),r=xr(),h.forEach(q),s=de(g),n=W(g,"DIV",{class:!0,role:!0,"aria-label":!0,"aria-checked":!0,title:!0,tabindex:!0});var m=j(n);l=W(m,"DIV",{class:!0});var b=j(l);w.l(b),b.forEach(q),m.forEach(q),this.h()},h(){i.a=r,T(l,"class",o="lightswitch-thumb "+e[1]),T(n,"class",u="lightswitch "+e[2]),T(n,"role","switch"),T(n,"aria-label","Light Switch"),T(n,"aria-checked",e[0]),T(n,"title",a="Toggle "+(e[0]?"Light":"Dark")+" Mode"),T(n,"tabindex","0")},m(g,h){i.m(t,zt.head),J(zt.head,r),Y(g,s,h),Y(g,n,h),J(n,l),w.m(l,null),f||(c=[$e(n,"click",e[3]),$e(n,"keydown",e[4]),$e(n,"keyup",e[6]),$e(n,"keypress",e[7])],f=!0)},p(g,[h]){p===(p=d(g))&&w?w.p(g,h):(w.d(1),w=p(g),w&&(w.c(),w.m(l,null))),h&2&&o!==(o="lightswitch-thumb "+g[1])&&T(l,"class",o),h&4&&u!==(u="lightswitch "+g[2])&&T(n,"class",u),h&1&&T(n,"aria-checked",g[0]),h&1&&a!==(a="Toggle "+(g[0]?"Light":"Dark")+" Mode")&&T(n,"title",a)},i:qi,o:qi,d(g){q(r),g&&i.d(),g&&q(s),g&&q(n),w.d(),f=!1,Ds(c)}}}const sl="inline-block bg-surface-200-700-token ring-[1px] ring-surface-300-600-token ring-inset w-12 h-6 rounded-full cursor-pointer transition-all duration-[100ms]",nl="bg-white dark:bg-black fill-white dark:fill-black w-6 h-6 flex justify-center items-center rounded-full shadow-lg transition-all duration-[100ms] scale-90",Is="block w-4 h-4";function ll(){localStorage.getItem("storeLightSwitch")==="true"||!("storeLightSwitch"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}function ol(e,i,t){let r,s,n,l,o;er(e,Hi,g=>t(0,l=g)),er(e,Hr,g=>t(8,o=g));const u=yn();function a(){const g=window.matchMedia("(prefers-color-scheme: dark)").matches;Hr.set(g),l===void 0&&Cr(Hi,l=o,l)}function f(){const g=document.documentElement.classList;l?g.add("dark"):g.remove("dark")}function c(g){Hi.set(Cr(Hi,l=!l,l)),f(),u("click",g)}function d(g){["Enter","Space"].includes(g.code)&&(g.preventDefault(),g.currentTarget.click()),u("keydown",g)}_n(()=>{a()});function p(g){$t.call(this,e,g)}function w(g){$t.call(this,e,g)}return e.$$set=g=>{t(12,i=gi(gi({},i),vi(g)))},e.$$.update=()=>{e.$$.dirty&1&&t(5,r=l?"translate-x-full":"translate-x-0"),t(2,s=`${sl} ${i.class??""}`),e.$$.dirty&32&&t(1,n=`${nl} ${r}`)},i=vi(i),[l,n,s,c,d,r,p,w]}class ul extends Yi{constructor(i){super(),Ki(this,i,ol,rl,$i,{})}}/*!
 *  decimal.js v10.4.3
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var hi=9e15,Ge=1e9,ir="0123456789abcdef",Gi="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Wi="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",tr={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-hi,maxE:hi,crypto:!1},xs,Re,Z=!0,tt="[DecimalError] ",ze=tt+"Invalid argument: ",Cs=tt+"Precision limit exceeded",Fs=tt+"crypto unavailable",Zs="[object Decimal]",pe=Math.floor,le=Math.pow,al=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,fl=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,cl=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,As=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Me=1e7,F=7,hl=9007199254740991,dl=Gi.length-1,rr=Wi.length-1,v={toStringTag:Zs};v.absoluteValue=v.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),P(e)};v.ceil=function(){return P(new this.constructor(this),this.e+1,2)};v.clampedTo=v.clamp=function(e,i){var t,r=this,s=r.constructor;if(e=new s(e),i=new s(i),!e.s||!i.s)return new s(NaN);if(e.gt(i))throw Error(ze+i);return t=r.cmp(e),t<0?e:r.cmp(i)>0?i:new s(r)};v.comparedTo=v.cmp=function(e){var i,t,r,s,n=this,l=n.d,o=(e=new n.constructor(e)).d,u=n.s,a=e.s;if(!l||!o)return!u||!a?NaN:u!==a?u:l===o?0:!l^u<0?1:-1;if(!l[0]||!o[0])return l[0]?u:o[0]?-a:0;if(u!==a)return u;if(n.e!==e.e)return n.e>e.e^u<0?1:-1;for(r=l.length,s=o.length,i=0,t=r<s?r:s;i<t;++i)if(l[i]!==o[i])return l[i]>o[i]^u<0?1:-1;return r===s?0:r>s^u<0?1:-1};v.cosine=v.cos=function(){var e,i,t=this,r=t.constructor;return t.d?t.d[0]?(e=r.precision,i=r.rounding,r.precision=e+Math.max(t.e,t.sd())+F,r.rounding=1,t=ml(r,Qs(r,t)),r.precision=e,r.rounding=i,P(Re==2||Re==3?t.neg():t,e,i,!0)):new r(1):new r(NaN)};v.cubeRoot=v.cbrt=function(){var e,i,t,r,s,n,l,o,u,a,f=this,c=f.constructor;if(!f.isFinite()||f.isZero())return new c(f);for(Z=!1,n=f.s*le(f.s*f,1/3),!n||Math.abs(n)==1/0?(t=ce(f.d),e=f.e,(n=(e-t.length+1)%3)&&(t+=n==1||n==-2?"0":"00"),n=le(t,1/3),e=pe((e+1)/3)-(e%3==(e<0?-1:2)),n==1/0?t="5e"+e:(t=n.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new c(t),r.s=f.s):r=new c(n.toString()),l=(e=c.precision)+3;;)if(o=r,u=o.times(o).times(o),a=u.plus(f),r=K(a.plus(f).times(o),a.plus(u),l+2,1),ce(o.d).slice(0,l)===(t=ce(r.d)).slice(0,l))if(t=t.slice(l-3,l+1),t=="9999"||!s&&t=="4999"){if(!s&&(P(o,e+1,0),o.times(o).times(o).eq(f))){r=o;break}l+=4,s=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(P(r,e+1,1),i=!r.times(r).times(r).eq(f));break}return Z=!0,P(r,e,c.rounding,i)};v.decimalPlaces=v.dp=function(){var e,i=this.d,t=NaN;if(i){if(e=i.length-1,t=(e-pe(this.e/F))*F,e=i[e],e)for(;e%10==0;e/=10)t--;t<0&&(t=0)}return t};v.dividedBy=v.div=function(e){return K(this,new this.constructor(e))};v.dividedToIntegerBy=v.divToInt=function(e){var i=this,t=i.constructor;return P(K(i,new t(e),0,1,1),t.precision,t.rounding)};v.equals=v.eq=function(e){return this.cmp(e)===0};v.floor=function(){return P(new this.constructor(this),this.e+1,3)};v.greaterThan=v.gt=function(e){return this.cmp(e)>0};v.greaterThanOrEqualTo=v.gte=function(e){var i=this.cmp(e);return i==1||i===0};v.hyperbolicCosine=v.cosh=function(){var e,i,t,r,s,n=this,l=n.constructor,o=new l(1);if(!n.isFinite())return new l(n.s?1/0:NaN);if(n.isZero())return o;t=l.precision,r=l.rounding,l.precision=t+Math.max(n.e,n.sd())+4,l.rounding=1,s=n.d.length,s<32?(e=Math.ceil(s/3),i=(1/st(4,e)).toString()):(e=16,i="2.3283064365386962890625e-10"),n=wi(l,1,n.times(i),new l(1),!0);for(var u,a=e,f=new l(8);a--;)u=n.times(n),n=o.minus(u.times(f.minus(u.times(f))));return P(n,l.precision=t,l.rounding=r,!0)};v.hyperbolicSine=v.sinh=function(){var e,i,t,r,s=this,n=s.constructor;if(!s.isFinite()||s.isZero())return new n(s);if(i=n.precision,t=n.rounding,n.precision=i+Math.max(s.e,s.sd())+4,n.rounding=1,r=s.d.length,r<3)s=wi(n,2,s,s,!0);else{e=1.4*Math.sqrt(r),e=e>16?16:e|0,s=s.times(1/st(5,e)),s=wi(n,2,s,s,!0);for(var l,o=new n(5),u=new n(16),a=new n(20);e--;)l=s.times(s),s=s.times(o.plus(l.times(u.times(l).plus(a))))}return n.precision=i,n.rounding=t,P(s,i,t,!0)};v.hyperbolicTangent=v.tanh=function(){var e,i,t=this,r=t.constructor;return t.isFinite()?t.isZero()?new r(t):(e=r.precision,i=r.rounding,r.precision=e+7,r.rounding=1,K(t.sinh(),t.cosh(),r.precision=e,r.rounding=i)):new r(t.s)};v.inverseCosine=v.acos=function(){var e,i=this,t=i.constructor,r=i.abs().cmp(1),s=t.precision,n=t.rounding;return r!==-1?r===0?i.isNeg()?qe(t,s,n):new t(0):new t(NaN):i.isZero()?qe(t,s+4,n).times(.5):(t.precision=s+6,t.rounding=1,i=i.asin(),e=qe(t,s+4,n).times(.5),t.precision=s,t.rounding=n,e.minus(i))};v.inverseHyperbolicCosine=v.acosh=function(){var e,i,t=this,r=t.constructor;return t.lte(1)?new r(t.eq(1)?0:NaN):t.isFinite()?(e=r.precision,i=r.rounding,r.precision=e+Math.max(Math.abs(t.e),t.sd())+4,r.rounding=1,Z=!1,t=t.times(t).minus(1).sqrt().plus(t),Z=!0,r.precision=e,r.rounding=i,t.ln()):new r(t)};v.inverseHyperbolicSine=v.asinh=function(){var e,i,t=this,r=t.constructor;return!t.isFinite()||t.isZero()?new r(t):(e=r.precision,i=r.rounding,r.precision=e+2*Math.max(Math.abs(t.e),t.sd())+6,r.rounding=1,Z=!1,t=t.times(t).plus(1).sqrt().plus(t),Z=!0,r.precision=e,r.rounding=i,t.ln())};v.inverseHyperbolicTangent=v.atanh=function(){var e,i,t,r,s=this,n=s.constructor;return s.isFinite()?s.e>=0?new n(s.abs().eq(1)?s.s/0:s.isZero()?s:NaN):(e=n.precision,i=n.rounding,r=s.sd(),Math.max(r,e)<2*-s.e-1?P(new n(s),e,i,!0):(n.precision=t=r-s.e,s=K(s.plus(1),new n(1).minus(s),t+e,1),n.precision=e+4,n.rounding=1,s=s.ln(),n.precision=e,n.rounding=i,s.times(.5))):new n(NaN)};v.inverseSine=v.asin=function(){var e,i,t,r,s=this,n=s.constructor;return s.isZero()?new n(s):(i=s.abs().cmp(1),t=n.precision,r=n.rounding,i!==-1?i===0?(e=qe(n,t+4,r).times(.5),e.s=s.s,e):new n(NaN):(n.precision=t+6,n.rounding=1,s=s.div(new n(1).minus(s.times(s)).sqrt().plus(1)).atan(),n.precision=t,n.rounding=r,s.times(2)))};v.inverseTangent=v.atan=function(){var e,i,t,r,s,n,l,o,u,a=this,f=a.constructor,c=f.precision,d=f.rounding;if(a.isFinite()){if(a.isZero())return new f(a);if(a.abs().eq(1)&&c+4<=rr)return l=qe(f,c+4,d).times(.25),l.s=a.s,l}else{if(!a.s)return new f(NaN);if(c+4<=rr)return l=qe(f,c+4,d).times(.5),l.s=a.s,l}for(f.precision=o=c+10,f.rounding=1,t=Math.min(28,o/F+2|0),e=t;e;--e)a=a.div(a.times(a).plus(1).sqrt().plus(1));for(Z=!1,i=Math.ceil(o/F),r=1,u=a.times(a),l=new f(a),s=a;e!==-1;)if(s=s.times(u),n=l.minus(s.div(r+=2)),s=s.times(u),l=n.plus(s.div(r+=2)),l.d[i]!==void 0)for(e=i;l.d[e]===n.d[e]&&e--;);return t&&(l=l.times(2<<t-1)),Z=!0,P(l,f.precision=c,f.rounding=d,!0)};v.isFinite=function(){return!!this.d};v.isInteger=v.isInt=function(){return!!this.d&&pe(this.e/F)>this.d.length-2};v.isNaN=function(){return!this.s};v.isNegative=v.isNeg=function(){return this.s<0};v.isPositive=v.isPos=function(){return this.s>0};v.isZero=function(){return!!this.d&&this.d[0]===0};v.lessThan=v.lt=function(e){return this.cmp(e)<0};v.lessThanOrEqualTo=v.lte=function(e){return this.cmp(e)<1};v.logarithm=v.log=function(e){var i,t,r,s,n,l,o,u,a=this,f=a.constructor,c=f.precision,d=f.rounding,p=5;if(e==null)e=new f(10),i=!0;else{if(e=new f(e),t=e.d,e.s<0||!t||!t[0]||e.eq(1))return new f(NaN);i=e.eq(10)}if(t=a.d,a.s<0||!t||!t[0]||a.eq(1))return new f(t&&!t[0]?-1/0:a.s!=1?NaN:t?0:1/0);if(i)if(t.length>1)n=!0;else{for(s=t[0];s%10===0;)s/=10;n=s!==1}if(Z=!1,o=c+p,l=Ve(a,o),r=i?Ji(f,o+10):Ve(e,o),u=K(l,r,o,1),Mi(u.d,s=c,d))do if(o+=10,l=Ve(a,o),r=i?Ji(f,o+10):Ve(e,o),u=K(l,r,o,1),!n){+ce(u.d).slice(s+1,s+15)+1==1e14&&(u=P(u,c+1,0));break}while(Mi(u.d,s+=10,d));return Z=!0,P(u,c,d)};v.minus=v.sub=function(e){var i,t,r,s,n,l,o,u,a,f,c,d,p=this,w=p.constructor;if(e=new w(e),!p.d||!e.d)return!p.s||!e.s?e=new w(NaN):p.d?e.s=-e.s:e=new w(e.d||p.s!==e.s?p:NaN),e;if(p.s!=e.s)return e.s=-e.s,p.plus(e);if(a=p.d,d=e.d,o=w.precision,u=w.rounding,!a[0]||!d[0]){if(d[0])e.s=-e.s;else if(a[0])e=new w(p);else return new w(u===3?-0:0);return Z?P(e,o,u):e}if(t=pe(e.e/F),f=pe(p.e/F),a=a.slice(),n=f-t,n){for(c=n<0,c?(i=a,n=-n,l=d.length):(i=d,t=f,l=a.length),r=Math.max(Math.ceil(o/F),l)+2,n>r&&(n=r,i.length=1),i.reverse(),r=n;r--;)i.push(0);i.reverse()}else{for(r=a.length,l=d.length,c=r<l,c&&(l=r),r=0;r<l;r++)if(a[r]!=d[r]){c=a[r]<d[r];break}n=0}for(c&&(i=a,a=d,d=i,e.s=-e.s),l=a.length,r=d.length-l;r>0;--r)a[l++]=0;for(r=d.length;r>n;){if(a[--r]<d[r]){for(s=r;s&&a[--s]===0;)a[s]=Me-1;--a[s],a[r]+=Me}a[r]-=d[r]}for(;a[--l]===0;)a.pop();for(;a[0]===0;a.shift())--t;return a[0]?(e.d=a,e.e=rt(a,t),Z?P(e,o,u):e):new w(u===3?-0:0)};v.modulo=v.mod=function(e){var i,t=this,r=t.constructor;return e=new r(e),!t.d||!e.s||e.d&&!e.d[0]?new r(NaN):!e.d||t.d&&!t.d[0]?P(new r(t),r.precision,r.rounding):(Z=!1,r.modulo==9?(i=K(t,e.abs(),0,3,1),i.s*=e.s):i=K(t,e,0,r.modulo,1),i=i.times(e),Z=!0,t.minus(i))};v.naturalExponential=v.exp=function(){return sr(this)};v.naturalLogarithm=v.ln=function(){return Ve(this)};v.negated=v.neg=function(){var e=new this.constructor(this);return e.s=-e.s,P(e)};v.plus=v.add=function(e){var i,t,r,s,n,l,o,u,a,f,c=this,d=c.constructor;if(e=new d(e),!c.d||!e.d)return!c.s||!e.s?e=new d(NaN):c.d||(e=new d(e.d||c.s===e.s?c:NaN)),e;if(c.s!=e.s)return e.s=-e.s,c.minus(e);if(a=c.d,f=e.d,o=d.precision,u=d.rounding,!a[0]||!f[0])return f[0]||(e=new d(c)),Z?P(e,o,u):e;if(n=pe(c.e/F),r=pe(e.e/F),a=a.slice(),s=n-r,s){for(s<0?(t=a,s=-s,l=f.length):(t=f,r=n,l=a.length),n=Math.ceil(o/F),l=n>l?n+1:l+1,s>l&&(s=l,t.length=1),t.reverse();s--;)t.push(0);t.reverse()}for(l=a.length,s=f.length,l-s<0&&(s=l,t=f,f=a,a=t),i=0;s;)i=(a[--s]=a[s]+f[s]+i)/Me|0,a[s]%=Me;for(i&&(a.unshift(i),++r),l=a.length;a[--l]==0;)a.pop();return e.d=a,e.e=rt(a,r),Z?P(e,o,u):e};v.precision=v.sd=function(e){var i,t=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(ze+e);return t.d?(i=Hs(t.d),e&&t.e+1>i&&(i=t.e+1)):i=NaN,i};v.round=function(){var e=this,i=e.constructor;return P(new i(e),e.e+1,i.rounding)};v.sine=v.sin=function(){var e,i,t=this,r=t.constructor;return t.isFinite()?t.isZero()?new r(t):(e=r.precision,i=r.rounding,r.precision=e+Math.max(t.e,t.sd())+F,r.rounding=1,t=gl(r,Qs(r,t)),r.precision=e,r.rounding=i,P(Re>2?t.neg():t,e,i,!0)):new r(NaN)};v.squareRoot=v.sqrt=function(){var e,i,t,r,s,n,l=this,o=l.d,u=l.e,a=l.s,f=l.constructor;if(a!==1||!o||!o[0])return new f(!a||a<0&&(!o||o[0])?NaN:o?l:1/0);for(Z=!1,a=Math.sqrt(+l),a==0||a==1/0?(i=ce(o),(i.length+u)%2==0&&(i+="0"),a=Math.sqrt(i),u=pe((u+1)/2)-(u<0||u%2),a==1/0?i="5e"+u:(i=a.toExponential(),i=i.slice(0,i.indexOf("e")+1)+u),r=new f(i)):r=new f(a.toString()),t=(u=f.precision)+3;;)if(n=r,r=n.plus(K(l,n,t+2,1)).times(.5),ce(n.d).slice(0,t)===(i=ce(r.d)).slice(0,t))if(i=i.slice(t-3,t+1),i=="9999"||!s&&i=="4999"){if(!s&&(P(n,u+1,0),n.times(n).eq(l))){r=n;break}t+=4,s=1}else{(!+i||!+i.slice(1)&&i.charAt(0)=="5")&&(P(r,u+1,1),e=!r.times(r).eq(l));break}return Z=!0,P(r,u,f.rounding,e)};v.tangent=v.tan=function(){var e,i,t=this,r=t.constructor;return t.isFinite()?t.isZero()?new r(t):(e=r.precision,i=r.rounding,r.precision=e+10,r.rounding=1,t=t.sin(),t.s=1,t=K(t,new r(1).minus(t.times(t)).sqrt(),e+10,0),r.precision=e,r.rounding=i,P(Re==2||Re==4?t.neg():t,e,i,!0)):new r(NaN)};v.times=v.mul=function(e){var i,t,r,s,n,l,o,u,a,f=this,c=f.constructor,d=f.d,p=(e=new c(e)).d;if(e.s*=f.s,!d||!d[0]||!p||!p[0])return new c(!e.s||d&&!d[0]&&!p||p&&!p[0]&&!d?NaN:!d||!p?e.s/0:e.s*0);for(t=pe(f.e/F)+pe(e.e/F),u=d.length,a=p.length,u<a&&(n=d,d=p,p=n,l=u,u=a,a=l),n=[],l=u+a,r=l;r--;)n.push(0);for(r=a;--r>=0;){for(i=0,s=u+r;s>r;)o=n[s]+p[r]*d[s-r-1]+i,n[s--]=o%Me|0,i=o/Me|0;n[s]=(n[s]+i)%Me|0}for(;!n[--l];)n.pop();return i?++t:n.shift(),e.d=n,e.e=rt(n,t),Z?P(e,c.precision,c.rounding):e};v.toBinary=function(e,i){return mr(this,2,e,i)};v.toDecimalPlaces=v.toDP=function(e,i){var t=this,r=t.constructor;return t=new r(t),e===void 0?t:(ve(e,0,Ge),i===void 0?i=r.rounding:ve(i,0,8),P(t,e+t.e+1,i))};v.toExponential=function(e,i){var t,r=this,s=r.constructor;return e===void 0?t=Fe(r,!0):(ve(e,0,Ge),i===void 0?i=s.rounding:ve(i,0,8),r=P(new s(r),e+1,i),t=Fe(r,!0,e+1)),r.isNeg()&&!r.isZero()?"-"+t:t};v.toFixed=function(e,i){var t,r,s=this,n=s.constructor;return e===void 0?t=Fe(s):(ve(e,0,Ge),i===void 0?i=n.rounding:ve(i,0,8),r=P(new n(s),e+s.e+1,i),t=Fe(r,!1,e+r.e+1)),s.isNeg()&&!s.isZero()?"-"+t:t};v.toFraction=function(e){var i,t,r,s,n,l,o,u,a,f,c,d,p=this,w=p.d,g=p.constructor;if(!w)return new g(p);if(a=t=new g(1),r=u=new g(0),i=new g(r),n=i.e=Hs(w)-p.e-1,l=n%F,i.d[0]=le(10,l<0?F+l:l),e==null)e=n>0?i:a;else{if(o=new g(e),!o.isInt()||o.lt(a))throw Error(ze+o);e=o.gt(i)?n>0?i:a:o}for(Z=!1,o=new g(ce(w)),f=g.precision,g.precision=n=w.length*F*2;c=K(o,i,0,1,1),s=t.plus(c.times(r)),s.cmp(e)!=1;)t=r,r=s,s=a,a=u.plus(c.times(s)),u=s,s=i,i=o.minus(c.times(s)),o=s;return s=K(e.minus(t),r,0,1,1),u=u.plus(s.times(a)),t=t.plus(s.times(r)),u.s=a.s=p.s,d=K(a,r,n,1).minus(p).abs().cmp(K(u,t,n,1).minus(p).abs())<1?[a,r]:[u,t],g.precision=f,Z=!0,d};v.toHexadecimal=v.toHex=function(e,i){return mr(this,16,e,i)};v.toNearest=function(e,i){var t=this,r=t.constructor;if(t=new r(t),e==null){if(!t.d)return t;e=new r(1),i=r.rounding}else{if(e=new r(e),i===void 0?i=r.rounding:ve(i,0,8),!t.d)return e.s?t:e;if(!e.d)return e.s&&(e.s=t.s),e}return e.d[0]?(Z=!1,t=K(t,e,0,i,1).times(e),Z=!0,P(t)):(e.s=t.s,t=e),t};v.toNumber=function(){return+this};v.toOctal=function(e,i){return mr(this,8,e,i)};v.toPower=v.pow=function(e){var i,t,r,s,n,l,o=this,u=o.constructor,a=+(e=new u(e));if(!o.d||!e.d||!o.d[0]||!e.d[0])return new u(le(+o,a));if(o=new u(o),o.eq(1))return o;if(r=u.precision,n=u.rounding,e.eq(1))return P(o,r,n);if(i=pe(e.e/F),i>=e.d.length-1&&(t=a<0?-a:a)<=hl)return s=Rs(u,o,t,r),e.s<0?new u(1).div(s):P(s,r,n);if(l=o.s,l<0){if(i<e.d.length-1)return new u(NaN);if(e.d[i]&1||(l=1),o.e==0&&o.d[0]==1&&o.d.length==1)return o.s=l,o}return t=le(+o,a),i=t==0||!isFinite(t)?pe(a*(Math.log("0."+ce(o.d))/Math.LN10+o.e+1)):new u(t+"").e,i>u.maxE+1||i<u.minE-1?new u(i>0?l/0:0):(Z=!1,u.rounding=o.s=1,t=Math.min(12,(i+"").length),s=sr(e.times(Ve(o,r+t)),r),s.d&&(s=P(s,r+5,1),Mi(s.d,r,n)&&(i=r+10,s=P(sr(e.times(Ve(o,i+t)),i),i+5,1),+ce(s.d).slice(r+1,r+15)+1==1e14&&(s=P(s,r+1,0)))),s.s=l,Z=!0,u.rounding=n,P(s,r,n))};v.toPrecision=function(e,i){var t,r=this,s=r.constructor;return e===void 0?t=Fe(r,r.e<=s.toExpNeg||r.e>=s.toExpPos):(ve(e,1,Ge),i===void 0?i=s.rounding:ve(i,0,8),r=P(new s(r),e,i),t=Fe(r,e<=r.e||r.e<=s.toExpNeg,e)),r.isNeg()&&!r.isZero()?"-"+t:t};v.toSignificantDigits=v.toSD=function(e,i){var t=this,r=t.constructor;return e===void 0?(e=r.precision,i=r.rounding):(ve(e,1,Ge),i===void 0?i=r.rounding:ve(i,0,8)),P(new r(t),e,i)};v.toString=function(){var e=this,i=e.constructor,t=Fe(e,e.e<=i.toExpNeg||e.e>=i.toExpPos);return e.isNeg()&&!e.isZero()?"-"+t:t};v.truncated=v.trunc=function(){return P(new this.constructor(this),this.e+1,1)};v.valueOf=v.toJSON=function(){var e=this,i=e.constructor,t=Fe(e,e.e<=i.toExpNeg||e.e>=i.toExpPos);return e.isNeg()?"-"+t:t};function ce(e){var i,t,r,s=e.length-1,n="",l=e[0];if(s>0){for(n+=l,i=1;i<s;i++)r=e[i]+"",t=F-r.length,t&&(n+=je(t)),n+=r;l=e[i],r=l+"",t=F-r.length,t&&(n+=je(t))}else if(l===0)return"0";for(;l%10===0;)l/=10;return n+l}function ve(e,i,t){if(e!==~~e||e<i||e>t)throw Error(ze+e)}function Mi(e,i,t,r){var s,n,l,o;for(n=e[0];n>=10;n/=10)--i;return--i<0?(i+=F,s=0):(s=Math.ceil((i+1)/F),i%=F),n=le(10,F-i),o=e[s]%n|0,r==null?i<3?(i==0?o=o/100|0:i==1&&(o=o/10|0),l=t<4&&o==99999||t>3&&o==49999||o==5e4||o==0):l=(t<4&&o+1==n||t>3&&o+1==n/2)&&(e[s+1]/n/100|0)==le(10,i-2)-1||(o==n/2||o==0)&&(e[s+1]/n/100|0)==0:i<4?(i==0?o=o/1e3|0:i==1?o=o/100|0:i==2&&(o=o/10|0),l=(r||t<4)&&o==9999||!r&&t>3&&o==4999):l=((r||t<4)&&o+1==n||!r&&t>3&&o+1==n/2)&&(e[s+1]/n/1e3|0)==le(10,i-3)-1,l}function Ui(e,i,t){for(var r,s=[0],n,l=0,o=e.length;l<o;){for(n=s.length;n--;)s[n]*=i;for(s[0]+=ir.indexOf(e.charAt(l++)),r=0;r<s.length;r++)s[r]>t-1&&(s[r+1]===void 0&&(s[r+1]=0),s[r+1]+=s[r]/t|0,s[r]%=t)}return s.reverse()}function ml(e,i){var t,r,s;if(i.isZero())return i;r=i.d.length,r<32?(t=Math.ceil(r/3),s=(1/st(4,t)).toString()):(t=16,s="2.3283064365386962890625e-10"),e.precision+=t,i=wi(e,1,i.times(s),new e(1));for(var n=t;n--;){var l=i.times(i);i=l.times(l).minus(l).times(8).plus(1)}return e.precision-=t,i}var K=function(){function e(r,s,n){var l,o=0,u=r.length;for(r=r.slice();u--;)l=r[u]*s+o,r[u]=l%n|0,o=l/n|0;return o&&r.unshift(o),r}function i(r,s,n,l){var o,u;if(n!=l)u=n>l?1:-1;else for(o=u=0;o<n;o++)if(r[o]!=s[o]){u=r[o]>s[o]?1:-1;break}return u}function t(r,s,n,l){for(var o=0;n--;)r[n]-=o,o=r[n]<s[n]?1:0,r[n]=o*l+r[n]-s[n];for(;!r[0]&&r.length>1;)r.shift()}return function(r,s,n,l,o,u){var a,f,c,d,p,w,g,h,m,b,D,C,y,N,k,O,I,x,$,oe,We=r.constructor,ai=r.s==s.s?1:-1,te=r.d,ee=s.d;if(!te||!te[0]||!ee||!ee[0])return new We(!r.s||!s.s||(te?ee&&te[0]==ee[0]:!ee)?NaN:te&&te[0]==0||!ee?ai*0:ai/0);for(u?(p=1,f=r.e-s.e):(u=Me,p=F,f=pe(r.e/p)-pe(s.e/p)),$=ee.length,I=te.length,m=new We(ai),b=m.d=[],c=0;ee[c]==(te[c]||0);c++);if(ee[c]>(te[c]||0)&&f--,n==null?(N=n=We.precision,l=We.rounding):o?N=n+(r.e-s.e)+1:N=n,N<0)b.push(1),w=!0;else{if(N=N/p+2|0,c=0,$==1){for(d=0,ee=ee[0],N++;(c<I||d)&&N--;c++)k=d*u+(te[c]||0),b[c]=k/ee|0,d=k%ee|0;w=d||c<I}else{for(d=u/(ee[0]+1)|0,d>1&&(ee=e(ee,d,u),te=e(te,d,u),$=ee.length,I=te.length),O=$,D=te.slice(0,$),C=D.length;C<$;)D[C++]=0;oe=ee.slice(),oe.unshift(0),x=ee[0],ee[1]>=u/2&&++x;do d=0,a=i(ee,D,$,C),a<0?(y=D[0],$!=C&&(y=y*u+(D[1]||0)),d=y/x|0,d>1?(d>=u&&(d=u-1),g=e(ee,d,u),h=g.length,C=D.length,a=i(g,D,h,C),a==1&&(d--,t(g,$<h?oe:ee,h,u))):(d==0&&(a=d=1),g=ee.slice()),h=g.length,h<C&&g.unshift(0),t(D,g,C,u),a==-1&&(C=D.length,a=i(ee,D,$,C),a<1&&(d++,t(D,$<C?oe:ee,C,u))),C=D.length):a===0&&(d++,D=[0]),b[c++]=d,a&&D[0]?D[C++]=te[O]||0:(D=[te[O]],C=1);while((O++<I||D[0]!==void 0)&&N--);w=D[0]!==void 0}b[0]||b.shift()}if(p==1)m.e=f,xs=w;else{for(c=1,d=b[0];d>=10;d/=10)c++;m.e=c+f*p-1,P(m,o?n+m.e+1:n,l,w)}return m}}();function P(e,i,t,r){var s,n,l,o,u,a,f,c,d,p=e.constructor;e:if(i!=null){if(c=e.d,!c)return e;for(s=1,o=c[0];o>=10;o/=10)s++;if(n=i-s,n<0)n+=F,l=i,f=c[d=0],u=f/le(10,s-l-1)%10|0;else if(d=Math.ceil((n+1)/F),o=c.length,d>=o)if(r){for(;o++<=d;)c.push(0);f=u=0,s=1,n%=F,l=n-F+1}else break e;else{for(f=o=c[d],s=1;o>=10;o/=10)s++;n%=F,l=n-F+s,u=l<0?0:f/le(10,s-l-1)%10|0}if(r=r||i<0||c[d+1]!==void 0||(l<0?f:f%le(10,s-l-1)),a=t<4?(u||r)&&(t==0||t==(e.s<0?3:2)):u>5||u==5&&(t==4||r||t==6&&(n>0?l>0?f/le(10,s-l):0:c[d-1])%10&1||t==(e.s<0?8:7)),i<1||!c[0])return c.length=0,a?(i-=e.e+1,c[0]=le(10,(F-i%F)%F),e.e=-i||0):c[0]=e.e=0,e;if(n==0?(c.length=d,o=1,d--):(c.length=d+1,o=le(10,F-n),c[d]=l>0?(f/le(10,s-l)%le(10,l)|0)*o:0),a)for(;;)if(d==0){for(n=1,l=c[0];l>=10;l/=10)n++;for(l=c[0]+=o,o=1;l>=10;l/=10)o++;n!=o&&(e.e++,c[0]==Me&&(c[0]=1));break}else{if(c[d]+=o,c[d]!=Me)break;c[d--]=0,o=1}for(n=c.length;c[--n]===0;)c.pop()}return Z&&(e.e>p.maxE?(e.d=null,e.e=NaN):e.e<p.minE&&(e.e=0,e.d=[0])),e}function Fe(e,i,t){if(!e.isFinite())return Us(e);var r,s=e.e,n=ce(e.d),l=n.length;return i?(t&&(r=t-l)>0?n=n.charAt(0)+"."+n.slice(1)+je(r):l>1&&(n=n.charAt(0)+"."+n.slice(1)),n=n+(e.e<0?"e":"e+")+e.e):s<0?(n="0."+je(-s-1)+n,t&&(r=t-l)>0&&(n+=je(r))):s>=l?(n+=je(s+1-l),t&&(r=t-s-1)>0&&(n=n+"."+je(r))):((r=s+1)<l&&(n=n.slice(0,r)+"."+n.slice(r)),t&&(r=t-l)>0&&(s+1===l&&(n+="."),n+=je(r))),n}function rt(e,i){var t=e[0];for(i*=F;t>=10;t/=10)i++;return i}function Ji(e,i,t){if(i>dl)throw Z=!0,t&&(e.precision=t),Error(Cs);return P(new e(Gi),i,1,!0)}function qe(e,i,t){if(i>rr)throw Error(Cs);return P(new e(Wi),i,t,!0)}function Hs(e){var i=e.length-1,t=i*F+1;if(i=e[i],i){for(;i%10==0;i/=10)t--;for(i=e[0];i>=10;i/=10)t++}return t}function je(e){for(var i="";e--;)i+="0";return i}function Rs(e,i,t,r){var s,n=new e(1),l=Math.ceil(r/F+4);for(Z=!1;;){if(t%2&&(n=n.times(i),ls(n.d,l)&&(s=!0)),t=pe(t/2),t===0){t=n.d.length-1,s&&n.d[t]===0&&++n.d[t];break}i=i.times(i),ls(i.d,l)}return Z=!0,n}function ns(e){return e.d[e.d.length-1]&1}function Bs(e,i,t){for(var r,s=new e(i[0]),n=0;++n<i.length;)if(r=new e(i[n]),r.s)s[t](r)&&(s=r);else{s=r;break}return s}function sr(e,i){var t,r,s,n,l,o,u,a=0,f=0,c=0,d=e.constructor,p=d.rounding,w=d.precision;if(!e.d||!e.d[0]||e.e>17)return new d(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:0/0);for(i==null?(Z=!1,u=w):u=i,o=new d(.03125);e.e>-2;)e=e.times(o),c+=5;for(r=Math.log(le(2,c))/Math.LN10*2+5|0,u+=r,t=n=l=new d(1),d.precision=u;;){if(n=P(n.times(e),u,1),t=t.times(++f),o=l.plus(K(n,t,u,1)),ce(o.d).slice(0,u)===ce(l.d).slice(0,u)){for(s=c;s--;)l=P(l.times(l),u,1);if(i==null)if(a<3&&Mi(l.d,u-r,p,a))d.precision=u+=10,t=n=o=new d(1),f=0,a++;else return P(l,d.precision=w,p,Z=!0);else return d.precision=w,l}l=o}}function Ve(e,i){var t,r,s,n,l,o,u,a,f,c,d,p=1,w=10,g=e,h=g.d,m=g.constructor,b=m.rounding,D=m.precision;if(g.s<0||!h||!h[0]||!g.e&&h[0]==1&&h.length==1)return new m(h&&!h[0]?-1/0:g.s!=1?NaN:h?0:g);if(i==null?(Z=!1,f=D):f=i,m.precision=f+=w,t=ce(h),r=t.charAt(0),Math.abs(n=g.e)<15e14){for(;r<7&&r!=1||r==1&&t.charAt(1)>3;)g=g.times(e),t=ce(g.d),r=t.charAt(0),p++;n=g.e,r>1?(g=new m("0."+t),n++):g=new m(r+"."+t.slice(1))}else return a=Ji(m,f+2,D).times(n+""),g=Ve(new m(r+"."+t.slice(1)),f-w).plus(a),m.precision=D,i==null?P(g,D,b,Z=!0):g;for(c=g,u=l=g=K(g.minus(1),g.plus(1),f,1),d=P(g.times(g),f,1),s=3;;){if(l=P(l.times(d),f,1),a=u.plus(K(l,new m(s),f,1)),ce(a.d).slice(0,f)===ce(u.d).slice(0,f))if(u=u.times(2),n!==0&&(u=u.plus(Ji(m,f+2,D).times(n+""))),u=K(u,new m(p),f,1),i==null)if(Mi(u.d,f-w,b,o))m.precision=f+=w,a=l=g=K(c.minus(1),c.plus(1),f,1),d=P(g.times(g),f,1),s=o=1;else return P(u,m.precision=D,b,Z=!0);else return m.precision=D,u;u=a,s+=2}}function Us(e){return String(e.s*e.s/0)}function nr(e,i){var t,r,s;for((t=i.indexOf("."))>-1&&(i=i.replace(".","")),(r=i.search(/e/i))>0?(t<0&&(t=r),t+=+i.slice(r+1),i=i.substring(0,r)):t<0&&(t=i.length),r=0;i.charCodeAt(r)===48;r++);for(s=i.length;i.charCodeAt(s-1)===48;--s);if(i=i.slice(r,s),i){if(s-=r,e.e=t=t-r-1,e.d=[],r=(t+1)%F,t<0&&(r+=F),r<s){for(r&&e.d.push(+i.slice(0,r)),s-=F;r<s;)e.d.push(+i.slice(r,r+=F));i=i.slice(r),r=F-i.length}else r-=s;for(;r--;)i+="0";e.d.push(+i),Z&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function pl(e,i){var t,r,s,n,l,o,u,a,f;if(i.indexOf("_")>-1){if(i=i.replace(/(\d)_(?=\d)/g,"$1"),As.test(i))return nr(e,i)}else if(i==="Infinity"||i==="NaN")return+i||(e.s=NaN),e.e=NaN,e.d=null,e;if(fl.test(i))t=16,i=i.toLowerCase();else if(al.test(i))t=2;else if(cl.test(i))t=8;else throw Error(ze+i);for(n=i.search(/p/i),n>0?(u=+i.slice(n+1),i=i.substring(2,n)):i=i.slice(2),n=i.indexOf("."),l=n>=0,r=e.constructor,l&&(i=i.replace(".",""),o=i.length,n=o-n,s=Rs(r,new r(t),n,n*2)),a=Ui(i,t,Me),f=a.length-1,n=f;a[n]===0;--n)a.pop();return n<0?new r(e.s*0):(e.e=rt(a,f),e.d=a,Z=!1,l&&(e=K(e,s,o*4)),u&&(e=e.times(Math.abs(u)<54?le(2,u):ie.pow(2,u))),Z=!0,e)}function gl(e,i){var t,r=i.d.length;if(r<3)return i.isZero()?i:wi(e,2,i,i);t=1.4*Math.sqrt(r),t=t>16?16:t|0,i=i.times(1/st(5,t)),i=wi(e,2,i,i);for(var s,n=new e(5),l=new e(16),o=new e(20);t--;)s=i.times(i),i=i.times(n.plus(s.times(l.times(s).minus(o))));return i}function wi(e,i,t,r,s){var n,l,o,u,a=e.precision,f=Math.ceil(a/F);for(Z=!1,u=t.times(t),o=new e(r);;){if(l=K(o.times(u),new e(i++*i++),a,1),o=s?r.plus(l):r.minus(l),r=K(l.times(u),new e(i++*i++),a,1),l=o.plus(r),l.d[f]!==void 0){for(n=f;l.d[n]===o.d[n]&&n--;);if(n==-1)break}n=o,o=r,r=l,l=n}return Z=!0,l.d.length=f+1,l}function st(e,i){for(var t=e;--i;)t*=e;return t}function Qs(e,i){var t,r=i.s<0,s=qe(e,e.precision,1),n=s.times(.5);if(i=i.abs(),i.lte(n))return Re=r?4:1,i;if(t=i.divToInt(s),t.isZero())Re=r?3:2;else{if(i=i.minus(t.times(s)),i.lte(n))return Re=ns(t)?r?2:3:r?4:1,i;Re=ns(t)?r?1:4:r?3:2}return i.minus(s).abs()}function mr(e,i,t,r){var s,n,l,o,u,a,f,c,d,p=e.constructor,w=t!==void 0;if(w?(ve(t,1,Ge),r===void 0?r=p.rounding:ve(r,0,8)):(t=p.precision,r=p.rounding),!e.isFinite())f=Us(e);else{for(f=Fe(e),l=f.indexOf("."),w?(s=2,i==16?t=t*4-3:i==8&&(t=t*3-2)):s=i,l>=0&&(f=f.replace(".",""),d=new p(1),d.e=f.length-l,d.d=Ui(Fe(d),10,s),d.e=d.d.length),c=Ui(f,10,s),n=u=c.length;c[--u]==0;)c.pop();if(!c[0])f=w?"0p+0":"0";else{if(l<0?n--:(e=new p(e),e.d=c,e.e=n,e=K(e,d,t,r,0,s),c=e.d,n=e.e,a=xs),l=c[t],o=s/2,a=a||c[t+1]!==void 0,a=r<4?(l!==void 0||a)&&(r===0||r===(e.s<0?3:2)):l>o||l===o&&(r===4||a||r===6&&c[t-1]&1||r===(e.s<0?8:7)),c.length=t,a)for(;++c[--t]>s-1;)c[t]=0,t||(++n,c.unshift(1));for(u=c.length;!c[u-1];--u);for(l=0,f="";l<u;l++)f+=ir.charAt(c[l]);if(w){if(u>1)if(i==16||i==8){for(l=i==16?4:3,--u;u%l;u++)f+="0";for(c=Ui(f,s,i),u=c.length;!c[u-1];--u);for(l=1,f="1.";l<u;l++)f+=ir.charAt(c[l])}else f=f.charAt(0)+"."+f.slice(1);f=f+(n<0?"p":"p+")+n}else if(n<0){for(;++n;)f="0"+f;f="0."+f}else if(++n>u)for(n-=u;n--;)f+="0";else n<u&&(f=f.slice(0,n)+"."+f.slice(n))}f=(i==16?"0x":i==2?"0b":i==8?"0o":"")+f}return e.s<0?"-"+f:f}function ls(e,i){if(e.length>i)return e.length=i,!0}function vl(e){return new this(e).abs()}function wl(e){return new this(e).acos()}function bl(e){return new this(e).acosh()}function yl(e,i){return new this(e).plus(i)}function _l(e){return new this(e).asin()}function Tl(e){return new this(e).asinh()}function Sl(e){return new this(e).atan()}function El(e){return new this(e).atanh()}function Nl(e,i){e=new this(e),i=new this(i);var t,r=this.precision,s=this.rounding,n=r+4;return!e.s||!i.s?t=new this(NaN):!e.d&&!i.d?(t=qe(this,n,1).times(i.s>0?.25:.75),t.s=e.s):!i.d||e.isZero()?(t=i.s<0?qe(this,r,s):new this(0),t.s=e.s):!e.d||i.isZero()?(t=qe(this,n,1).times(.5),t.s=e.s):i.s<0?(this.precision=n,this.rounding=1,t=this.atan(K(e,i,n,1)),i=qe(this,n,1),this.precision=r,this.rounding=s,t=e.s<0?t.minus(i):t.plus(i)):t=this.atan(K(e,i,n,1)),t}function kl(e){return new this(e).cbrt()}function Ll(e){return P(e=new this(e),e.e+1,2)}function ql(e,i,t){return new this(e).clamp(i,t)}function Ml(e){if(!e||typeof e!="object")throw Error(tt+"Object expected");var i,t,r,s=e.defaults===!0,n=["precision",1,Ge,"rounding",0,8,"toExpNeg",-hi,0,"toExpPos",0,hi,"maxE",0,hi,"minE",-hi,0,"modulo",0,9];for(i=0;i<n.length;i+=3)if(t=n[i],s&&(this[t]=tr[t]),(r=e[t])!==void 0)if(pe(r)===r&&r>=n[i+1]&&r<=n[i+2])this[t]=r;else throw Error(ze+t+": "+r);if(t="crypto",s&&(this[t]=tr[t]),(r=e[t])!==void 0)if(r===!0||r===!1||r===0||r===1)if(r)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[t]=!0;else throw Error(Fs);else this[t]=!1;else throw Error(ze+t+": "+r);return this}function Dl(e){return new this(e).cos()}function Ol(e){return new this(e).cosh()}function js(e){var i,t,r;function s(n){var l,o,u,a=this;if(!(a instanceof s))return new s(n);if(a.constructor=s,os(n)){a.s=n.s,Z?!n.d||n.e>s.maxE?(a.e=NaN,a.d=null):n.e<s.minE?(a.e=0,a.d=[0]):(a.e=n.e,a.d=n.d.slice()):(a.e=n.e,a.d=n.d?n.d.slice():n.d);return}if(u=typeof n,u==="number"){if(n===0){a.s=1/n<0?-1:1,a.e=0,a.d=[0];return}if(n<0?(n=-n,a.s=-1):a.s=1,n===~~n&&n<1e7){for(l=0,o=n;o>=10;o/=10)l++;Z?l>s.maxE?(a.e=NaN,a.d=null):l<s.minE?(a.e=0,a.d=[0]):(a.e=l,a.d=[n]):(a.e=l,a.d=[n]);return}else if(n*0!==0){n||(a.s=NaN),a.e=NaN,a.d=null;return}return nr(a,n.toString())}else if(u!=="string")throw Error(ze+n);return(o=n.charCodeAt(0))===45?(n=n.slice(1),a.s=-1):(o===43&&(n=n.slice(1)),a.s=1),As.test(n)?nr(a,n):pl(a,n)}if(s.prototype=v,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.EUCLID=9,s.config=s.set=Ml,s.clone=js,s.isDecimal=os,s.abs=vl,s.acos=wl,s.acosh=bl,s.add=yl,s.asin=_l,s.asinh=Tl,s.atan=Sl,s.atanh=El,s.atan2=Nl,s.cbrt=kl,s.ceil=Ll,s.clamp=ql,s.cos=Dl,s.cosh=Ol,s.div=Pl,s.exp=Il,s.floor=xl,s.hypot=Cl,s.ln=Fl,s.log=Zl,s.log10=Hl,s.log2=Al,s.max=Rl,s.min=Bl,s.mod=Ul,s.mul=Ql,s.pow=jl,s.random=Vl,s.round=zl,s.sign=Gl,s.sin=Wl,s.sinh=Jl,s.sqrt=Xl,s.sub=Yl,s.sum=Kl,s.tan=$l,s.tanh=eo,s.trunc=io,e===void 0&&(e={}),e&&e.defaults!==!0)for(r=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],i=0;i<r.length;)e.hasOwnProperty(t=r[i++])||(e[t]=this[t]);return s.config(e),s}function Pl(e,i){return new this(e).div(i)}function Il(e){return new this(e).exp()}function xl(e){return P(e=new this(e),e.e+1,3)}function Cl(){var e,i,t=new this(0);for(Z=!1,e=0;e<arguments.length;)if(i=new this(arguments[e++]),i.d)t.d&&(t=t.plus(i.times(i)));else{if(i.s)return Z=!0,new this(1/0);t=i}return Z=!0,t.sqrt()}function os(e){return e instanceof ie||e&&e.toStringTag===Zs||!1}function Fl(e){return new this(e).ln()}function Zl(e,i){return new this(e).log(i)}function Al(e){return new this(e).log(2)}function Hl(e){return new this(e).log(10)}function Rl(){return Bs(this,arguments,"lt")}function Bl(){return Bs(this,arguments,"gt")}function Ul(e,i){return new this(e).mod(i)}function Ql(e,i){return new this(e).mul(i)}function jl(e,i){return new this(e).pow(i)}function Vl(e){var i,t,r,s,n=0,l=new this(1),o=[];if(e===void 0?e=this.precision:ve(e,1,Ge),r=Math.ceil(e/F),this.crypto)if(crypto.getRandomValues)for(i=crypto.getRandomValues(new Uint32Array(r));n<r;)s=i[n],s>=429e7?i[n]=crypto.getRandomValues(new Uint32Array(1))[0]:o[n++]=s%1e7;else if(crypto.randomBytes){for(i=crypto.randomBytes(r*=4);n<r;)s=i[n]+(i[n+1]<<8)+(i[n+2]<<16)+((i[n+3]&127)<<24),s>=214e7?crypto.randomBytes(4).copy(i,n):(o.push(s%1e7),n+=4);n=r/4}else throw Error(Fs);else for(;n<r;)o[n++]=Math.random()*1e7|0;for(r=o[--n],e%=F,r&&e&&(s=le(10,F-e),o[n]=(r/s|0)*s);o[n]===0;n--)o.pop();if(n<0)t=0,o=[0];else{for(t=-1;o[0]===0;t-=F)o.shift();for(r=1,s=o[0];s>=10;s/=10)r++;r<F&&(t-=F-r)}return l.e=t,l.d=o,l}function zl(e){return P(e=new this(e),e.e+1,this.rounding)}function Gl(e){return e=new this(e),e.d?e.d[0]?e.s:0*e.s:e.s||NaN}function Wl(e){return new this(e).sin()}function Jl(e){return new this(e).sinh()}function Xl(e){return new this(e).sqrt()}function Yl(e,i){return new this(e).sub(i)}function Kl(){var e=0,i=arguments,t=new this(i[e]);for(Z=!1;t.s&&++e<i.length;)t=t.plus(i[e]);return Z=!0,P(t,this.precision,this.rounding)}function $l(e){return new this(e).tan()}function eo(e){return new this(e).tanh()}function io(e){return P(e=new this(e),e.e+1,1)}v[Symbol.for("nodejs.util.inspect.custom")]=v.toString;v[Symbol.toStringTag]="Decimal";var ie=v.constructor=js(tr);Gi=new ie(Gi);Wi=new ie(Wi);function to(e){let i=e;return{get pattern(){return i},get lexem(){return i},match(t){return t.startsWith(i)}}}function ro(e){let i=e,t,r;return{get pattern(){return i},get lexem(){return t},get parts(){return r},match(s){let n=new RegExp(i).exec(s);return n&&(t=n[0],n.length>1&&(r=n)),n!==null}}}function H(e){let i;return e.startsWith("@")?i=ro("^("+e.slice(1,e.length)+")"):i=to(e),i}function so(e){let i=H("@\\s+"),t=0,r,s,n=e.trim(),l;function o(){t<n.length&&i.match(n.slice(t))&&(t+=i.lexem.length)}return{get lexem(){return s},get pos(){return t},get parts(){return l},match(u){if(t>=n.length)return!1;let a=n.slice(t);return u.match(a)?(s=u.lexem,"parts"in u&&(l=u.parts),t+=s.length,o(),!0):!1},prematch(u){if(t>=n.length)return!1;let a=n.slice(t);return u.match(a)},saveTrack(){r=t},backTrack(){t=r}}}function lr(e){return e.type===Mr}function ye(e){return e.type===Pi||e.type===Ii}function fi(e){return!ye(e)&&!lr(e)}function di(e){return e.type===It}function X(e){return e.type===bt}function Se(e){return X(e)&&e.value.isInt()}function Ie(e){return e.type===Tt}function Si(e){return e.type===Dt}function _(e){return e.type===ni}function li(e){return e.type===Ut}function me(e){return e.type===wt}function _e(e){return e.type===vt}function M(e){return!(di(e)||X(e)||Ie(e)||Si(e)||_(e)||li(e)||me(e)||_e(e))}function B(e){return M(e)&&e.type===yt}function fe(e){return M(e)&&e.type===_t}function z(e){return M(e)&&e.type===St}function oi(e){return M(e)&&e.type===Bt}function Oe(e){return M(e)&&e.type===ht}function Pe(e){return M(e)&&e.type===dt}function we(e){return M(e)&&e.type===mi}function Ei(e){return M(e)&&e.type===Ai}function Ni(e){return M(e)&&e.type===Oi}function Ce(e){return M(e)&&e.type===pt}function ui(e){return M(e)&&e.type===mt}function De(e){return M(e)&&e.type===gt}function bi(e){return M(e)&&e.type===Qt}function nt(e){return M(e)&&e.type===Tr}function yi(e){return M(e)&&e.type===Et}function ei(e){return M(e)&&e.type===kt}function ii(e){return M(e)&&e.type===Lt}function ti(e){return M(e)&&e.type===qt}function ri(e){return M(e)&&e.type===Mt}function Di(e){return M(e)&&e.type===kr}function pr(e){return M(e)&&e.type===Nr}function lt(e){return M(e)&&e.type===Er}function gr(e){return M(e)&&e.type===Sr}function ot(e){return M(e)&&e.type===_r}function Ci(e){return M(e)&&e.type===xt}function Fi(e){return M(e)&&e.type===Ct}function ut(e){return M(e)&&e.type===Ft}function He(e){return M(e)&&e.type===Zt}function at(e){return M(e)&&e.type===At}function _i(e){return M(e)&&e.type===Ht}function ft(e){return M(e)&&e.type===qr}function Zi(e){return M(e)&&e.type===Lr}function vr(e){return M(e)&&e.type===Rt}function wr(e){return M(e)&&e.type===Ot}function br(e){return M(e)&&e.type===Pt}function ct(e){return M(e)&&e.type===Nt}function yr(e){return oi(e)||wr(e)||pr(e)||Di(e)||gr(e)||lt(e)||br(e)||Ci(e)||Fi(e)||ut(e)||at(e)||He(e)||_i(e)||vr(e)||Zi(e)}var ht="+",dt="-",mi="*",Oi="",Ai=".",mt=":",pt="/",gt="^",ni="!! Error !!",vt="?",wt="symbol",bt="number",_r="percentage",yt="opposite",_t="positive",Tt="template",Vs="unit",St="bracket",Et="=",Nt="!=",kt="<",Lt="<=",qt=">",Mt=">=",Tr="relations",Dt="segment length",Ot="gcd",Sr="maxi",Er="maxip",Nr="mini",kr="minip",Pt="mod",It="boolean",xt="cos",Ct="sin",Ft="tan",Zt="ln",At="log",Ht="exp",Rt="floor",Lr="abs",Bt="sqrt",qr="time",Ut="identifiant",Qt="limit",Mr="normal",Pi="nsum",Ii="nproduct",no="not initialized";function ue(e,i){if(X(e))return e.value;if(me(e))throw new Error(`Le symbole ${e.symbol} doit tre substitu.`);if(_e(e))throw new Error("Impossible d'valuer une expression contenant un trou.");if(fe(e)||z(e))return ue(e.first);if(B(e))return ue(e.first).mul(-1);if(oi(e))return ue(e.first).sqrt();if(Pe(e))return ue(e.first).sub(ue(e.last));if(De(e))return ue(e.first).pow(ue(e.last));if(Ce(e)||ui(e))return ue(e.first).div(ue(e.last));if(Oe(e))return e.children.reduce((t,r)=>t.add(ue(r)),new ie(0));if(we(e)||Ei(e)||Ni(e))return e.children.reduce((t,r)=>t.mul(ue(r)),new ie(1));if(Ci(e))return ue(e.first).cos();if(Fi(e))return ue(e.first).sin();if(ut(e))return ue(e.first).tan();if(He(e))return ue(e.first).ln();if(_i(e))return ue(e.first).exp();if(at(e))return ue(e.first).log();throw new Error("Exp non recognized for decimal evaluation : "+e.string)}function lo(e,i,t){let r=e.length-1,s=0,n,l=r+1;for(;s<l;)n=s+(l-s>>1),t(e[n],i)<0?s=n+1:l=n;return s<=r&&t(e[s],i)===0?s:~s}var zs=function(e,i){return i?Gs(i,e%i):e},Gs=function(e,i){return i?Gs(i,e%i):e};function xi(e){switch(e.length){case 1:return e[0];case 2:{let i=e[0],t=e[1];if(t.isZero())return i;if(i.isZero())return t;for(t.greaterThan(i)&&([i,t]=[t,i]);!i.mod(t).isZero();)[i,t]=[t,i.mod(t)];return t}default:{let i=e.shift(),t=e.shift();return e.unshift(xi([i,t])),xi(e)}}}var jt=function(e){let i=e.length,t,r;for(;i!==0;)r=Math.floor(Math.random()*i),i-=1,t=e[i],e[i]=e[r],e[r]=t;return e};function oo(e){if(e===0)return 0;if(e===1)return 1;let i=1,t=1,r=Math.floor(Math.sqrt(e));for(;t<=r;)e%(t*t)===0?(e=e/(t*t),i=i*t,r=Math.floor(Math.sqrt(e)),t=2):t++;return i}function uo(e){if(e<1)throw new RangeError("Argument error");if(e==1)return[1];let i=[];for(;e>1;){let t=ao(e);i.push(t),e/=t}return i}function ao(e){if(e<2)throw new RangeError("Argument error");if(e%2===0)return 2;let i=Math.floor(Math.sqrt(e));for(let t=3;t<=i;t+=2)if(e%t===0)return t;return e}function fo(e){let i=[],t=e[0],r=1;for(let s=1;s<e.length;s++)e[s]===t?r++:(i.push([t,r]),t=e[s],r=1);return i.push([t,r]),i}function us(e){return fo(uo(e))}function co(e,i){return xi([e,i])}var ho={s:1,d:new ie(1),n:new ie(1),add(e){let i=this.n.mul(e.d).mul(this.s).add(this.d.mul(e.s).mul(e.n)),t=this.d.mul(e.d),r=i.s;return i=i.abs(),Ye({n:i,d:t,s:r}).reduce()},sub(e){let i=this.n.mul(e.d).mul(this.s),t=this.d.mul(e.s).mul(e.n),r=i.sub(t),s=this.d.mul(e.d),n=r.s;return n!==-1&&n!==1&&console.log("sub",n,this,e,i,t,r),r=r.abs(),Ye({n:r,d:s,s:n}).reduce()},mult(e){let i=this.n.mul(e.n),t=this.d.mul(e.d),r=e.s*this.s;return Ye({n:i,d:t,s:r}).reduce()},div(e){let i=this.n.mul(e.d),t=this.d.mul(e.n),r=e.s*this.s;return Ye({n:i,d:t,s:r})},reduce(){let e=co(this.n,this.d);return Ye({n:this.n.div(e),d:this.d.div(e),s:this.s})},isLowerThan(e){let i=this.sub(e);return i.n.equals(0)?!1:(i.s!==-1&&i.s!==1&&console.log("!!!! erreur s!!!",this,e,i),i.s===-1)},isGreaterThan(e){return this.sub(e).n.equals(0)?!1:(this.sub(e).s!==-1&&this.sub(e).s!==1&&console.log("!!!! erreur s!!!",this.sub(e).s),this.sub(e).s===1)},toString(){let e=this.s<0?"-":"";return e+=this.d.equals(1)?this.n.toString():this.n.toString()+"/"+this.d.toString(),e}};function Ye({n:e,d:i,s:t}){return e.isNegative()&&console.log("!!!negative !!!"),Object.assign(Object.create(ho),{n:e,d:i,s:t})}function mo(e,i){let t=new ie(e),r=new ie(i),s=t.s*r.s;for(t=t.abs(),r=r.abs();!t.isInteger();)t=t.mul(10),r=r.mul(10);for(;!r.isInteger();)t=t.mul(10),r=r.mul(10);return{n:t,d:r,s}}function Ws(e){if(typeof e=="number"||ie.isDecimal(e)){let i=new ie(e).toFraction(),t=i[0],r=i[1],s=t.s;return t=t.abs(),Ye({n:t,d:r,s}).reduce()}else if(typeof e=="string"){e=e.replace(/ /g,"");let i=new RegExp("^([\\(\\{]?(-?\\d+)(\\.\\d+)?[\\)\\}]?)(\\/[\\(\\{]?(-?\\d+)[\\]\\}]?)?$").exec(e);if(i){let{n:t,d:r,s}=mo(parseFloat(i[1]),i[5]?parseFloat(i[5]):1);return Ye({n:t,d:r,s})}else throw new Error("fraction not recognized")}else return Ws(e.toString({displayUnit:!1}))}var pi=Ws;function po(e){return z(e)||yr(e)||me(e)||De(e)&&e.first.isSymbol()}function go(e,i){let t="";if(bi(e))e.first.isSymbol(),t=e.first.string+(e.sign==="+"?"plus":"moins");else if(nt(e))t=e.first.toString(i),e.ops.forEach((r,s)=>{t+=r,t+=e.children[s+1].toString(i)});else if(ft(e))t="",e.children[0]&&!e.children[0].isZero()&&(t+=e.children[0],t+=" "),e.children[1]&&!e.children[1].isZero()&&(t+=e.children[1],t+=" "),e.children[2]&&!e.children[2].isZero()&&(t+=e.children[2],t+=" "),e.children[3]&&!e.children[3].isZero()&&(t+=e.children[3],t+=" "),e.children[4]&&!e.children[4].isZero()&&(t+=e.children[4],t+=" "),e.children[5]&&!e.children[5].isZero()&&(t+=e.children[5],t+=" "),e.children[6]&&!e.children[6].isZero()&&(t+=e.children[6],t+=" "),e.children[7]&&!e.children[7].isZero()&&(t+=e.children[7],t+=" "),t=t.trim();else if(Si(e))t=e.begin+e.end;else if(yi(e)||ct(e)||ei(e)||ii(e)||ti(e)||ri(e))t=e.first.toString(i)+e.type+e.last.toString(i);else if(ot(e))t=e.first.toString(i)+"%";else if(fe(e))t="+"+e.first.toString(i);else if(B(e)){let r=i.addBrackets&&(e.first.isOpposite()||e.first.isPositive());t="-",r&&(t+="("),t+=e.first.toString(i),r&&(t+=")")}else if(oi(e)||Ci(e)||Fi(e)||ut(e)||He(e)||at(e)||_i(e)||vr(e)||Zi(e))t=e.type+"("+e.first.toString(i)+")";else if(z(e))t="("+e.first.toString(i)+")";else if(Pe(e))t=e.first.toString(i)+"-"+e.last.toString(i);else if(De(e))t=e.last.toString(i),e.last.isSymbol()||e.last.isNumber()||e.last.isHole()||e.last.isBracket()||(t="{"+t+"}"),t=e.first.toString(i)+"^"+t;else if(ui(e))t=e.first.toString(i)+":"+e.last.toString(i);else if(Ce(e)){let r=e.first.toString(i),s=e.last.toString(i);(e.first.isOpposite()||e.first.isSum()||e.first.isDifference())&&(r="{"+r+"}"),(e.last.isOpposite()||e.last.isSum()||e.last.isDifference()||e.last.isProduct()||e.last.isDivision()||e.last.isQuotient())&&(s="{"+s+"}"),t=r+"/"+s}else if(Oe(e))t=e.children.map(r=>r.toString(i)).join(e.type);else if(we(e))t=e.first.toString(i)+(i.isUnit?".":i.implicit&&po(e.last)?"":e.type)+e.last.toString(i);else if(Ni(e))t=e.children.map(r=>r.isQuotient()?"{"+r.toString(i)+"}":r.toString(i)).join("");else if(Ei(e))t=e.children.map(r=>r.toString(i)).join(e.type);else if(li(e))t=e.name;else if(me(e))t=e.symbol;else if(X(e))t=e.input,i.comma&&(t=t.replace(".",","));else if(_e(e))t="?";else if(_(e))t=e.input||"";else if(wr(e))t="pgcd("+e.first.toString(i)+";"+e.last.toString(i)+")";else if(br(e))t="mod("+e.first.toString(i)+";"+e.last.toString(i)+")";else if(di(e))t=e.boolvalue.toString();else if(Ie(e))switch(t=e.nature,e.relative&&(t+="r"),e.signed&&(t+="s"),e.nature){case"$e":case"$ep":case"$ei":e.children[0].isHole()&&e.children[1].isHole()?t+=`[${e.children[2].toString(i)};${e.children[3].toString(i)}]`:t+=`{${e.children[0].isHole()?"":e.children[0].toString(i)+";"}${e.children[1].toString(i)}}`,e.exclude&&(t+="\\{"+e.exclude.map(r=>r.toString(i)).join(";")+"}"),e.excludeMin&&(t+="\\["+e.excludeMin+";"+e.excludeMax+"]");break;case"$d":case"$dr":case"$dn":break;case"$l":t+="{"+e.children.map(r=>r.toString(i)).join(";")+"}",e.exclude&&(t+="\\{"+e.exclude.map(r=>r.toString(i)).join(";")+"}"),e.excludeMin&&(t+="\\["+e.excludeMin+";"+e.excludeMax+"]");break;case"$":t+="{"+e.first.toString(i)+"}"}else(pr(e)||Di(e)||gr(e)||lt(e))&&(t=e.type+"("+e.first.string+";"+e.last.string+")");return e.unit&&i.displayUnit&&(e.isSymbol()||e.isNumber()||e.isBracket()||e.isHole()||e.isTemplate()||(t="{"+t+"}"),t+=" "+e.unit.string),t}function vo(e,i){let t;if(bi(e)&&(e.first.isSymbol()?t=e.sign+"\\infin":t=e.first.string+"^"+e.sign),Zi(e))t="\\left\\lvert "+e.first.toLatex(i)+" \\right\\rvert";else if(ft(e))t="",e.children[0]&&!e.children[0].isZero()&&(t+=e.children[0].toLatex(i),t+="\\,"),e.children[1]&&!e.children[1].isZero()&&(t+=e.children[1].toLatex(i),t+="\\,"),e.children[2]&&!e.children[2].isZero()&&(t+=e.children[2].toLatex(i),t+="\\,"),e.children[3]&&!e.children[3].isZero()&&(t+=e.children[3].toLatex(i),t+="\\,"),e.children[4]&&!e.children[4].isZero()&&(t+=e.children[4].toLatex(i),t+="\\,"),e.children[5]&&!e.children[5].isZero()&&(e.children[5].value.lessThan(10)?t+="0"+e.children[5].toLatex(i):t+=e.children[5].toLatex(i),t+="\\,"),e.children[6]&&!e.children[6].isZero()&&(t+=e.children[6].toLatex(i),t+="\\,"),e.children[7]&&!e.children[7].isZero()&&(t+=e.children[7].toLatex(i),t+="\\,");else if(Si(e))t=e.begin+e.end;else if(nt(e))t=e.first.toLatex(i),e.ops.forEach((r,s)=>{t+=r,t+=e.children[s+1].toLatex(i)});else if(yi(e)||ct(e)||ei(e)||ii(e)||ti(e)||ri(e))t=e.first.toLatex(i)+e.type+e.last.toLatex(i);else if(ot(e))t=e.first.toLatex(i)+"\\%";else if(oi(e))t="\\sqrt{"+e.first.toLatex(i)+"}";else if(z(e))t="\\left(",t+=e.first.toLatex(i),t+="\\right)";else if(fe(e)){let r=i.addBrackets&&(e.first.isOpposite()||e.first.isPositive());t="+",r&&(t+="\\left("),t+=e.first.toLatex(i),r&&(t+="\\right)")}else if(B(e)){let r=i.addBrackets&&(e.first.isSum()||e.first.isDifference()||e.first.isOpposite()||e.first.isPositive());t="-",r&&(t+="\\left("),t+=e.first.toLatex(i),r&&(t+="\\right)")}else if(Pe(e)){let r=i.addBrackets&&(e.last.isSum()||e.last.isDifference()||e.last.isOpposite()||e.last.isPositive());t=e.first.toLatex(i)+"-",r&&(t+="\\left("),t+=e.last.toLatex(i),r&&(t+="\\right)")}else if(Oe(e)){let r=i.addBrackets&&(e.last.isOpposite()||e.last.isPositive());t=e.first.toLatex(i)+"+",r&&(t+="\\left("),t+=e.last.toLatex(i),r&&(t+="\\right)")}else if(De(e))t=e.first.toLatex(i)+"^{"+e.last.toLatex(i)+"}";else if(ui(e))t=e.first.toLatex(i)+"\\div"+e.last.toLatex(i);else if(Ce(e))t="\\dfrac{"+(z(e.first)?e.first.first.toLatex(i):e.first.toLatex(i))+"}{"+(z(e.last)?e.last.first.toLatex(i):e.last.toLatex(i))+"}";else if(we(e)){let r=e.first,s=e.last;z(r)&&r.first.isQuotient()&&(r=r.first),z(s)&&s.first.isQuotient()&&(s=s.first),t=r.toLatex(i)+(i.implicit?"":"\\times ")+s.toLatex(i)}else if(Ni(e))t=e.children.map(r=>r.toLatex(i)).join("");else if(Ei(e))t=e.children.map(r=>r.toLatex(i)).join(" \\cdot ");else if(li(e))t=e.name;else if(me(e))e.symbol==="pi"?t="\\pi":t=e.symbol;else if(X(e))t=e.toString({displayUnit:!1}),i.addSpaces&&(t=Js(t)),t=t.replace(/ /g,"\\,").replace(".","{,}");else if(_e(e))t="\\ldots";else if(_(e))switch(e.input){case"<":t="\\lt";break;case">":t="\\gt";break;default:t=e.input||""}else t=e.string;return e.unit&&(t+="\\,"+e.unit.string),t}function wo(e,i){let t="";return Zi(e)?t="<around*|\\||"+e.first.toLatex(i)+"|\\|>":ft(e)?(t="",e.children[0]&&!e.children[0].isZero()&&(t+=e.children[0].toTexmacs(i),t+="<space|0.17em>"),e.children[1]&&!e.children[1].isZero()&&(t+=e.children[1].toTexmacs(i),t+="<space|0.17em>"),e.children[2]&&!e.children[2].isZero()&&(t+=e.children[2].toTexmacs(i),t+="<space|0.17em>"),e.children[3]&&!e.children[3].isZero()&&(t+=e.children[3].toTexmacs(i),t+="<space|0.17em>"),e.children[4]&&!e.children[4].isZero()&&(t+=e.children[4].toTexmacs(i),t+="<space|0.17em>"),e.children[5]&&!e.children[5].isZero()&&(e.children[5].value.lessThan(10)?t+="0"+e.children[5].toTexmacs(i):t+=e.children[5].toTexmacs(i),t+="<space|0.17em>"),e.children[6]&&!e.children[6].isZero()&&(t+=e.children[6].toTexmacs(i),t+="<space|0.17em>"),e.children[7]&&!e.children[7].isZero()&&(t+=e.children[7].toTexmacs(i),t+="<space|0.17em>")):Si(e)?t=e.begin+e.end:yi(e)?t=e.first.toTexmacs(i)+"="+e.last.toTexmacs(i):ct(e)?t=e.first.toTexmacs(i)+"\\<neq\\>"+e.last.toTexmacs(i):ei(e)?t=e.first.toTexmacs(i)+"\\<less\\>"+e.last.toTexmacs(i):ii(e)?t=e.first.toTexmacs(i)+"\\<leqslant\\>"+e.last.toTexmacs(i):ti(e)?t=e.first.toTexmacs(i)+"\\<gtr\\>"+e.last.toTexmacs(i):ri(e)?t=e.first.toTexmacs(i)+"\\<geqslant\\>"+e.last.toTexmacs(i):ot(e)?t=e.first.toTexmacs(i)+"%":oi(e)?t="<sqrt|"+e.first.toTexmacs(i)+">":z(e)?t="<around*|(|"+e.first.toTexmacs(i)+"|)>":fe(e)?t+="+"+e.first.toTexmacs(i):B(e)?t="-"+e.first.toTexmacs(i):Pe(e)?t=e.first.toTexmacs(i)+"-"+e.last.toTexmacs(i):Oe(e)?t=e.first.toTexmacs(i)+"+"+e.last.toTexmacs(i):De(e)?t=e.first.toTexmacs(i)+"<rsup|"+e.last.toTexmacs(i)+">":ui(e)?t=e.first.toTexmacs(i)+"\\<div\\>"+e.last.toTexmacs(i):Ce(e)?t="<dfrac|"+e.first.toTexmacs(i)+"|"+e.last.toTexmacs(i)+">":we(e)?t=e.first.toTexmacs(i)+"\\<times\\>"+e.last.toTexmacs(i):Ni(e)?t=e.first.toTexmacs(i)+"*"+e.last.toTexmacs(i):Ei(e)?t=e.first.toTexmacs(i)+"\\<cdot\\>"+e.last.toTexmacs(i):li(e)?t=e.name:me(e)?e.symbol==="pi"?t="\\<pi\\>":t=e.symbol:X(e)?(t=e.toString({displayUnit:!1}),i.addSpaces&&(t=Js(t)),t=t.replace(/ /g,"<space|0.17em>").replace(".",",")):_e(e)?t="......":_(e)?t="error":t=e.string,e.unit&&(t+="<space|0.17em>"+e.unit.string),t}function Js(e){let[i,t]=e.replace(/ /g,"").split(".");return i=i.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1 "),t&&(t=t.replace(/\d{3}(?=\d)/g,"$& ")),t?i+"."+t:i}function Dr(e,i){let t,r=[bt,wt,Ut,vt,It,Tt,_t,yt,_r,Dt,St,xt,Ct,Ft,Zt,At,Ht,Bt,Rt,Ot,Pt,ht,dt,mi,Oi,Ai,mt,pt,gt,Vs,Et,Nt,kt,Lt,qt,Mt,ni,Pi,Ii,Qt];if(!(r.includes(e.type)&&r.includes(i.type)))throw new Error(`type ${e.type} forgotten`);if(ye(e)&&ye(i)){let s=e[Symbol.iterator](),n=i[Symbol.iterator](),l=s.next(),o=n.next();for(;!l.done&&!o.done;){let u=l.value,a=o.value,f=u[1],c=a[1];if(ye(f)&&ye(c))t=f.compareTo(c);else if(fi(f)&&fi(c))t=f.compareTo(c);else throw new Error("impossible to compare bases.");if(t!==0)return t;let d=u[0],p=a[0];if(ye(d)&&ye(p)){if(t=d.compareTo(p),t!==0)return t}else if(fi(d)&&fi(p)){if(d.isLowerThan(p))return-1;if(d.isGreaterThan(p))return 1}else throw new Error("unable to compare coefs.");l=s.next(),o=n.next()}return l.done&&o.done?0:l.done?-1:1}else{if(lr(e)&&lr(i))return t=e.n.mult(i.d).compareTo(i.n.mult(e.d)),t===0&&(e.unit&&i.unit?t=e.unit.compareTo(i.unit):e.unit?t=1:i.unit&&(t=-1)),t;if(fi(e)&&fi(i))if(e.type===i.type){if(X(e))return e.value.lt(i.value)?-1:e.value.gt(i.value)?1:0;if(me(e)||li(e))return e.string<i.string?-1:e.string>i.string?1:0;if(_e(e)||Ie(e))return 0;if(M(e)&&!bi(e)){for(let s=0;s<e.children.length;s++){let n=e.children[s].compareTo(i.children[s]);if(n)return n}return 0}else{if(_(e))return e.message<i.message?-1:e.message>i.message?1:0;if(bi(e))return e.first.isSymbol()&&i.first.isSymbol()?e.sign<i.sign?-1:e.sign>i.sign?1:0:e.first.isSymbol()?1:i.first.isSymbol()?-1:e.first.equals(i.first)?e.sign<i.sign?-1:e.sign>i.sign?1:0:e.first.compareTo(i.first);throw new Error(`type ${e.type} forgotten in the compare list`)}}else return r.indexOf(e.type)<r.indexOf(i.type)?-1:1;else throw new Error(`incompatible types to compare ${e} ${i}`)}}var Gt={pi:"3.14",e:"2.7"};function bo(e,i,t="x"){let r=()=>"("+i.string+")";return E(e.string.replace(new RegExp(`(${t})(?!p)(?<!e)`,"g"),r)).removeUnecessaryBrackets()}function yo(e,i="x"){let t=e;if(yr(e)&&e.first.string!==i){let r=e.first,s=e.copy([si(i)]).derivate(i);t=r.derivate(i).mult(s.compose(r,i))}else if(X(e))t=S(0);else if(Oe(e))t=e.first.derivate(i).bracket().add(e.last.derivate(i).bracket());else if(Pe(e))t=e.first.derivate(i).bracket().sub(e.last.derivate(i).bracket());else if(B(e))t=e.first.derivate(i).oppose();else if(we(e)||Ni(e)||Ei(e))t=e.first.derivate(i).mult(e.last).add(e.first.mult(e.last.derivate(i)));else if(ui(e)||Ce(e))t=e.first.derivate(i).mult(e.last).sub(e.first.mult(e.last.derivate(i))).frac(e.last.pow(S(2)));else if(me(e))t=e.string===i?S(1):S(0);else if(_i(e))t=e.first.derivate(i).mult(e);else if(He(e))t=e.first.derivate(i).mult(e.first.inverse());else if(Ci(e))t=e.first.derivate(i).mult(e.first.sin().oppose());else if(Fi(e))t=e.first.derivate(i).mult(e.first.cos());else if(De(e)){let r=e.first,s=e.last,n=r.derivate(i);t=s.derivate(i).mult(r.ln()).add(s.mult(n.frac(r))).mult(r.pow(s))}else oi(e)&&(t=e.first.derivate(i).frac(S(2).mult(e.first.radical())));return t.normal.node}function _o(e){let i=M(e)?e.copy(e.children.map(t=>t.reduceFractions())):e;return i.isNumeric()&&Ce(i)&&(X(i.first)||B(i.first)&&X(i.first.first)||z(i.first)&&(X(i.first.first)||B(i.first.first)&&X(i.first.first.first)))&&(X(i.last)||B(i.last)&&X(i.last.first)||z(i.last)&&(X(i.last.first)||B(i.last.first)&&X(i.last.first.first)))&&(i=i.reduce()),i=E(i.string),i.unit=e.unit,i}function To(e){let i=M(e)?e.copy(e.children.map(t=>t.removeZerosAndSpaces())):E(e.string);return X(e)&&(i=i.eval({decimal:!0})),i.unit=e.unit,i}function So(e){let i=M(e)?e.copy(e.children.map(t=>t.removeMultOperator())):E(e.string);return we(e)&&(yr(e.last)||z(e.last)||me(e.last)||De(e.last)&&me(e.last.first))&&(i=Pr([e.first,e.last])),i.unit=e.unit,i}function Eo(e){let i;if(Oe(e)){let t=e.first.removeNullTerms(),r=e.last.removeNullTerms();t.equalsZero()&&r.equalsZero()?i=S(0):t.equalsZero()?i=E(r.string):r.equalsZero()?i=E(t.string):i=t.add(r)}else if(Pe(e)){let t=e.first.removeNullTerms(),r=e.last.removeNullTerms();t.equalsZero()&&r.equalsZero()?i=S(0):t.equalsZero()?i=E(r.string).oppose():r.equalsZero()?i=E(t.string):i=t.sub(r)}else M(e)?i=e.copy(e.children.map(t=>t.removeNullTerms())):i=E(e.string);return i.unit=e.unit,i}function No(e){let i;if(we(e)){let t=e.first.removeFactorsOne(),r=e.last.removeFactorsOne();t.isOne()&&r.isOne()?i=S(1):t.isOne()?(i=r,z(i)&&(i=i.first)):r.isOne()?(i=t,z(i)&&(i=i.first)):i=e.copy([t,r])}else M(e)?i=e.copy(e.children.map(t=>t.removeFactorsOne())):i=E(e.string);return e.unit&&!i.unit&&(i.unit=e.unit),i}function ko(e){let i=M(e)?e.copy(e.children.map(t=>t.simplifyNullProducts())):E(e.string);return we(e)&&i.factors.some(t=>t.isZero())&&(i=S(0)),i.unit=e.unit,i}function Lo(e,i=!1){let t;return z(e)&&(!e.parent||e.parent.isFunction()||e.parent.isBracket()||e.first.isFunction()||e.first.isHole()||e.first.isNumber()||e.first.isSymbol()||e.parent.isSum()&&e.first.isSum()||e.parent.isSum()&&e.first.isDifference()||e.parent.isSum()&&e.first.isProduct()||e.parent.isSum()&&e.first.isQuotient()||e.parent.isSum()&&e.first.isDivision()||e.parent.isSum()&&e.first.isPower()||e.parent.isOpposite()&&e.first.isProduct()||e.parent.isOpposite()&&e.first.isQuotient()||e.parent.isOpposite()&&e.first.isDivision()||e.parent.isDifference()&&e.first.isSum()&&e.isFirst()||e.parent.isDifference()&&e.first.isDifference()&&e.isFirst()||e.parent.isDifference()&&e.first.isProduct()||e.parent.isDifference()&&e.first.isQuotient()||e.parent.isDifference()&&e.first.isDivision()||e.parent.isDifference()&&e.first.isPower()||e.parent.isProduct()&&e.first.isProduct()||e.parent.isProduct()&&e.first.isQuotient()&&e.isFirst()||e.parent.isProduct()&&e.first.isDivision()||e.parent.isProduct()&&e.first.isPower()||e.parent.isQuotient()&&e.first.isProduct()&&e.isFirst()||e.parent.isQuotient()&&e.first.isQuotient()&&e.isFirst()||e.parent.isQuotient()&&e.first.isDivision()&&e.isFirst()||e.parent.isQuotient()&&e.first.isPower()||e.parent.isDivision()&&e.first.isProduct()&&e.isFirst()||e.parent.isDivision()&&e.first.isQuotient()&&e.isFirst()||e.parent.isDivision()&&e.first.isDivision()&&e.isFirst()||e.parent.isDivision()&&e.first.isPower()||e.parent.isPower()&&e.first.isPower()&&e.isFirst()||e.parent.isPower()&&e.isLast()||!i&&e.parent.isSum()&&e.first.isOpposite()&&e.isFirst()||!i&&e.parent.isSum()&&e.first.isPositive()&&e.isFirst()||!i&&e.parent.isDifference()&&e.first.isOpposite()&&e.isFirst()||!i&&e.parent.isDifference()&&e.first.isPositive()&&e.isFirst()||e.parent.isEquality()||e.parent.isUnequality()||e.parent.isInequality()||e.parent.isProduct()&&e.first.isQuotient()&&e.isLast()||e.parent.isQuotient()&&e.first.isProduct()&&e.isLast()||e.parent.isQuotient()&&e.first.isQuotient()&&e.isLast()||e.parent.isQuotient()&&e.first.isDivision()&&e.isLast()||e.parent.isQuotient()&&e.first.isOpposite()||e.parent.isQuotient()&&e.first.isSum()||e.parent.isQuotient()&&e.first.isDifference())?t=e.first.removeUnecessaryBrackets(i):M(e)?t=e.copy(e.children.map(r=>r.removeUnecessaryBrackets(i))):t=E(e.string),t.unit=e.unit,t}function qo(e){let i=e.terms;jt(i);let t=i.pop(),r=t.op==="+"?t.term:t.term.oppose();return i.forEach(s=>{r=s.op==="+"?r.add(s.term):r.sub(s.term)}),r.unit=e.unit,r}function Mo(e){let i=M(e)?e.copy(e.children.map(s=>s.shuffleTerms())):E(e.string),t=i.terms;jt(t);let r=t.pop();return i=r.op==="+"?r.term:r.term.oppose(),t.forEach(s=>{i=s.op==="+"?i.add(s.term):i.sub(s.term)}),i.unit=e.unit,i}function Do(e){let i=e.factors;jt(i);let t=i.pop();return i.forEach(r=>t=t.mult(r)),t.unit=e.unit,t}function Oo(e){let i=M(e)?e.copy(e.children.map(r=>r.shuffleFactors())):E(e.string),t=e.factors;return jt(t),i=t.pop(),t.forEach(r=>i=i.mult(r)),i.unit=e.unit,i}function Po(e){let i=M(e)?e.copy(e.children.map(t=>t.shuffleTermsAndFactors())):E(e.string);return i.isProduct()?i=i.shallowShuffleFactors():(i.isSum()||i.isDifference())&&(i=i.shallowShuffleTerms()),i.unit=e.unit,i}function Io(e){let i=e;if(e.isSum()||e.isDifference()){let t=e.terms,r=t.filter(l=>l.op==="+").map(l=>l.term).sort((l,o)=>l.compareTo(o)),s=r.length,n=t.filter(l=>l.op==="-").map(l=>l.term).sort((l,o)=>l.compareTo(o));r.length&&(i=r.shift(),r.forEach(l=>i=i.add(l))),n.length&&(s||(i=n.shift().oppose()),n.forEach(l=>i=i.sub(l))),i.unit=e.unit}return i}function xo(e){let i=M(e)?e.copy(e.children.map(t=>t.sortTerms())):E(e.string);return(e.isSum()||e.isDifference())&&(i=i.shallowSortTerms()),i.unit=e.unit,i}function Co(e){let i;if(e.isProduct()){let t=e.factors;t.sort((r,s)=>r.compareTo(s)),i=t.shift(),t.forEach(r=>i=i.mult(r)),i.unit=e.unit}else i=e;return i}function Fo(e){let i=M(e)?e.copy(e.children.map(t=>t.sortFactors())):E(e.string);return e.isProduct()&&(i=i.shallowSortFactors()),i.unit=e.unit,i}function Zo(e){let i=M(e)?e.copy(e.children.map(t=>t.sortTermsAndFactors())):E(e.string);return e.isSum()||e.isDifference()?i=i.shallowSortTerms():e.isProduct()&&(i=i.shallowSortFactors()),i.unit=e.unit,i}function Ao(e){let i=e.parent,t=M(e)?e.copy(e.children.map(r=>r.removeSigns())):E(e.string);if(we(t)||ui(t)||Ce(t)){let r,s,n=!1;z(t.first)&&B(t.first.first)?(r=t.first.first.first,n=!n):z(t.first)&&fe(t.first.first)?r=t.first.first.first:Ce(t)&&B(t.first)?(r=t.first.first,n=!n):r=t.first,z(t.last)&&B(t.last.first)?(s=t.last.first.first,n=!n,s.isNumber()||s.isSymbol()||(s=s.bracket())):z(t.last)&&fe(t.last.first)?s=t.last.first.first:Ce(t)&&B(t.last)?(s=t.last.first,n=!n):s=t.last,t.isProduct()?t=t.copy([r,s]):t.isDivision()?t=r.div(s):t=r.frac(s),n&&(t=t.oppose()),n&&i&&!(i.isBracket()||i.isQuotient()||i.isPower()&&t.isLast())&&(t=t.bracket())}else Oe(t)&&z(t.last)&&B(t.last.first)?t=t.first.sub(t.last.first.first):Oe(t)&&z(t.last)&&fe(t.last.first)||Pe(t)&&z(t.last)&&B(t.last.first)?t=t.first.add(t.last.first.first):Pe(t)&&z(t.last)&&fe(t.last.first)?t=t.first.sub(t.last.first.first):fe(t)&&z(t.first)&&B(t.first.first)?t=t.first.first:fe(t)&&z(t.first)&&fe(t.first.first)?t=t.first.first.first:B(t)&&z(t.first)&&B(t.first.first)?t=t.first.first.first.positive():B(t)&&z(t.first)&&fe(t.first.first)?t=t.first.first.first.oppose():z(t)&&fe(t.first)&&(i&&(i.isQuotient()||i.isDivision())&&e.isLast()&&(t.first.first.isQuotient()||t.first.first.isDivision())?t=t.first.first.bracket():t=t.first.first);return(!i||!i.isBracket())&&fe(t)&&(t=t.first),t=E(t.string),t.unit=e.unit,t.parent=i,t}function or(e,i){let t=e;if(!i)return t;if(me(e)){if(!Gt[e.symbol]&&!i[e.symbol])return t;Gt[e.symbol]?t=E(Gt[e.symbol]):(t=E(i[e.symbol]),t=or(t,i))}else M(e)?t=e.copy(e.children.map(r=>or(r,i))):t=E(e.string);return t.unit=e.unit,t}function Ho(e,i){return e=Math.ceil(e),i=Math.floor(i),Math.floor(Math.random()*(i-e))+e}function Je(e,i){return e=Math.ceil(e),i=Math.floor(i),Math.floor(Math.random()*(i-e+1))+e}function Wt(e,i,t=!0){function r(){return Ho(e===0?0:Math.pow(10,e-1),i===0?0:Math.pow(10,Je(e,i)))}let s=r();if(!t&&i!==0)for(;s%10===0;)s=r();return s}function as(e,i,t){return t.value.gte(e.value)&&i.value.lte(e.value)}function ci(e){let i=e.nature==="$$",t=e.precision,r,s,n,l,o,u;switch(e.nature){case"$e":case"$ep":case"$ei":{let a=!1,f=e.children.map(m=>Ie(m)?ci(m):Ke(Object.assign(m.substitute(),{parent:e})).eval({decimal:i,precision:t})),c=e.excludeMin,d=e.excludeMax,p=e.excludeDivider,w=e.excludeMultiple,g=e.exclude?e.exclude.map(m=>Ie(m)?ci(m):Ke(Object.assign(m.substitute(),{parent:e})).eval({decimal:i,precision:t})):null,h=e.excludeCommonDividersWith?e.excludeCommonDividersWith.map(m=>Ie(m)?ci(m):Ke(Object.assign(m.substitute(),{parent:e})).eval({decimal:i,precision:t})):null;do a=!1,f[1].isHole()?(r=S(Je(B(f[2])?f[2].first.value.toNumber()*-1:f[2].value.toNumber(),B(f[3])?f[3].first.value.toNumber()*-1:f[3].value.toNumber())),e.relative&&!r.isZero()&&(Je(0,1)?r=r.oppose():e.signed&&(r=r.positive())),a=!!g&&g.map(m=>m.string).includes(r.string)||!!c&&as(r,c,d)):(r=S(Wt(_e(f[0])?1:f[0].value.toNumber(),f[1].value.toNumber())),e.relative&&!r.isZero()&&(Je(0,1)?r=r.oppose():e.signed&&(r=r.positive())),a=!!g&&g.map(m=>m.string).includes(r.string)),w&&(a=a||w.some(m=>r.value.mod(m.eval().value).equals(0))),p&&(a=a||p.some(m=>m.eval().value.mod(r.value).equals(0))),h&&(a=a||h.some(m=>{let b=m.generate().eval(),D=B(b)?b.first.value.toNumber():b.value.toNumber(),C=r.generate().eval(),y=B(C)?C.first.value.toNumber():C.value.toNumber();return zs(D,y)!==1}));while(a);e.root.generated.push(r);break}case"$d":{let a=e.children.map(f=>Ie(f)?ci(f):Ke(Object.assign(f.substitute(),{parent:e})).eval({decimal:i,precision:t}));if(a[0])l=a[0].generate().value.toNumber(),n=a[1].generate().value.toNumber(),s=new ie(Wt(l,l)),s=s.add(new ie(Wt(n,n,!1)).div(Math.pow(10,n)));else{let f=a[2].generate().value.toNumber(),c=a[3].generate().value.toNumber(),d=a[4].generate().value.toNumber(),p=a[5].generate().value.toNumber();l=Je(f,c),n=Je(d,p),s=new ie(l).div(Math.pow(10,n))}r=S(s),e.relative&&Je(0,1)&&(r=r.oppose()),e.root.generated.push(r);break}case"$l":{u=e.children;let a=!1;if(e.exclude){let f=e.exclude.map(c=>c.eval().string);u=u.filter(c=>!f.includes(c.string))}do a=!1,r=u[Math.floor(Math.random()*u.length)],a=!!e.excludeMin&&as(r,e.excludeMin,e.excludeMax),e.excludeMultiple&&(a=a||e.excludeMultiple&&e.excludeMultiple.some(f=>r.value.mod(f.eval().value).isZero())),e.excludeDivider&&(a=a||e.excludeDivider&&e.excludeDivider.some(f=>f.eval().value.mod(r.value).isZero()));while(a);r=r.generate(),e.root.generated.push(r);break}case"$":case"$$":{r=e.children.map(a=>Ie(a)?ci(a):Ke(Object.assign(a.substitute(),{parent:e})).eval({decimal:i,precision:t}))[0],e.root.generated.push(r);break}default:o=parseInt(e.nature.slice(1,e.nature.length),10),r=e.root.generated[o-1]}return e.unit&&(r.unit=e.unit),r}function Ke(e){let i=e;return Ie(e)?i=ci(e):me(e)||_e(e)||X(e)||_(e)||Si(e)?i=e:M(e)&&(i=e.copy(e.children.map(t=>Ke(t)))),i}var Ro={mult(e){return se(this.u.mult(e.u,Ai),this.normal().mult(e.normal()))},div(e){return se(this.u.div(e.u),this.normal().div(e.normal()))},pow(e){return se(this.u.pow(e),this.normal().pow(e.normal))},toString(){return this.u.toString({isUnit:!0})},get string(){return this.toString()},isVolume(){return this.isMetricalVolume()||this.isCapacity()},isMetricalVolume(){return this.isConvertibleTo(se("m").mult(se("m")).mult(se("m")))},isCapacity(){return this.isConvertibleTo(se("L"))},isConvertibleTo(e){return this.normal().isConvertibleTo(e.normal())},getCoefTo(e){return this.normal().getCoefTo(e.normal()).node},equalsTo(e){return this.normal().equalsTo(e.normal())},type:Vs,normal(){return this._normal},get u(){return this._u}};function se(e,i){if(typeof e=="string"){let r=S(fs[e][0]),s=si(fs[e][1]);i=r.mult(s).normal}let t=Object.create(Ro);return Object.assign(t,{_u:typeof e=="string"?si(e):e,_normal:i}),t}var fs={Qr:[1,"Qr"],"k":[1e3,""],"":[1,""],kL:[1e3,"L"],hL:[100,"L"],daL:[10,"L"],L:[1,"L"],dL:[.1,"L"],cL:[.01,"L"],mL:[.001,"L"],km:[1e3,"m"],hm:[100,"m"],dam:[10,"m"],m:[1,"m"],dm:[.1,"m"],cm:[.01,"m"],mm:[.001,"m"],t:[1e6,"g"],q:[1e5,"g"],kg:[1e3,"g"],hg:[100,"g"],dag:[10,"g"],g:[1,"g"],dg:[.1,"g"],cg:[.01,"g"],mg:[.001,"g"],an:[31536e6,"ms"],ans:[31536e6,"ms"],mois:[2592e6,"ms"],semaine:[6048e5,"ms"],semaines:[6048e5,"ms"],jour:[864e5,"ms"],jours:[864e5,"ms"],h:[36e5,"ms"],min:[6e4,"ms"],mins:[6e4,"ms"],s:[1e3,"ms"],ms:[1,"ms"],"":[1,""],noUnit:[1,"noUnit"]},Bo={isUnit:!1,formatTime:!1},Or={type:Pi,children:[],[Symbol.iterator](){return this.children[Symbol.iterator]()},compareTo(e){return Dr(this,e)},equalsTo(e){return this.string===e.string},merge(e){let i,t=this.children.filter(r=>!r[0].isZero());for(let r of e){let s=r[1],n=r[0];if(n.isZero())continue;let l=t.map(o=>o[1]);if(i=l.length>0?lo(l,s,(o,u)=>(ye(o),o.compareTo(u))):-1,i<0)t.splice(~i,0,r);else{let o=t[i][0],u;if(ye(o))u=o.merge(n);else{let a=pi(o.string).add(pi(n.string)).reduce();u=E(a.toString())}u.isZero()?t.splice(i,1):t[i]=[u,s]}}return this.createList(this.type,t)},createList(e,i){return e===Pi?L(i):Xi(i)},symmetrize(){let e=function(i){let t=i[0],r=i[1],s;return t.isZero()?i:(ye(t)?s=t.oppose():s=B(t)?t.first:t.oppose(),[s,r])};return this.createList(this.type,this.children.map(e))},get string(){return this.toString()},toString(e){return this.node.toString(e)},isOne(){return this.node.isOne()},isZero(){return this.node.isZero()},isMinusOne(){return this.node.isMinusOne()},isInt(){return this.node.isInt()},isOpposite(){return this.node.isOpposite()},get first(){return this.children[0]},get last(){return this.children[this.children.length-1]},get length(){return this.children.length},get node(){return this.toNode()},toNode(){let e=function([t,r]){let s=r;return t.string==="1/2"?s=Ir([r]):!r.isOne()&&!t.isOne()&&(s.isOpposite()&&(s=s.bracket()),s=s.pow(t)),s},i;if(this.type===Ii){i=S(1);for(let t=0;t<this.children.length;t++){let r=this.children[t][0],s=this.children[t][1],n=e([r,s]);(n.isOpposite()||n.isSum()||n.isDifference())&&(n=n.bracket()),t===0?i=n:n.isOne()||(i=i.mult(n))}}else{i=S(0);for(let t=0;t<this.children.length;t++){let r=this.children[t],s=ye(r[0])?r[0].node:r[0],n=r[1].node,l,o=!1;n.isOne()?l=s:s.isOne()?l=n:s.isMinusOne()?(o=!0,l=n):B(s)?(o=!0,s.first.isSum()||s.first.isDifference()?l=s.first.bracket().mult(n):l=s.first.mult(n)):((s.isSum()||s.isDifference())&&(s=s.bracket()),l=s.mult(n)),t===0?i=o?l.oppose():l:i=o?i.sub(l):i.add(l)}}return i},mult(e){let i=[];if(this.type===Ii)return i=i.concat(this.merge(e).children),i=i.filter(t=>!t[1].isOne()),Xi(i);for(let t of this)for(let r of e){let s=[],n=t[0],l=t[1],o=r[0],u=r[1];for(let[f,c]of n)for(let[d,p]of o){let w=parseInt(f.string)*parseInt(d.string),g=w<0,h=S(Math.abs(w)),m=c.mult(p);X(m.node)&&!m.node.isOne()&&(h=S(h.value.mul(m.node.value)),m=re()),g&&(h=h.oppose()),s.push([h,m])}let a=xe(S(0)).merge(L(s));i.push([a,l.mult(u)])}return Ys().merge(L(i))},add(e){return this.merge(e)},sub(e){return this.merge(e.oppose())},oppose(){return this.symmetrize()},invert(){return this.symmetrize()},div(e){return this.frac(e)},frac(e){return this.mult(e.invert())}},cs=Object.create(Or),Xs={type:Mr,get n(){return this._n},get d(){return this._d},isDefined(){return this.type!==ni},isZero(){return this.isDefined()&&this.n.isZero()},isInt(){return this.isDefined()&&this.node.isInt()},isOne(){return this.isDefined()&&this.node.isOne()},isProduct(){return this.isDefined()&&this.node.isProduct()},isPower(){return this.isDefined()&&this.node.isPower()},isDivision(){return this.isDefined()&&this.node.isDivision()},isQuotient(){return this.isDefined()&&this.node.isQuotient()},isOpposite(){return this.isDefined()&&this.node.isOpposite()},isMinusOne(){return this.isDefined()&&this.node.isMinusOne()},isNumeric(){return this.isDefined()&&this.node.isNumeric()},isDuration(){return this.isDefined()&&!!this.unit&&this.unit.isConvertibleTo(se("s").normal())},isLength(){return this.isDefined()&&!!this.unit&&this.unit.isConvertibleTo(se("m").normal())},isMass(){return this.isDefined()&&!!this.unit&&this.unit.isConvertibleTo(se("g").normal())},isConvertibleTo(e){let i=L([[xe(S(1)),this.n.first[1]]]),t=L([[xe(S(1)),this.d.first[1]]]),r=ae(i,t),s=L([[xe(S(1)),e.n.first[1]]]),n=L([[xe(S(1)),e.d.first[1]]]),l=ae(s,n);return r.equalsTo(l)||r.string==="m^3"&&l.string==="L"||r.string==="L"&&l.string==="m^3"},isSameQuantityType(e){return this.isDefined()&&e.isDefined()&&(!this.unit&&!e.unit||!!this.unit&&!!e.unit&&this.unit.isConvertibleTo(e.unit))},getCoefTo(e){let i=L([[this.n.first[0],re()]]),t=L([[this.d.first[0],re()]]),r=ae(i,t),s=L([[e.n.first[0],re()]]),n=L([[e.d.first[0],re()]]),l=ae(s,n),o=L([[U(),this.n.first[1]]]),u=L([[U(),this.d.first[1]]]),a=ae(o,u),f=L([[U(),e.n.first[1]]]),c=L([[U(),e.d.first[1]]]),d=ae(f,c),p=r.div(l);return a.string==="L"&&d.string==="m^3"?p=p.mult(E(.001).normal):d.string==="L"&&a.string==="m^3"&&(p=p.mult(E(1e3).normal)),p},reduce(){if(!this.isDefined())return this;function e(u){let a=new ie(0);return u.children.forEach(f=>{let c=f[0],d;ye(c)?d=e(c):d=B(c)?c.first.value:c.value,a=a.isZero()?d:xi([a,d])}),a}function i(u,a){let f=u.children.map(c=>{let d=c[0],p=c[1],w;return ye(d)?(d=i(d,a),w=[d,p]):w=B(d)?[S(d.first.value.div(a)).oppose(),p]:[S(d.value.div(a)),p],w});return L(f)}let t=e(this.n),r=e(this.d),s=xi([t,r]),n=i(this.n,s),l=i(this.d,s),o=!1;return n.node.isOpposite()&&(o=!0,n=n.oppose()),l.node.isOpposite()&&(o=!o,l=l.oppose()),o&&(n=n.oppose()),ae(n,l,this.unit)},add(e){if(!this.isDefined())return this;if(!e.isDefined())return e;if(!this.isSameQuantityType(e))throw new Error("Erreur d'unit");return ae(this.n.mult(e.d).add(e.n.mult(this.d)),this.d.mult(e.d),this.unit).reduce()},sub(e){if(!this.isDefined())return this;if(!e.isDefined())return e;if(e.unit&&this.unit&&!e.unit.equalsTo(this.unit)||this.unit&&!e.unit||!this.unit&&e.unit)throw new Error("Erreur d'unit");return ae(this.n.mult(e.d).sub(e.n.mult(this.d)),this.d.mult(e.d),this.unit).reduce()},mult(e){let i=hs(e);if(!this.isDefined())return this;if(!i.isDefined())return i;let t;return this.unit&&i.unit?t=this.unit.mult(i.unit):this.unit?t=this.unit:t=i.unit,t&&t.string==="1"&&(t=void 0),ae(this.n.mult(i.n),i.d.mult(this.d),t).reduce()},div(e){return this.isDefined()?e.isDefined()?e.equalsTo(0)?ur("Division by zero"):this.mult(e.invert()):e:this},pow(e){if(!this.isDefined())return this;if(!e.isDefined())return e;if(e.isZero())return Qo(this.unit);if(e.isOne())return this;if(this.isZero())return this;if(this.isOne())return this;if(e.isMinusOne())return this.invert();let i;if(Se(e.node)){let t=e.node.value.toNumber();if(i=this.mult(this),t>=3)for(let r=1;r<t-1;r++)i=i.mult(this)}else if(B(e.node)&&Se(e.node.first)){let t=e.node.first.value.toNumber();if(i=this.mult(this),t>=3)for(let r=1;r<t-1;r++)i=i.mult(this);i=i.invert()}else if(we(this.node)){let t=this.node.factors.map(r=>r.normal);i=t.shift().pow(e),t.forEach(r=>{i=i.mult(r.pow(e))})}else if(this.isQuotient()||this.isDivision())i=this.n.node.normal.pow(e).div(this.d.node.normal.pow(e));else if(De(this.node)){let t=this.node.last.mult(e.node).eval();i=this.node.first.normal.pow(t.normal)}else if(e.equalsTo(S(.5).normal)&&Se(this.node))if(this.node.value.sqrt().isInt())i=S(this.node.value.sqrt()).normal;else{let t=this.node.value.toNumber(),r=oo(t);if(r===1){let s=L([[S(1),V(this.node,e.node)]]),n=L([[s,re()]]),l=U();i=ae(n,l)}else i=S(r).mult(S(t/(r*r)).pow(S(.5))).normal}else if(B(e.node)&&e.node.first.equals(S(.5))&&Se(this.node)&&this.node.value.sqrt().isInt())i=S(this.node.value.sqrt().toNumber()).normal.invert();else{let t,r;if(this.isNumeric()&&e.isNumeric()){let s=L([[S(1),V(this.node,e.node)]]);t=L([[s,re()]]),r=U()}else t=L([[ne(),V(this.node,e.node)]]),r=U();i=ae(t,r)}return i},oppose(){return this.isDefined()?ae(this.n.oppose(),this.d,this.unit):this},invert(){if(!this.isDefined())return this;let e=this.unit?this.unit.invert():void 0,i,t;if(this.n.length===1){let r=this.n.first[0];t=L([[r,re()]]);let s=this.n.first[1].symmetrize();i=L([[ne(),s]])}else i=U(),t=this.n;return i=i.mult(this.d),ae(i,t,e).reduce()},compareTo(e){return this.isDefined()?e.isDefined()?Dr(this,e):-1:1},get node(){return this.toNode()},toNode({formatTime:e}=Bo){if(!this.isDefined())return pn(this.error);let i,t=this.n.node,r=this.d.node;if(r.isOne())i=t;else{let s=!0;B(t)&&(s=!1,t=t.first),i=t.frac(r),s||(i=i.oppose())}if(this.unit)if(e){let s="",n=i.value.toNumber(),l=Math.floor(n/31536e6);l&&(s+=l+" ans "),n=n%31536e6;let o=Math.floor(n/864e5);o&&(s+=o+" jours "),n=n%864e5;let u=Math.floor(n/36e5);u&&(s+=u+" h "),n=n%36e5;let a=Math.floor(n/6e4);a&&(s+=a+" min "),n=n%6e4;let f=Math.floor(n/1e3);f&&(s+=f+" s "),n=n%1e3,n&&(s+=n+" ms "),i=E(s)}else i.unit=E("1"+this.unit.toNode({isUnit:!0}).toString({isUnit:!0})).unit;return i},get string(){return this.node.string},equalsTo(e){if(!this.isDefined())return!1;let i=hs(e);return i.isDefined()?this.n.mult(i.d).equalsTo(this.d.mult(i.n)):!1}};function ur(e){return Object.assign(Object.create(Xs),{type:ni,error:e})}function ae(e,i,t){let r=Object.create(Xs);return i||(i=U()),Object.assign(r,{_n:e,_d:i,unit:t,type:Mr}),r}function re(){return Xi([[S(1),S(1)]])}function xe(e){return L([[e,re()]])}function ne(){return xe(S(1))}function Uo(){return xe(S(0))}function U(){return L([[ne(),re()]])}function Ys(){return L([[Uo(),re()]])}function Qo(e){return ae(U(),U(),e)}function Xi(e){let i=Object.create(Or);return Object.assign(i,{type:Ii,children:!e||e.length===0?[[S(1),S(1)]]:e}),i}function L(e){let i=Object.create(Or);return Object.assign(i,{type:Pi,children:!e||e.length===0?Ys().children:e}),i}function V(e,i){return Xi([[i||S(1),e]])}function Ks(e){let i=cs,t=cs,r=null;if(_(e))r=ur("Incorrect expression");else if(bi(e))t=L([[ne(),V(e)]]),i=U();else if(ft(e)){let s=e.children.map(n=>n.normal);for(r=s.pop();s.length;)r=r.add(s.pop())}else if(di(e))t=L([[ne(),V(e)]]),i=U();else if(X(e))e.isInt()?(t=L([[xe(S(e.value)),re()]]),i=U()):r=E(pi(e).toString()).normal;else if(De(e))r=e.first.normal.pow(e.last.normal);else if(oi(e))r=e.first.normal.pow(S(.5).normal);else if(Ci(e)){let s=e.children[0].normal,n=s.node;if(s.equalsTo(0)||s.equalsTo("2pi"))r=E(1).normal;else if(s.equalsTo("pi")||s.equalsTo("-pi"))r=E(-1).normal;else if(s.equalsTo("pi/2")||s.equalsTo("-pi/2"))r=E(0).normal;else if(s.equalsTo("pi/3")||s.equalsTo("-pi/3"))r=E(.5).normal;else if(s.equalsTo("2pi/3")||s.equalsTo("-2pi/3"))r=E(-.5).normal;else if(s.equalsTo("pi/4")||s.equalsTo("-pi/4"))r=E("sqrt(2)/2").normal;else if(s.equalsTo("3pi/4")||s.equalsTo("-3pi/4"))r=E("-sqrt(2)/2").normal;else if(s.equalsTo("pi/6")||s.equalsTo("-pi/6"))r=E("sqrt(3)/2").normal;else if(s.equalsTo("5pi/6")||s.equalsTo("-5pi/6"))r=E("-sqrt(3)/2").normal;else{let l=e.copy([n]);if(i=U(),n.isNumeric()){let o=L([[S(1),V(l)]]);t=L([[o,re()]])}else t=L([[ne(),V(l)]])}}else if(Fi(e)){let s=e.children[0].normal,n=s.node;if(s.equalsTo(0)||s.equalsTo("2pi")||s.equalsTo("pi")||s.equalsTo("-pi"))r=E(0).normal;else if(s.equalsTo("pi/2"))r=E(1).normal;else if(s.equalsTo("-pi/2"))r=E(-1).normal;else if(s.equalsTo("pi/6")||s.equalsTo("5pi/6"))r=E(.5).normal;else if(s.equalsTo("-pi/6")||s.equalsTo("-5pi/6"))r=E(-.5).normal;else if(s.equalsTo("pi/4")||s.equalsTo("3pi/4"))r=E("sqrt(2)/2").normal;else if(s.equalsTo("-pi/4")||s.equalsTo("-3pi/4"))r=E("-sqrt(2)/2").normal;else if(s.equalsTo("pi/3")||s.equalsTo("2pi/3"))r=E("sqrt(3)/2").normal;else if(s.equalsTo("-pi/3")||s.equalsTo("-2pi/3"))r=E("-sqrt(3)/2").normal;else{let l=e.copy([n]);if(i=U(),n.isNumeric()){let o=L([[S(1),V(l)]]);t=L([[o,re()]])}else t=L([[ne(),V(l)]])}}else if(ut(e)){let s=e.children[0].normal,n=s.node;if(s.equalsTo(0))r=E(0).normal;else if(s.equalsTo("pi/6"))r=E("1/sqrt(3)").normal;else if(s.equalsTo("-pi/6"))r=E("-1/sqrt(3)").normal;else if(s.equalsTo("pi/4"))r=E(1).normal;else if(s.equalsTo("-pi/4"))r=E("-1").normal;else if(s.equalsTo("pi/3"))r=E("sqrt(3)").normal;else if(s.equalsTo("-pi/3"))r=E("-sqrt(3)").normal;else{let l=e.copy([n]);if(i=U(),n.isNumeric()){let o=L([[S(1),V(l)]]);t=L([[o,re()]])}else t=L([[ne(),V(l)]])}}else if(He(e)){let s=e.children[0].normal,n=s.node;if(_i(n))r=n.first.normal;else if(De(n))r=n.last.mult(n.first.ln()).normal;else if(s.equalsTo(1))r=E(0).normal;else if(s.equalsTo("e"))r=E(1).normal;else if(Se(n)){let l=n.value.toNumber(),o=us(l);if(o.length===1&&o[0][1]===1){let u=e.copy([n]),a=L([[S(1),V(u)]]);t=L([[a,re()]]),i=U()}else r=E(0).normal,r=r.add(S(0).normal),o.forEach(u=>{let[a,f]=u,c=E(`${f}*ln(${a})`).normal;r=r.add(c)})}else{let l=e.copy([n]);if(i=U(),n.isNumeric()){let o=L([[S(1),V(l)]]);t=L([[o,re()]])}else t=L([[ne(),V(l)]])}}else if(_i(e)){let s=e.first,n=s.normal;if(we(s)&&(He(s.first)||He(s.last)))He(s.first)?r=s.first.first.pow(s.last).normal:r=s.last.first.pow(s.first).normal;else if(He(s))r=s.first.normal;else if(n.equalsTo(0))r=E(1).normal;else{let l=e.copy([n.node]);if(i=U(),s.isNumeric()){let o=L([[S(1),V(l)]]);t=L([[o,re()]])}else t=L([[ne(),V(l)]])}}else if(Zi(e)){let s=e.first,n=s.normal;if(s.isNumeric())s.isLowerThan(0)?r=n.mult(-1):r=n;else{let l=e.copy([s]);i=U(),t=L([[ne(),V(l)]])}}else if(at(e)){let s=e.children[0].normal,n=s.node;if(De(n))r=n.last.mult(n.first.log()).normal;else if(s.equalsTo(1))r=E(0).normal;else if(s.equalsTo(10))r=E(1).normal;else if(Se(n)){let l=n.value.toNumber(),o=us(l);if(o.length===1&&o[0][1]===1){let u=e.copy([n]),a=L([[S(1),V(u)]]);t=L([[a,re()]]),i=U()}else r=E(0).normal,o.forEach(u=>{let[a,f]=u,c=E(`${f}*log(${a})`).normal;r=r.add(c)})}else{let l=e.copy([n]);if(i=U(),n.isNumeric()){let o=L([[S(1),V(l)]]);t=L([[o,re()]])}else t=L([[ne(),V(l)]])}}else if(vr(e)){let s=e.children[0].normal.node;if(s.isNumeric())r=S(s.eval({decimal:!0}).value.floor()).normal;else{let n=e.copy([s]);i=U(),t=L([[ne(),V(n)]])}}else if(wr(e)){let s=e.children.map(o=>o.normal.node),n=s[0],l=s[1];if(e.isNumeric())if(B(n)&&n.first.isInt()&&(n=n.first),B(l)&&l.first.isInt()&&(l=l.first),Se(n)&&Se(l))r=S(zs(n.value.toNumber(),l.value.toNumber())).normal;else{let o=e.copy(s),u=L([[S(1),V(o)]]);t=L([[u,re()]]),i=U()}else{let o=e.copy(s);t=L([[ne(),V(o)]]),i=U()}}else if(br(e)){let s=e.children.map(o=>o.normal.node),n=s[0],l=s[1];if(e.isNumeric())if((Se(n)||B(n)&&n.first.isInt())&&(Se(l)||B(l)&&l.first.isInt()))r=S(new ie(n.string).mod(new ie(l.string))).normal;else{let o=e.copy(s),u=L([[S(1),V(o)]]);t=L([[u,re()]]),i=U()}else{let o=e.copy(s);t=L([[ne(),V(o)]]),i=U()}}else if(pr(e)||Di(e)){let s=e.children.map(o=>o.normal.node),n=s[0],l=s[1];if(e.isNumeric())r=n.isLowerThan(l)?n.normal:l.normal;else{let o=e.copy(s);t=L([[ne(),V(o)]]),i=U()}}else if(gr(e)||lt(e)){let s=e.children.map(o=>o.normal.node),n=s[0],l=s[1];if(e.isNumeric())r=n.isGreaterThan(l)?n.normal:l.normal;else{let o=e.copy(s);t=L([[ne(),V(o)]]),i=U()}}else if(ot(e))r=e.first.div(S(100)).normal;else if(_e(e))t=L([[ne(),V(e)]]),i=U();else if(li(e))t=L([[ne(),V(e)]]),i=U();else if(me(e))t=L([[ne(),V(si(e.toString({displayUnit:!1})))]]),i=U();else if(z(e)||fe(e))r=Ks(e.first);else if(B(e))r=e.first.normal,r.node.isZero()||(r=r.oppose());else if(Oe(e)){r=e.children[0].normal;for(let s=1;s<e.children.length;s++)r=r.add(e.children[s].normal)}else if(we(e)||Ni(e)||Ei(e)){r=S(1).normal;for(let s=0;s<e.children.length;s++)r=r.mult(e.children[s].normal)}else if(Pe(e))r=e.first.normal.sub(e.last.normal);else if(ui(e)||Ce(e))r=e.first.normal.div(e.last.normal);else if(nt(e)){let s=!0;e.ops.forEach((n,l)=>{let o=E(e.children[l].string+n+e.children[l+1]);s=s&&o.eval().boolvalue}),r=Qe(s).normal}else ct(e)?r=Qe(!e.first.eval().equals(e.last.eval())).normal:yi(e)?r=Qe(e.first.eval().equals(e.last.eval())).normal:ei(e)?r=Qe(e.first.eval().isLowerThan(e.last.eval())).normal:ti(e)?r=Qe(e.first.eval().isGreaterThan(e.last.eval())).normal:ii(e)?r=Qe(e.first.eval().isLowerOrEqual(e.last.eval())).normal:ri(e)?r=Qe(e.first.eval().isGreaterOrEqual(e.last.eval())).normal:r=ur("Impossible to normalize "+e.string);if(r||(r=ae(t,i)),e.unit){let s=e.unit.normal(),n=L([[s.n.first[0],re()]]),l=L([[s.d.first[0],re()]]),o=ae(n,l),u=L([[xe(S(1)),s.n.first[1]]]),a=L([[xe(S(1)),s.d.first[1]]]);s=ae(u,a),r=r.mult(o),s.string!=="1"&&(r.unit=s)}return r}function hs(e){let i;return typeof e=="string"||typeof e=="number"||ie.isDecimal(e)?i=E(e).normal:i=e,i}ie.set({toExpPos:89,toExpNeg:-89});var jo={isUnit:!1,displayUnit:!0,comma:!1,addBrackets:!1,implicit:!1},Vo={addBrackets:!1,implicit:!1,addSpaces:!0,keepUnecessaryZeros:!1},zo={addBrackets:!1,implicit:!1,addSpaces:!0,keepUnecessaryZeros:!1},Go={precision:20,decimal:!1};function Wo(){return{type:no,generated:[],derivate(e="x"){return _(this)?this:yo(this,e)},get normal(){return this._normal||(this._normal=Ks(this)),this._normal},compose(e,i="x"){return _(this)?this:bo(this,e,i)},reduce(){if(_(this))return this;let e=this.removeSigns();if(M(e)){let i=e.isOpposite(),t=pi(i?e.first.string:e.string).reduce(),r;return t.n.equals(0)?r=S(0):t.d.equals(1)?r=t.s===1?S(t.n):Li([S(t.n)]):(r=Qi([S(t.n),S(t.d)]),t.s===-1&&(r=Li([r]))),i&&(B(r)?r=r.first:r=Li([r])),r}else return this},isCorrect(){return this.type!==ni},isIncorrect(){return this.type===ni},isRelations(){return this.type===Tr},isEquality(){return this.type===Et},isUnequality(){return this.type===Nt},isInequality(){return this.type===kt||this.type===Lt||this.type===qt||this.type===Mt},isBoolean(){return this.type===It},isSum(){return this.type===ht},isDifference(){return this.type===dt},isOpposite(){return this.type===yt},isPositive(){return this.type===_t},isProduct(){return this.type===mi||this.type===Oi||this.type===Ai},isDivision(){return this.type===mt},isQuotient(){return this.type===pt},isPower(){return this.type===gt},isRadical(){return this.type===Bt},isPGCD(){return this.type===Ot},isMax(){return this.type===Sr},isMaxP(){return this.type===Er},isMin(){return this.type===Nr},isMinP(){return this.type===kr},isMod(){return this.type===Pt},isCos(){return this.type===xt},isSin(){return this.type===Ct},isTan(){return this.type===Ft},isLn(){return this.type===Zt},isLog(){return this.type===At},isExp(){return this.type===Ht},isFloor(){return this.type===Rt},isAbs(){return this.type===Lr},isNumber(){return this.type===bt},isBracket(){return this.type===St},isSymbol(){return this.type===wt},isSegmentLength(){return this.type===Dt},isTemplate(){return this.type===Tt},isHole(){return this.type===vt},isTime(){return this.type===qr},isLimit(){return this.type===Qt},isChild(){return!!this.parent},isIdentifier(){return this.type===Ut},isFirst(){return!!this.parent&&this.parent.children.indexOf(this)===0},isLast(){return!!this.parent&&this.parent.children.indexOf(this)===1},isFunction(){return this.isRadical()||this.isPGCD()||this.isMin()||this.isMinP()||this.isMax()||this.isMaxP()||this.isMod()||this.isCos()||this.isSin()||this.isTan()||this.isLog()||this.isLn()||this.isExp()||this.isFloor()||this.isAbs()},isDuration(){return _(this)?!1:this.isTime()||!!this.unit&&this.unit.isConvertibleTo(se("s"))},isLength(){return _(this)?!1:!!this.unit&&this.unit.isConvertibleTo(se("m"))},isMass(){return _(this)?!1:!!this.unit&&this.unit.isConvertibleTo(se("g"))},isVolume(){return _(this)?!1:!!this.unit&&(this.unit.isConvertibleTo(se("m").mult(se("m")).mult(se("m")))||this.unit.isConvertibleTo(se("L")))},compareTo(e){return _(this)?-1:_(e)?1:Dr(this,e)},isLowerThan(e){if(_(this))return!1;let i=Te(e);if(_(i))return!1;let t=this.normal.node,r=i.normal.node,s;try{s=pi(t).isLowerThan(pi(r))}catch{s=t.eval({decimal:!0}).isLowerThan(r.eval({decimal:!0}))}return s},isLowerOrEqual(e){if(_(this))return!1;let i=Te(e);return _(i)?!1:this.isLowerThan(i)||this.equals(i)},isGreaterThan(e){if(_(this))return!1;let i=Te(e);return _(i)?!1:i.isLowerThan(this)},isGreaterOrEqual(e){if(_(this))return!1;let i=Te(e);return _(i)?!1:this.isGreaterThan(i)||this.equals(i)},isOne(){return this.toString({displayUnit:!1})==="1"},isMinusOne(){return this.string==="-1"},isZero(){return this.toString({displayUnit:!1})==="0"},equalsZero(){return this.eval().isZero()},strictlyEquals(e){return this.string===e.string},equals(e){if(_(this))return!1;let i=Te(e);return _(i)?!1:yi(this)?yi(i)&&(this.first.equals(i.first)&&this.last.equals(i.last)||this.first.equals(i.last)&&this.last.equals(i.first)):ei(this)?ei(i)&&this.first.equals(i.first)&&this.last.equals(i.last)||ti(i)&&this.first.equals(i.last)&&this.last.equals(i.first):ii(this)?ii(i)&&this.first.equals(i.first)&&this.last.equals(i.last)||ri(i)&&this.first.equals(i.last)&&this.last.equals(i.first):ti(this)?ti(i)&&this.first.equals(i.first)&&this.last.equals(i.last)||ei(i)&&this.first.equals(i.last)&&this.last.equals(i.first):ri(this)?ri(i)&&this.first.equals(i.first)&&this.last.equals(i.last)||ii(i)&&this.first.equals(i.last)&&this.last.equals(i.first):this.normal.string===i.normal.string},isSameQuantityType(e){return this.normal.isSameQuantityType(e.normal)},get terms(){let e,i,t;return Oe(this)?(fe(this.first)?(t={op:"+",term:this.first.first},e=[t]):B(this.first)?(t={op:"-",term:this.first.first},e=[t]):e=this.first.terms,t={op:"+",term:this.last},i=[t],e.concat(i)):Pe(this)?(fe(this.first)?(t={op:"+",term:this.first.first},e=[t]):B(this.first)?(t={op:"-",term:this.first.first},e=[t]):e=this.first.terms,t={op:"-",term:this.last},i=[t],e.concat(i)):(t={op:"+",term:this},[t])},get factors(){if(we(this)){let e=this.first.factors,i=this.last.factors;return e.concat(i)}else return[this]},get pos(){return this.parent?this.parent.children.indexOf(this):0},toString(e){return _(this)?this.error:go(this,{...jo,...e||{}})},get string(){return this.toString()},toLatex(e){return vo(this,{...Vo,...e||{}})},get latex(){return this.toLatex()},toTexmacs(e){return wo(this,{...zo,...e||{}})},get texmacs(){return this.toTexmacs()},get root(){return this.parent?this.parent.root:this},isInt(){return X(this)&&this.value.isInt()},isEven(){return Se(this)&&this.value.mod(2).equals(0)},isOdd(){return Se(this)&&this.value.mod(2).equals(1)},isNumeric(){return X(this)||M(this)&&this.children.every(e=>e.isNumeric())},add(e){if(_(this))return this;let i=Te(e);return _(i)?i:$s([this,i])},sub(e){if(_(this))return this;let i=Te(e);return _(i)?i:en([this,i])},mult(e,i=mi){if(_(this))return this;let t=Te(e);return _(t)?t:i===mi?rn([this,t]):i===Oi?Pr([this,t]):Jo([this,t])},div(e){if(_(this))return this;let i=Te(e);return _(i)?i:tn([this,i])},frac(e){if(_(this))return this;let i=Te(e);return _(i)?i:Qi([this,i])},oppose(){return _(this)?this:Li([this])},inverse(){return _(this)?this:Qi([S(1),this])},radical(){return _(this)?this:Ir([this])},positive(){return _(this)?this:nn([this])},bracket(){return _(this)?this:ln([this])},pow(e){if(_(this))return this;let i=Te(e);return _(i)?i:sn([this,i])},floor(){return _(this)?this:dn([this])},mod(e){if(_(this))return this;let i=Te(e);return _(i)?i:hn([this,i])},abs(){return _(this)?this:mn([this])},exp(){return _(this)?this:cn([this])},ln(){return _(this)?this:an([this])},log(){return _(this)?this:fn([this])},sin(){return _(this)?this:un([this])},cos(){return _(this)?this:on([this])},shallowShuffleTerms(){return _(this)?this:Oe(this)||Pe(this)?qo(this):this},shallowShuffleFactors(){return _(this)?this:we(this)?Do(this):this},shuffleTerms(){return _(this)?this:Mo(this)},shuffleFactors(){return _(this)?this:Oo(this)},shuffleTermsAndFactors(){return _(this)?this:Po(this)},sortTerms(){return _(this)?this:xo(this)},shallowSortTerms(){return _(this)?this:Io(this)},sortFactors(){return _(this)?this:Fo(this)},shallowSortFactors(){return _(this)?this:Co(this)},sortTermsAndFactors(){return _(this)?this:Zo(this)},reduceFractions(){return _(this)?this:_o(this)},removeMultOperator(){return _(this)?this:So(this)},removeUnecessaryBrackets(e=!1){return _(this)?this:Lo(this,e)},removeZerosAndSpaces(){return _(this)?this:To(this)},removeSigns(){return _(this)?this:Ao(this)},removeNullTerms(){return _(this)?this:Eo(this)},removeFactorsOne(){return _(this)?this:No(this)},simplifyNullProducts(){return _(this)?this:ko(this)},searchUnecessaryZeros(){if(_(this))return!1;if(X(this)){let e=[/^0\d+/,/[.,]\d*0$/],i=this.input;return e.some(t=>i.replace(/ /g,"").match(t))}else return M(this)?this.children.some(e=>e.searchUnecessaryZeros()):!1},searchMisplacedSpaces(){if(_(this))return!1;if(X(this)){let[e,i]=this.input.replace(",",".").split("."),t=[/\d{4}/,/\s$/,/\s\d{2}$/,/\s\d{2}\s/,/\s\d$/,/\s\d\s/];return!!(t.some(r=>e.match(r))||i&&(t=[/\d{4}/,/^\s/,/^\d{2}\s/,/\s\d{2}\s/,/^\d\s/,/\s\d\s/],t.some(r=>i.match(r))))}else return M(this)?this.children.some(e=>e.searchMisplacedSpaces()):!1},eval(e){if(_(this))return this;e={...Go,...e};let i=this.substitute(e.values),t=typeof e.unit=="string"&&e.unit!=="HMS"?E("1 "+e.unit).unit:e.unit;if(this.isNumeric()&&(lt(this)||Di(this)))Di(this)?i=this.first.isLowerThan(this.last)?this.first:this.last:i=this.first.isGreaterThan(this.last)?this.first:this.last;else{let r=i.normal;if(t&&r.unit){if(t==="HMS"&&!r.isDuration()||t!=="HMS"&&!E("1"+t.string).normal.isSameQuantityType(r))throw new Error(`Units incompatibles ${r.string} ${typeof t=="string"?t:t.string}`);if(t!=="HMS"){let s=r.unit.getCoefTo(t.normal());r=r.mult(s)}}t==="HMS"?i=r.toNode({formatTime:!0}):i=r.node,t&&t!=="HMS"&&(i.unit=t)}if(e.decimal&&t!=="HMS"){let r=i.unit;i=S(ue(i).toDecimalPlaces(e.precision).toString()),r&&(i.unit=r)}return i},generate(){return _(this)?this:(this.root.generated=[],Ke(this))},shallow(){return{nature:this.type,children:M(this)?this.children.map(e=>e.type):null,unit:this.unit?this.unit.string:""}},substitute(e={}){return _(this)?this:(this.root.substitutionMap={...this.root.substitutionMap,...e},or(this,e))},matchTemplate(e){if(_(this)||_(e))return!1;let i,t,r;function s(o,u){for(let a=0;a<u.length;a++)if(!o.children[a].matchTemplate(u.children[a]))return!1;return!0}function n(o,u,a){let f=o===0?0:Math.floor(Math.log10(o))+1;return f<=a&&f>=u}function l(o,u,a){return o>=u&&o<=a}if(X(e))return X(this)&&this.value.equals(e.value);if(_e(e))return this.isHole();if(me(e))return me(this)&&this.symbol===e.symbol;if(Ie(e))switch(e.nature){case"$e":case"$ep":case"$ei":if(e.signed&&(B(this)||fe(this))||e.relative&&B(this))return this.first.matchTemplate(Xe({nature:e.nature,children:e.children}));if(!_e(e.children[1])&&!n(this.value.toNumber(),_e(e.children[0])?0:e.children[0].value.toNumber(),e.children[1].value.toNumber())||!_e(e.children[2])&&!l(this.value.toNumber(),e.children[2].value.toNumber(),e.children[3].value.toNumber()))return!1;if(e.nature==="$e")return this.isInt();if(e.nature==="$ep")return this.isEven();if(e.nature==="$ei")return this.isOdd();break;case"$d":if(e.relative&&B(this))return this.first.matchTemplate(e);if(!this.isNumber()||this.isInt())return!1;{let[o,u]=this.value.toString().split(".");if(t=parseInt(o,10),r=parseInt(u,10),e.children[0].isTemplate()){if(!S(Math.floor(Math.log10(t))+1).matchTemplate(e.children[0]))return!1}else if(!n(t,e.children[0].value.toNumber(),e.children[0].value.toNumber()))return!1;if(e.children[1].isTemplate()){if(!S(Math.floor(Math.log10(r))+1).matchTemplate(e.children[1]))return!1}else if(!n(r,e.children[1].value.toNumber(),e.children[1].value.toNumber()))return!1;return!0}case"$l":return!0;default:return i=parseInt(e.nature.slice(1,e.nature.length),10),this.matchTemplate(e.root.generated[i-1])}else if(M(e))return M(this)&&e.type===this.type&&e.length===this.length&&s(this,e);return!0},copyFromString(e=!0){return E(this.toString({displayUnit:e}))},copy(e){let i={};return this.unit&&(i.unit=this.unit),M(this)&&(i.children=e||[...this.children]),X(this)&&(i.value=this.value,i.input=this.input),di(this)&&(i.value=this.value,i.boolvalue=this.boolvalue),me(this)&&(i.symbol=this.symbol),Si(this)&&(i.begin=this.begin,i.end=this.end),li(this)&&(i.name=this.name),_(this)&&(i.error=this.error,i.message=this.message),bi(this)&&(i.sign=this.sign),nt(this)&&(i.ops=this.ops),R({type:this.type,...i})},[Symbol.iterator](){return this.children[Symbol.iterator]()},get first(){return this.children[0]},get last(){return this.children[this.children.length-1]},get length(){return this.children.length},isTrue(){return di(this)&&this.boolvalue},isFalse(){return di(this)&&!this.boolvalue}}}function R({type:e,children:i,...t}){let r=Wo();return i&&(i=i.map(s=>{if(s.parent){let n=s.copy();return n.parent=r,n}else return s.parent=r,s}),r.children=i),r.type=e,Object.assign(r,t),r}function $s(e){return R({type:ht,children:e})}function en(e){return R({type:dt,children:e})}function tn(e){return R({type:mt,children:e})}function rn(e){return R({type:mi,children:e})}function Pr(e){return R({type:Oi,children:e})}function Jo(e){return R({type:Ai,children:e})}function Qi(e){return R({type:pt,children:e})}function sn(e){return R({type:gt,children:e})}function Li(e){return R({type:yt,children:e})}function nn(e){return R({type:_t,children:e})}function ln(e){return R({type:St,children:e})}function Ir(e){return R({type:Bt,children:e})}function on(e){return R({type:xt,children:e})}function un(e){return R({type:Ct,children:e})}function Xo(e){return R({type:Ft,children:e})}function an(e){return R({type:Zt,children:e})}function fn(e){return R({type:At,children:e})}function cn(e){return R({type:Ht,children:e})}function Yo(e){return R({type:Ot,children:e})}function hn(e){return R({type:Pt,children:e})}function dn(e){return R({type:Rt,children:e})}function mn(e){return R({type:Lr,children:e})}function Ko(e){return R({type:Nr,children:e})}function $o(e){return R({type:kr,children:e})}function eu(e){return R({type:Sr,children:e})}function iu(e){return R({type:Er,children:e})}function tu(e){return R({type:_r,children:e})}function S(e){let i=new ie(typeof e=="string"?e.replace(",",".").replace(/\s/g,""):e);return R({type:bt,value:i,input:e.toString().trim().replace(",",".")})}function Qe(e){return R({type:It,boolvalue:e,value:e?new ie(1):new ie(0)})}function si(e){return R({type:wt,symbol:e})}function ru(e,i){return R({type:Dt,begin:e,end:i})}function pn(e,i="",t=""){return R({type:ni,error:e,message:i,input:t})}function be(){return R({type:vt})}function Xe(e){return R({type:Tt,...e})}function su(e,i){return R({type:Tr,ops:e,children:i})}function nu(e){return R({type:Et,children:e})}function lu(e){return R({type:Nt,children:e})}function ou(e,i){return R(i==="<"?{type:kt,children:e}:i===">"?{type:qt,children:e}:i==="<="?{type:Lt,children:e}:{type:Mt,children:e})}function uu(e){return R({type:qr,children:e})}function au(e){return R({type:Ut,name:e})}function fu(e,i){return R({type:Qt,sign:e,children:i})}function Te(e){let i;return typeof e=="string"||typeof e=="number"||ie.isDecimal(e)?i=E(e):i=e,i}var ds=H("+"),ms=H("-"),cu=H("*"),Jt=H(":"),hu=H("/"),ps=H("^"),du=H("?"),mu=H("."),pu=H("="),gu=H("!="),vu=H("%"),gs=H("\\"),vs=H("m"),ws=H("d"),wu=H("cd"),bu=H("@[<>]=?"),bs=H("("),ys=H(")"),ge=H(";"),Xt=H("["),Yt=H("]"),Be=H("{"),Ue=H("}"),yu=H("$$"),_u=H("@\\$(e[pi]?)(rs?)?"),Tu=H("@\\$d(r)?"),Su=H("@\\$(\\d)+"),Eu=H("$l"),Nu=H("$"),ku=H("@&[a-z]+(\\d)*|&(\\d)+"),Lu=H("@_({.+}|([0-9]+|[ijknmp]))"),qu=H("@[A-Z][A-Z]"),Mu=H("@pi|infinity"),Du=H("@false|true"),_s=H("@cos|sin|sqrt|pgcd|minip|mini|maxip|maxi|cos|sin|tan|exp|ln|log|mod|floor|abs"),Ou=H("@[\\d]+"),Pu=H("@\\d+[\\d\\s]*([,\\.][\\d\\s]*\\d+)?"),Iu=H("@((\\d+[\\d\\s]*([,\\.][\\d\\s]*\\d+)?)\\s*ans?)?\\s*((\\d+[\\d\\s]*([,\\.][\\d\\s]*\\d+)?)\\s*mois)?\\s*((\\d+[\\d\\s]*([,\\.][\\d\\s]*\\d+)?)\\s*semaines?)?\\s*((\\d+[\\d\\s]*([,\\.][\\d\\s]*\\d+)?)\\s*jours?)?\\s*((\\d+[\\d\\s]*([,\\.][\\d\\s]*\\d+)?)\\s*h(?![a-zA-Z]))?\\s*((\\d+[\\d\\s]*([,\\.][\\d\\s]*\\d+)?)\\s*mins?)?\\s*((\\d+[\\d\\s]*([,\\.][\\d\\s]*\\d+)?)\\s*s(?![a-zA-Z]))?\\s*((\\d+[\\d\\s]*([,\\.][\\d\\s]*\\d+)?)\\s*ms)?"),Ts=H("@Qr||k|kL|hL|daL|L|dL|cL|mL|km|hm|dam|dm|cm|mm|ans|min|ms|t|q|kg|hg|dag|dg|cg|mg||m|g|h|s"),xu=H("@(inf|\\d+)(plus|moins)"),Ss="no valid atom found",Cu="non compatible units",Fu="Unexpected end of expression",Zu="unit required",Au="no unit before a factor in implicit product",Hu="Number must be placed at the beginning of an implicit product",Ru=H("@[a-z]{1}"),Bu={implicit:!0};function ar({implicit:e}=Bu){let i,t,r,s;function n(h){return i.match(h)?(t=i.lexem,s=i.parts,t):""}function l(h){return i.prematch(h)}function o(h){if(!n(h))throw new Error(`${h.pattern} required`)}function u(){return a()}function a(){let h=[],m=[];h.push(f());let b;for(;n(pu)||n(gu)||n(bu);)m.push(t),h.push(f());return m.length===0?b=h[0]:m.length===1?m[0]==="!="?b=lu([h[0],h[1]]):m[0]==="="?b=nu([h[0],h[1]]):b=ou([h[0],h[1]],m[0]):b=su(m,h),b}function f(){let h,m,b="";for((n(ms)||n(ds))&&(b=t),m=c(),b?h=b==="-"?Li([m]):nn([m]):h=m;n(ds)||n(ms);){if(b=t,m=c(),!m.isSameQuantityType(h))throw new Error(Cu);h=b==="+"?$s([h,m]):en([h,m])}return h}function c(){let h=d();for(;n(cu)||n(Jt)||n(hu);)t==="*"?h=rn([h,d()]):t===":"?h=tn([h,d({localImplicit:!1})]):h=Qi([h,d({localImplicit:!1})]);return h}function d({localImplicit:h=!0}={}){let m=p(),b;if(e&&h)do{try{b=p()}catch(D){if(D.message===Ss)b=null;else throw D}if(b&&b.isNumber())throw new Error(Hu);if(b&&m.unit)throw new Error(Au);b&&(m=Pr([m,b]))}while(b);return m}function p(){let h=w();for(;n(ps);)h=sn([h,w()]);return h}function w(){let h,m,b,D=null,C=null;if(n(xu)){let y=t,N,k;y[0]==="i"?(N=y.substring(3)==="plus"?"+":"-",k=[si("inf")]):(N=y[y.length-2]==="u"?"+":"-",k=y[y.length-2]==="u"?[S(y.substring(0,y.length-4))]:[S(y.substring(0,y.length-5))]),h=fu(N,k)}else if(n(ku))h=au(t);else if(n(Du))h=Qe(t==="true");else if(n(Iu)){let y=["ans","mois","semaines","jours","h","min","s","ms"],N=[s[3],s[6],s[9],s[12],s[15],s[18],s[21],s[24]],k=N.filter(I=>!!I),O=k.length===1?y[N.findIndex(I=>!!I)]:null;if(O)h=ar().parse(k[0]),h.unit=se(O);else if(k.length===0)h=S(0),h.unit=se("s");else{let I=N.map((x,$)=>{let oe=x?ar().parse(x.trim()):S(0);return oe.unit=se(y[$]),oe});h=uu(I)}}else if(n(qu))h=ru(t.charAt(0),t.charAt(1));else if(n(Pu))h=S(t);else if(n(du))h=be();else if(m=n(_s)){switch(o(bs),m){case"sqrt":h=Ir([u()]);break;case"pgcd":{let y=u();o(ge);let N=u();h=Yo([y,N]);break}case"minip":{let y=u();o(ge);let N=u();h=$o([y,N]);break}case"mini":{let y=u();o(ge);let N=u();h=Ko([y,N]);break}case"maxip":{let y=u();o(ge);let N=u();h=iu([y,N]);break}case"maxi":{let y=u();o(ge);let N=u();h=eu([y,N]);break}case"mod":{let y=u();o(ge);let N=u();h=hn([y,N]);break}case"cos":h=on([u()]);break;case"sin":h=un([u()]);break;case"tan":h=Xo([u()]);break;case"ln":h=an([u()]);break;case"log":h=fn([u()]);break;case"exp":h=cn([u()]);break;case"floor":h=dn([u()]);break;case"abs":h=mn([u()]);break;default:throw new Error("function not recognized")}o(ys)}else if(n(_u)){let y=s[2],N=s[3],k=!!N&&N.includes("s");b=[];let O=[],I=[],x=[],$=be(),oe=be(),We=be(),ai=be();if(n(Be)?(oe=u(),n(ge)&&($=oe,oe=u()),o(Ue)):n(Xt)&&(We=u(),o(ge),ai=u(),o(Yt)),n(gs))if(n(Be)){b=[];do n(vs)?O.push(u()):n(ws)?I.push(u()):n(wu)?x.push(u()):b.push(u());while(n(ge));o(Ue)}else o(Xt),D=u(),o(ge),C=u(),o(Yt);let te={nature:"$"+y,relative:!!N,signed:k,children:[$,oe,We,ai]};b.length&&(te.exclude=b),O.length&&(te.excludeMultiple=O),I.length&&(te.excludeDivider=I),x.length&&(te.excludeCommonDividersWith=x),D&&(te.excludeMin=D),C&&(te.excludeMax=C),h=Xe(te)}else if(n(Tu)){let y="d",N=s[2],k=be(),O=be(),I=be(),x=be(),$=be(),oe=be();n(Be)&&(k=u(),n(Jt)&&(O=k,k=be(),I=u()),n(ge)&&(x=u(),n(Jt)&&($=x,x=be(),oe=u())),o(Ue)),h=Xe({nature:"$"+y,relative:!!N,children:[k,x,O,I,$,oe]})}else if(n(Su)){let y=s[2];h=Xe({nature:"$"+y,children:[]})}else if(n(Eu)){let y=t,N=[],k=[],O=[];for(b=[],D=null,C=null,o(Be),N.push(u());n(ge);)N.push(u());if(o(Ue),n(gs))if(n(Be)){b=[];do n(vs)?k.push(u()):n(ws)?O.push(u()):b.push(u());while(n(ge));o(Ue)}else o(Xt),D=u(),o(ge),C=u(),o(Yt);let I={nature:y,children:N};b.length&&(I.exclude=b),k.length&&(I.excludeMultiple=k),O.length&&(I.excludeDivider=O),D&&(I.excludeMin=D),C&&(I.excludeMax=C),h=Xe(I)}else if(n(yu)){let y=null;n(Ou)&&(y=parseInt(t,10)),o(Be);let N={nature:"$$",children:[u()]};y&&(N.precision=y),h=Xe(N),o(Ue)}else if(n(Nu))o(Be),h=Xe({nature:"$",children:[u()]}),o(Ue);else if(n(Mu))h=si(t);else if(n(Ru)){let y=t;switch(y){default:n(Lu)&&(y+=t),h=si(y)}}else if(n(bs))h=ln([u()]),o(ys);else if(n(Be))h=u(),o(Ue);else throw new Error(Ss);if(h&&n(vu)&&(h=tu([h])),h&&!l(_s)){let y=g();y&&(h.unit=y)}return h}function g(){function h(){let m=se(t);if(n(ps)){let b=w();m=m.pow(b)}return m}if(n(Ts)){let m=h();for(;n(mu);)if(n(Ts))m=m.mult(h());else throw new Error(Zu);return m}else return null}return{parse(h){let m;if(typeof h=="number"||ie.isDecimal(h))m=S(h);else{h=h.trim(),r=h,i=so(h);try{if(m=u(),i.pos<r.length)throw new Error(Fu)}catch(b){let D="-".repeat(i.pos);D+="^";let C=`
${r}
${D}
${b.message}`;m=pn(b.message,C,h)}}return m}}}var Uu=ar;function E(e,i){return Uu(i).parse(e)}console.log("toto");var gn=E("1/0"),vn=gn.normal;vn.node;console.log("e",gn.string);console.log("n",vn.string);function ki(){}const Ri={};function Qu(e,i="info"){if(!Object.prototype.hasOwnProperty.call(Ri,e)||Ri[e].level!==i){const t=["trace","debug","info","warn","fail"],r=`%c[${e}] `,s=`[${e}] `,n=t.indexOf(i)<=t.indexOf("fail")?console.error.bind(console,r,"color:#ED8784"):ki,l=t.indexOf(i)<=t.indexOf("warn")?console.warn.bind(console,r,"color:#F3D9A2"):ki,o=t.indexOf(i)<=t.indexOf("info")?console.info.bind(console,r,"color:#8CE9FF"):ki,u=t.indexOf(i)<=t.indexOf("debug")?console.log.bind(console,s):ki,a=t.indexOf(i)<=t.indexOf("trace")?console.log.bind(console,s):ki;Ri[e]={level:i,fail:n,warn:l,info:o,debug:u,trace:a}}return Ri[e]}function ju(e){return typeof e=="object"&&!!e.text}let{info:la,fail:Vu,warn:oa}=Qu("store","info");const Bi=Ti(16),Es=Ti(!1),zu=Ti(null),Gu=Ti(e=>""),Wu=Ti(e=>e);function Ju(){ji(Es)||Nn(()=>import("../../chunks/mathlive.min-6070d7bc.js"),[],import.meta.url).then(e=>{Es.set(!0),zu.set(e.MathfieldElement),Wu.set(e.convertLatexToMarkup);const i=/\$\$(.*?)\$\$/g,t=(s,n)=>e.convertLatexToMarkup(n),r=s=>s?Array.isArray(s)?s.map(n=>r(n)):ju(s)?{...s,html:r(s.text)}:typeof s=="string"?s.replace(i,t):s:"";Gu.set(r)}).catch(e=>{Vu("erreur while importing mathlive",e)})}const Ns=[{text:"AutoMaths",url:"/automaths",tooltip:"Travailler les automatismes"},{text:"Blog",url:"/blog",tooltip:""}];const{document:Kt}=Os;function ks(e,i,t){const r=e.slice();r[5]=i[t];const s=r[0].url.pathname.includes(r[5].url);return r[6]=s,r}function Xu(e){let i,t;const r=e[3].default,s=Ee(r,e,e[4],null);return{c(){i=G("div"),s&&s.c(),this.h()},l(n){i=W(n,"DIV",{class:!0});var l=j(i);s&&s.l(l),l.forEach(q),this.h()},h(){T(i,"class","p-6")},m(n,l){Y(n,i,l),s&&s.m(i,null),t=!0},p(n,l){s&&s.p&&(!t||l&16)&&Ne(s,r,n,n[4],t?Le(r,n[4],l,null):ke(n[4]),null)},i(n){t||(A(s,n),t=!0)},o(n){Q(s,n),t=!1},d(n){n&&q(i),s&&s.d(n)}}}function Ls(e){let i,t=e[5].text+"",r,s,n,l;return{c(){i=G("a"),r=et(t),s=he(),this.h()},l(o){i=W(o,"A",{class:!0,href:!0});var u=j(i);r=it(u,t),s=de(u),u.forEach(q),this.h()},h(){T(i,"class","px-2 mx-2 pb-2 svelte-hugjez"),T(i,"href",e[5].url),Zr(i,"active",e[6])},m(o,u){Y(o,i,u),J(i,r),J(i,s),n||(l=En(Ln.call(null,i,{content:e[5].tooltip,position:"bottom"})),n=!0)},p(o,u){e=o,u&1&&Zr(i,"active",e[6])},d(o){o&&q(i),n=!1,l()}}}function Yu(e){let i,t,r,s,n,l,o,u,a=Ns,f=[];for(let c=0;c<a.length;c+=1)f[c]=Ls(ks(e,a,c));return{c(){i=G("img"),r=he(),s=G("div"),n=G("a"),l=G("strong"),o=et("Ubumaths"),u=he();for(let c=0;c<f.length;c+=1)f[c].c();this.h()},l(c){i=W(c,"IMG",{src:!0,alt:!0,class:!0}),r=de(c),s=W(c,"DIV",{class:!0});var d=j(s);n=W(d,"A",{href:!0});var p=j(n);l=W(p,"STRONG",{class:!0});var w=j(l);o=it(w,"Ubumaths"),w.forEach(q),p.forEach(q),u=de(d);for(let g=0;g<f.length;g+=1)f[g].l(d);d.forEach(q),this.h()},h(){Tn(i.src,t="/images/gidouille.png")||T(i,"src",t),T(i,"alt","gidouille"),T(i,"class","w-8 mr-2"),T(l,"class","text-xl uppercase text-primary-500 mr-6"),T(n,"href","/"),T(s,"class","inline-block")},m(c,d){Y(c,i,d),Y(c,r,d),Y(c,s,d),J(s,n),J(n,l),J(l,o),J(s,u);for(let p=0;p<f.length;p+=1)f[p].m(s,null)},p(c,d){if(d&1){a=Ns;let p;for(p=0;p<a.length;p+=1){const w=ks(c,a,p);f[p]?f[p].p(w,d):(f[p]=Ls(w),f[p].c(),f[p].m(s,null))}for(;p<f.length;p+=1)f[p].d(1);f.length=a.length}},d(c){c&&q(i),c&&q(r),c&&q(s),Sn(f,c)}}}function Ku(e){let i,t,r,s,n,l,o,u,a,f;return o=new ul({}),{c(){i=G("button"),t=G("iconify-icon"),r=he(),s=G("button"),n=G("iconify-icon"),l=he(),fr(o.$$.fragment),this.h()},l(c){i=W(c,"BUTTON",{class:!0});var d=j(i);t=W(d,"ICONIFY-ICON",{icon:!0}),j(t).forEach(q),d.forEach(q),r=de(c),s=W(c,"BUTTON",{class:!0});var p=j(s);n=W(p,"ICONIFY-ICON",{icon:!0}),j(n).forEach(q),p.forEach(q),l=de(c),cr(o.$$.fragment,c),this.h()},h(){Fr(t,"icon","mdi:format-font-size-decrease"),T(i,"class","text-xl btn-icon variant-filled-primary"),Fr(n,"icon","mdi:format-font-size-increase"),T(s,"class","text-xl btn-icon variant-filled-primary")},m(c,d){Y(c,i,d),J(i,t),Y(c,r,d),Y(c,s,d),J(s,n),Y(c,l,d),hr(o,c,d),u=!0,a||(f=[$e(i,"click",e[2]),$e(s,"click",e[1])],a=!0)},p:qi,i(c){u||(A(o.$$.fragment,c),u=!0)},o(c){Q(o.$$.fragment,c),u=!1},d(c){c&&q(i),c&&q(r),c&&q(s),c&&q(l),dr(o,c),a=!1,Ds(f)}}}function $u(e){let i,t;return i=new Hn({props:{class:"shadow-2xl",$$slots:{trail:[Ku],lead:[Yu]},$$scope:{ctx:e}}}),{c(){fr(i.$$.fragment)},l(r){cr(i.$$.fragment,r)},m(r,s){hr(i,r,s),t=!0},p(r,s){const n={};s&17&&(n.$$scope={dirty:s,ctx:r}),i.$set(n)},i(r){t||(A(i.$$.fragment,r),t=!0)},o(r){Q(i.$$.fragment,r),t=!1},d(r){dr(i,r)}}}function ea(e){let i,t,r,s;return i=new el({props:{$$slots:{header:[$u],default:[Xu]},$$scope:{ctx:e}}}),{c(){fr(i.$$.fragment),t=he(),r=G("meta"),this.h()},l(n){cr(i.$$.fragment,n),t=de(n);const l=Ms("svelte-nkipu8",Kt.head);r=W(l,"META",{}),l.forEach(q),this.h()},h(){Kt.title="UbuMaths - Les maths de la chandelle verte"},m(n,l){hr(i,n,l),Y(n,t,l),J(Kt.head,r),s=!0},p(n,[l]){const o={};l&17&&(o.$$scope={dirty:l,ctx:n}),i.$set(o)},i(n){s||(A(i.$$.fragment,n),s=!0)},o(n){Q(i.$$.fragment,n),s=!1},d(n){dr(i,n),n&&q(t),q(r)}}}function ia(e,i,t){let r;er(e,kn,u=>t(0,r=u));let{$$slots:s={},$$scope:n}=i;function l(){const u=ji(Bi)+1;Bi.set(u),document.getElementsByTagName("html")[0].style.fontSize=`${u}px`}function o(){const u=ji(Bi)-1;Bi.set(u),document.getElementsByTagName("html")[0].style.fontSize=`${u}px`}return Ju(),e.$$set=u=>{"$$scope"in u&&t(4,n=u.$$scope)},[r,l,o,s,n]}class ua extends Yi{constructor(i){super(),Ki(this,i,ia,ea,$i,{})}}export{ua as default};
